(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,t,r)=>{},98547,(e,t,r)=>{var a=e.i(47167);e.r(16015);var n=e.r(71645),s=n&&"object"==typeof n&&"default"in n?n:{default:n},l=void 0!==a.default&&a.default.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},i=function(){function e(e){var t=void 0===e?{}:e,r=t.name,a=void 0===r?"stylesheet":r,n=t.optimizeForSpeed,s=void 0===n?l:n;c(o(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",c("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var i="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=i?i.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(l||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(o(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return l||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(a){l||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];c(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(o(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return r?n.insertBefore(a,r):n.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},m={};function u(e,t){if(!t)return"jsx-"+e;var r=String(t),a=e+r;return m[a]||(m[a]="jsx-"+d(e+"-"+r)),m[a]}function h(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return m[r]||(m[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),m[r]}var f=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,a=void 0===r?null:r,n=t.optimizeForSpeed,s=void 0!==n&&n;this._sheet=a||new i({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),a&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),a=r.styleId,n=r.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var s=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=s,this._instancesCounts[a]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var a=this._fromServer&&this._fromServer[r];a?(a.parentNode.removeChild(a),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],a=e[1];return s.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,a=e.id;if(r){var n=u(a,r);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return h(n,e)}):[h(n,t)]}}return{styleId:u(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=n.createContext(null);function g(){return new f}function y(){return n.useContext(p)}p.displayName="StyleSheetContext";var x=s.default.useInsertionEffect||s.default.useLayoutEffect,b="undefined"!=typeof window?g():void 0;function v(e){var t=b||y();return t&&("undefined"==typeof window?t.add(e):x(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}v.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,a=n.useContext(p),l=n.useState(function(){return a||t||g()})[0];return s.default.createElement(p.Provider,{value:l},r)},r.createStyleRegistry=g,r.style=v,r.useStyleRegistry=y},37902,(e,t,r)=>{t.exports=e.r(98547).style},52683,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a(e){return e?.name||"Unknown"}function n(e){return e?e.mana_cost?e.mana_cost:e.card_faces&&e.card_faces[0]?.mana_cost?e.card_faces[0].mana_cost:"":""}function s(e){return"number"==typeof e?.cmc?e.cmc:0}function l(e){let t={W:0,U:0,B:0,R:0,G:0,C:0},r=[];if(e?.mana_cost&&r.push(e.mana_cost),Array.isArray(e?.card_faces))for(let t of e.card_faces)t?.mana_cost&&r.push(t.mana_cost);let a=/\{(\d+|W|U|B|R|G|C|S|X)\}/g;for(let e of r)for(let r of e.matchAll(a)){let e=r[1];e in t&&t[e]++}return t}function o(e,t){return!!(e?.type_line||"").toLowerCase().includes("land")||!!(t&&Array.isArray(e?.card_faces))&&e.card_faces.some(e=>(e.type_line||"").toLowerCase().includes("land"))}function i(e){if(Array.isArray(e?.produced_mana)&&e.produced_mana.length)return e.produced_mana;if(Array.isArray(e?.card_faces)){for(let t of e.card_faces)if(Array.isArray(t.produced_mana)&&t.produced_mana.length)return t.produced_mana}return[]}function c(e,t){return!(e?.type_line||"").toLowerCase().includes("basic land")&&t.some(t=>t.id===e.id)}let d=" -set:alchemy -set:ana game:paper",m=0;async function u(){let e=Date.now()-m;e<100&&await h(100-e),m=Date.now()}async function h(e){return new Promise(t=>setTimeout(t,e))}class f extends Error{status;details;constructor(e,t,r){super(e),this.status=t,this.details=r,this.name="ScryfallError"}}async function p(e){try{await u();let t=await fetch(`https://api.scryfall.com/cards/${e}`);if(!t.ok){let e=await t.text();throw new f("Failed to fetch card by ID",t.status,e)}let r=await t.json();if(!r||"object"!=typeof r)throw new f("Invalid card data received");return r}catch(e){if(e instanceof f)throw e;throw new f("Error fetching card",void 0,e instanceof Error?e.message:String(e))}}async function g(e){try{await u();let t=await fetch(`https://api.scryfall.com/cards/named?exact=${encodeURIComponent(e)}`);if(!t.ok){let e=await t.text();throw new f("Failed to fetch card by name",t.status,e)}let r=await t.json();if(!r||"object"!=typeof r)throw new f("Invalid card data received");return r}catch(e){if(e instanceof f)throw e;throw new f("Error fetching card",void 0,e instanceof Error?e.message:String(e))}}async function y(e){try{await u();let t=await fetch(`https://api.scryfall.com/cards/random?q=${encodeURIComponent(e+d)}`);if(!t.ok)return console.error(`Scryfall API error: ${t.status} - ${await t.text()}`),null;let r=await t.json();if(!r)throw Error("Invalid card data received");return r}catch(e){return console.error("Error fetching random card:",e),null}}async function x(e,t=100){let r=`https://api.scryfall.com/cards/search?q=${encodeURIComponent(e+d)}`,a=[];for(let e=0;e<8&&a.length<t;e++)try{let e=await fetch(r).then(e=>e.json());if(Array.isArray(e.data)&&a.push(...e.data),!e.has_more||!e.next_page)break;r=e.next_page,await h(60)}catch{break}return a.slice(0,t)}async function b(e){return x(`${e} is:commander legal:commander`,60)}async function v(e,t){let r=t.join("");return x(`${e} ci<=${r}`,120)}async function j(){return y("is:commander legal:commander")}async function k(e,t){let r=e.join("");return y(`ci<=${r} legal:commander ${t}`)}function _({identity:e}){return e&&0!==e.length?e.map(e=>(0,t.jsx)("span",{className:`mana-icon ${e.toLowerCase()}`},e)):null}function w({onSelect:e,onHover:s,onMouseLeave:l}){let[o,i]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),[m,u]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)(new Set),[y,x]=(0,r.useState)(""),v=(0,r.useMemo)(()=>Array.from(p).join(" "),[p]),k=(0,r.useCallback)(async()=>{if(!o.trim()&&!v&&!y){d([]),u("");return}f(!0),u("Searching commandersâ€¦");try{let e=o.trim();if(v&&(e=e?`${e} ${v}`:v),y){let t={aggro:'o:haste or o:trample or o:"+1/+1"',stax:'o:"each opponent" or o:"cannot" or o:"tap"',combo:'o:"whenever" or o:"search your library"',tribal:'o:"creature" or o:"creatures"',voltron:'o:"equipped" or o:"enchanted"',control:'o:"counter target" or o:"destroy target"'}[y]||"";t&&(e=e?`${e} ${t}`:t)}let t=await b(e||"*");d(t),u(t.length?`${t.length} result(s)`:"No results.")}catch{u("Error fetching commanders.")}finally{f(!1)}},[o,v,y]);(0,r.useEffect)(()=>{let e=setTimeout(()=>{k()},300);return()=>clearTimeout(e)},[p,y,k]);let w=(0,r.useCallback)(e=>{let t=new Set(p);""===e?g(new Set):(t.has(e)?t.delete(e):t.add(e),g(t))},[p]),C=(0,r.useCallback)(e=>{x(e)},[]),S=(0,r.useCallback)(async()=>{f(!0),u("Picking a random commanderâ€¦");try{let t=await j();t?(e(t),d([]),u(`${a(t)} selected`)):u("Error picking random commander.")}catch{u("Error picking random commander.")}finally{f(!1)}},[e]),N=(0,r.useCallback)(async t=>{let r=c.find(e=>e.id===t);r&&(e(r),d([]))},[c,e]);return(0,t.jsxs)("section",{className:"col",children:[(0,t.jsx)("h2",{children:"Select Commander"}),(0,t.jsxs)("div",{className:"inline-controls",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&k(),placeholder:"Search for commander (e.g., Atraxa)"}),(0,t.jsx)("button",{className:"btn primary",onClick:k,disabled:h,children:"Search"}),(0,t.jsx)("button",{className:"btn",onClick:S,disabled:h,children:"Random Commander"})]}),(0,t.jsxs)("div",{className:"small",style:{marginTop:"0.5rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,t.jsx)("span",{className:"muted",children:"Color:"}),(0,t.jsx)("button",{className:`btn ${0===p.size?"primary":""}`,onClick:()=>w(""),children:"Any"}),(0,t.jsx)("button",{className:`btn ${p.has("ci:w")?"primary":""}`,onClick:()=>w("ci:w"),children:"W"}),(0,t.jsx)("button",{className:`btn ${p.has("ci:u")?"primary":""}`,onClick:()=>w("ci:u"),children:"U"}),(0,t.jsx)("button",{className:`btn ${p.has("ci:b")?"primary":""}`,onClick:()=>w("ci:b"),children:"B"}),(0,t.jsx)("button",{className:`btn ${p.has("ci:r")?"primary":""}`,onClick:()=>w("ci:r"),children:"R"}),(0,t.jsx)("button",{className:`btn ${p.has("ci:g")?"primary":""}`,onClick:()=>w("ci:g"),children:"G"})]}),(0,t.jsxs)("div",{className:"small",style:{marginTop:"0.5rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,t.jsx)("span",{className:"muted",children:"Archetype:"}),(0,t.jsx)("button",{className:`btn ${""===y?"primary":""}`,onClick:()=>C(""),children:"Any"}),(0,t.jsx)("button",{className:`btn ${"aggro"===y?"primary":""}`,onClick:()=>C("aggro"===y?"":"aggro"),children:"Aggro"}),(0,t.jsx)("button",{className:`btn ${"stax"===y?"primary":""}`,onClick:()=>C("stax"===y?"":"stax"),children:"Stax"}),(0,t.jsx)("button",{className:`btn ${"combo"===y?"primary":""}`,onClick:()=>C("combo"===y?"":"combo"),children:"Combo"}),(0,t.jsx)("button",{className:`btn ${"tribal"===y?"primary":""}`,onClick:()=>C("tribal"===y?"":"tribal"),children:"Tribal"}),(0,t.jsx)("button",{className:`btn ${"voltron"===y?"primary":""}`,onClick:()=>C("voltron"===y?"":"voltron"),children:"Voltron"}),(0,t.jsx)("button",{className:`btn ${"control"===y?"primary":""}`,onClick:()=>C("control"===y?"":"control"),children:"Control"})]}),(0,t.jsx)("div",{className:"small muted",role:"status",style:{marginTop:"0.5rem"},children:m&&(0,t.jsx)("span",{className:h?"loading":"",children:m})}),(0,t.jsx)("ul",{children:c.map(e=>{let r=function(e){if(!e?.name)return null;let t=e.name.toLowerCase().replace(/['']/g,"").replace(/[,]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-");return`https://edhrec.com/commanders/${t}`}(e),o=e?"scryfall_uri"in e&&"string"==typeof e.scryfall_uri?e.scryfall_uri:`https://scryfall.com/search?q=!"${encodeURIComponent(e.name)}"`:null;return(0,t.jsxs)("li",{onMouseMove:t=>s?.(e,t),onMouseLeave:l,children:[(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[(0,t.jsxs)("span",{className:"small",children:[a(e)," ",n(e)&&`(${n(e)})`," - ",(0,t.jsx)("span",{className:"muted",children:e.type_line||""})," ",(0,t.jsx)(_,{identity:e.color_identity})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",fontSize:"0.85rem"},children:[r&&(0,t.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"small",style:{color:"var(--link-color, #4a9eff)"},onClick:e=>e.stopPropagation(),children:"ðŸ“Š EDHREC"}),o&&(0,t.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"small",style:{color:"var(--link-color, #4a9eff)"},onClick:e=>e.stopPropagation(),children:"ðŸ” Scryfall"})]})]}),(0,t.jsx)("button",{className:"btn",onClick:()=>N(e.id),children:"Pick"})]},e.id)})})]})}let C={aggro:{keywords:["attack","combat","damage","haste","double strike","first strike","trample"],cmcPreference:"low",powerPreference:"high"},combo:{keywords:["whenever","trigger","copy","untap","create","token","sacrifice"],cmcPreference:"medium",complexityPreference:"high"},control:{keywords:["counter","destroy","exile","return","tap","can't","prevent"],cmcPreference:"medium",colorPreference:["blue","black","white"]},value:{keywords:["draw","search","scry","investigate","treasure","card","mana"],cmcPreference:"medium",cardAdvantagePreference:"high"},tribal:{keywords:["creature type","tribal","lord","other","you control"],typelineImportance:"high",synergyPreference:"high"},spellslinger:{keywords:["instant","sorcery","cast","copy","spell","magecraft"],spellPreference:"high"},tokens:{keywords:["create","token","creature tokens","populate","copy"],tokenPreference:"high"},graveyard:{keywords:["graveyard","return","exile","flashback","escape","resurrect"],graveyardPreference:"high"}};async function S(e,t){let r=e.map(e=>({commander:e,score:function(e,t){let r=C[t];if(!r)return 0;let a=0,n=(e.oracle_text||"").toLowerCase(),s=(e.type_line||"").toLowerCase();r.keywords.forEach(e=>{let t=(n.match(RegExp(e,"gi"))||[]).length;a+=3*t});let l=e.cmc||0;if("low"===r.cmcPreference&&l<=4&&(a+=4),"medium"===r.cmcPreference&&l>=4&&l<=6&&(a+=4),"high"===r.cmcPreference&&l>=6&&(a+=4),r.colorPreference){let t=e.color_identity||[],n=r.colorPreference.filter(e=>t.includes(e)).length;a+=3*n}if("high"===r.typelineImportance&&r.keywords.forEach(e=>{s.includes(e.toLowerCase())&&(a+=6)}),"tribal"===t&&(n.includes("creature type")||n.match(/other .+ you control/i)||n.match(/each .+ you control/i))&&(a+=8),"aggro"===t&&e.power&&e.toughness){let t=parseInt(e.power);!isNaN(t)&&t>=4&&(a+=3)}return a}(e,t)}));return r.sort((e,t)=>t.score-e.score),r.map(e=>e.commander)}function N({onSelect:e}){let[a,n]=(0,r.useState)(!1),[s,l]=(0,r.useState)([]),[o,i]=(0,r.useState)(""),c=async e=>{n(!0),i(e);try{let t=function(e){let t="is:commander -is:digital",r=C[e];if(!r)return t;let a=r.keywords.slice(0,3).map(e=>`o:"${e}"`).join(" OR ");return`${t} (${a})`}(e),r=await b(t),a=await S(r,e);l(a.slice(0,5))}catch(e){console.error("Error suggesting commanders:",e)}finally{n(!1)}};return(0,t.jsxs)("div",{className:"ai-suggestion-container p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"AI Commander Suggestions"}),(0,t.jsxs)("div",{className:"strategy-selection mb-4",role:"group","aria-labelledby":"strategy-label",children:[(0,t.jsx)("label",{id:"strategy-label",className:"block text-sm font-medium mb-2",children:"Select Your Preferred Strategy:"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-4",children:[{value:"aggro",label:"Aggressive (Combat & Fast)"},{value:"combo",label:"Combo (Complex Interactions)"},{value:"control",label:"Control (Defensive & Reactive)"},{value:"value",label:"Value (Card Advantage & Resources)"},{value:"tribal",label:"Tribal (Creature Type Synergy)"},{value:"spellslinger",label:"Spellslinger (Instant/Sorcery Focus)"},{value:"tokens",label:"Tokens (Go Wide Strategy)"},{value:"graveyard",label:"Graveyard (Recursion & Reanimation)"}].map(({value:e,label:r})=>(0,t.jsx)("button",{onClick:()=>c(e),className:`px-3 py-2 rounded-md text-sm ${o===e?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"}`,"aria-pressed":o===e,role:"button",children:r},e))})]}),a&&(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Analyzing commanders..."})]}),s.length>0&&!a&&(0,t.jsx)("div",{className:"suggestions-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:s.map(r=>(0,t.jsxs)("div",{className:"commander-card p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500 cursor-pointer",onClick:()=>e(r),children:[(0,t.jsx)("h4",{className:"font-medium mb-1",children:r.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.type_line}),r.oracle_text&&(0,t.jsx)("p",{className:"text-sm mt-2 line-clamp-3",children:r.oracle_text})]},r.id))})]})}var R=r;class $ extends R.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback||(0,t.jsxs)("div",{className:"error-boundary",children:[(0,t.jsx)("h2",{children:"Something went wrong"}),(0,t.jsx)("p",{children:this.state.error?.message}),(0,t.jsx)("button",{onClick:()=>this.setState({hasError:!1}),className:"btn primary",children:"Try again"})]}):this.props.children}}let T={ramp:'t:artifact ((o:"add {" or o:mana) or o:"search your library for a land")',draw:'(o:"draw a card" or o:"draw two" or o:investigate)',removal:'(o:"destroy target" or o:"exile target" or o:"deals damage to target creature")',boardwipe:'(o:"destroy all" or o:"each creature" or o:"all creatures" or o:"sacrifice all")',tutor:'(o:"search your library" -t:land)'};function L({commander:e,deck:s,onAddCard:l,onGenerateRandomDeck:o,mdfcAsLand:i,setMdfcAsLand:c,targetLands:d,setTargetLands:m,basicsPercent:u,setBasicsPercent:h,preferColorLands:f,setPreferColorLands:p,avoidColorlessLands:g,setAvoidColorlessLands:y,onHover:x,onMouseLeave:b,generatingDeck:j=!1,deckGenStatus:k=""}){let[_,w]=(0,r.useState)(""),[C,S]=(0,r.useState)([]),[N,R]=(0,r.useState)(""),[L,D]=(0,r.useState)(!1),E=(0,r.useCallback)(async t=>{let r=t||_;if(e&&r.trim()){D(!0),R("Searching cardsâ€¦");try{let t=await v(r,e.color_identity||[]);S(t),R(t.length?`${t.length} result(s)`:"No results.")}catch(e){console.error("Error fetching cards:",e),R("Error fetching cards. Please try again.")}finally{D(!1)}}},[e,_]),M=(0,r.useCallback)(e=>{let t=T[e];w(t),E(t)},[E]),I=(0,r.useCallback)(e=>{s.length>=99?alert("Deck is full (99 cards plus 1 commander)."):s.some(t=>t.id===e.id&&!e.type_line?.toLowerCase().includes("basic land"))?alert("Commander format allows only one copy."):l(e)},[s,l]);return e?(0,t.jsx)($,{children:(0,t.jsxs)("section",{style:{marginTop:"1rem"},role:"search","aria-label":"Card search",children:[(0,t.jsx)("h3",{children:"Card Search"}),(0,t.jsxs)("div",{className:"inline-controls",children:[(0,t.jsx)("input",{type:"text",value:_,onChange:e=>w(e.target.value),onKeyDown:e=>"Enter"===e.key&&E(),placeholder:"Search for cards (e.g., ramp, draw, removal)"}),(0,t.jsx)("button",{className:"btn primary",onClick:()=>E(),disabled:L,children:"Search"}),(0,t.jsx)("button",{className:"btn",onClick:o,disabled:L||j,children:j?"Generating...":"Random Deck"}),(0,t.jsx)("span",{className:"small muted",role:"status",children:k?(0,t.jsx)("span",{className:"loading",style:{color:"var(--primary)",fontWeight:"bold"},children:k}):N?(0,t.jsx)("span",{className:L?"loading":"",children:N}):null})]}),(0,t.jsxs)("div",{className:"small",style:{marginTop:"0.5rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,t.jsx)("span",{className:"muted",children:"Quick filters:"}),Object.keys(T).map(e=>(0,t.jsx)("button",{className:"btn",onClick:()=>M(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,t.jsxs)("div",{className:"small muted",style:{marginTop:"0.5rem",display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"center"},children:[(0,t.jsxs)("label",{children:["Target lands:"," ",(0,t.jsx)("input",{type:"number",min:"32",max:"60",value:d,onChange:e=>{let t=parseInt(e.target.value,10);isNaN(t)||m(t)},style:{width:"4rem"}})]}),(0,t.jsxs)("label",{children:["Basics %:"," ",(0,t.jsx)("input",{type:"number",min:"0",max:"100",value:u,onChange:e=>{let t=parseInt(e.target.value,10);isNaN(t)||h(t)},style:{width:"4rem"}})]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:i,onChange:e=>c(e.target.checked)})," Count MDFC land faces as lands"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:f,onChange:e=>p(e.target.checked)})," ","Prefer lands that produce commander colors"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:g,onChange:e=>y(e.target.checked)})," ","Avoid colorless-only utility lands"]})]}),(0,t.jsx)("ul",{children:C.map(e=>{let r=s.some(t=>t.id===e.id&&!e.type_line?.toLowerCase().includes("basic land"))||s.length>=99;return(0,t.jsxs)("li",{onMouseMove:t=>x?.(e,t),onMouseLeave:b,children:[(0,t.jsxs)("span",{className:"small",children:[a(e)," ",n(e)&&`(${n(e)})`," - ",(0,t.jsx)("span",{className:"muted",children:e.type_line||""})]}),(0,t.jsx)("button",{className:"btn",onClick:()=>I(e),disabled:r,children:"Add"})]},e.id)})})]})}):null}var D=e.i(932);async function E(e){if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(e);return}catch(e){console.warn("Clipboard API failed:",e)}let t=null;try{if((t=document.createElement("textarea")).value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),!document.execCommand("copy"))throw Error("Copy command failed")}catch(e){throw console.error("Clipboard fallback failed:",e),Error("Failed to copy text to clipboard")}finally{t&&t.parentNode&&t.parentNode.removeChild(t)}}let M=["Ancestral Recall","Balance","Biorhythm","Black Lotus","Braids, Cabal Minion","Chaos Orb","Coalition Victory","Channel","Emrakul, the Aeons Torn","Erayo, Soratami Ascendant","Falling Star","Fastbond","Gifts Ungiven","Griselbrand","Iona, Shield of Emeria","Karakas","Leovold, Emissary of Trest","Library of Alexandria","Limited Resources","Lutri, the Spellchaser","Mox Emerald","Mox Jet","Mox Pearl","Mox Ruby","Mox Sapphire","Panoptic Mirror","Paradox Engine","Primeval Titan","Prophet of Kruphix","Recurring Nightmare","Rofellos, Llanowar Emissary","Shahrazad","Sundering Titan","Sway of the Stars","Sylvan Primordial","Time Vault","Time Walk","Tinker","Tolarian Academy","Trade Secrets","Upheaval","Worldfire"];async function I(e,t){let r=function(e){let t=e.split("\n").map(e=>e.trim()).filter(e=>e),r={commander:null,deck:[],maybeboard:[]},a="deck";for(let e of t){if(e.startsWith("//")||e.startsWith("#")||e.startsWith(";"))continue;let t=e.toLowerCase();if(t.includes("commander")||t.includes("general")){a="commander";continue}if(t.includes("maybeboard")||t.includes("sideboard")||t.includes("maybe")){a="maybeboard";continue}if(t.includes("deck")||t.includes("main")){a="deck";continue}let n=e.match(/^(\d+)\s*(?:x\s*)?(.+)$/i);if(n){let e=parseInt(n[1],10),t=n[2].trim().split(" #")[0].split("//")[0].trim();"commander"===a?r.commander=t:"maybeboard"===a?(r.maybeboard||(r.maybeboard=[]),r.maybeboard.push({quantity:e,name:t})):r.deck.push({quantity:e,name:t})}else e.trim()&&"commander"===a&&(r.commander=e.trim())}return r}(e);if(0===r.deck.length&&!r.commander)throw Error("No cards found in decklist");let a=null;if(r.commander){t?.("Looking up commander...");try{(a=await g(r.commander))||t?.(`Warning: Commander "${r.commander}" not found`)}catch(e){console.error("Error fetching commander:",e),t?.(`Warning: Could not fetch commander "${r.commander}"`)}}let n=[],s=[],l=0,o=0;for(let e=0;e<r.deck.length;e++){let a=r.deck[e];t?.(`Loading deck cards... ${e+1}/${r.deck.length} (${l} found, ${o} not found)`);try{let e=await g(a.name);if(e){for(let t=0;t<a.quantity;t++)n.push(e);l++}else o++,console.warn(`Card not found: ${a.name}`)}catch(e){o++,console.error(`Error fetching card "${a.name}":`,e)}e%10==0&&e>0&&await new Promise(e=>setTimeout(e,100))}if(r.maybeboard&&r.maybeboard.length>0)for(let e=0;e<r.maybeboard.length;e++){let a=r.maybeboard[e];t?.(`Loading maybeboard... ${e+1}/${r.maybeboard.length}`);try{let e=await g(a.name);if(e)for(let t=0;t<a.quantity;t++)s.push(e)}catch(e){console.error(`Error fetching maybeboard card "${a.name}":`,e)}e%10==0&&e>0&&await new Promise(e=>setTimeout(e,100))}if(0===n.length&&!a)throw Error("No cards could be imported. Please check card names.");return{commander:a,deck:n,maybeboard:s}}function A(e){let r,i,c,d,m,u,h,f,p,g,y,x,b,v,j,k,_,w,C,S,N,R,$,T,L,I,A,z,U,G,O,H,q,V,K,J,X,Y,Q,Z=(0,D.c)(138),{commander:ee,deck:et,onRemove:er,onTag:ea,onAddToMaybeboard:en,mdfcAsLand:es,onHover:el,onMouseLeave:eo}=e;if(Z[0]!==ee||Z[1]!==et||Z[2]!==es||Z[3]!==en||Z[4]!==el||Z[5]!==eo||Z[6]!==er||Z[7]!==ea){v=Symbol.for("react.early_return_sentinel");e:{let e,k,_,w,C,S,N,R,$,T,L,D,I,A,z,U,G,O,H;Z[23]!==es?(e=e=>!o(e,es),Z[23]=es,Z[24]=e):e=Z[24];let q=et.filter(e);Z[25]!==es?(k=e=>o(e,es),Z[25]=es,Z[26]=k):k=Z[26];let V=et.filter(k),K=[...q,...V];Z[27]!==et?(_=function(e){let t={creature:0,instant:0,sorcery:0,artifact:0,enchantment:0,planeswalker:0,land:0};for(let r of e){let e=(r.type_line||"").toLowerCase();e.includes("creature")&&t.creature++,e.includes("instant")&&t.instant++,e.includes("sorcery")&&t.sorcery++,e.includes("artifact")&&t.artifact++,e.includes("enchantment")&&t.enchantment++,e.includes("planeswalker")&&t.planeswalker++,e.includes("land")&&t.land++}return t}(et),Z[27]=et,Z[28]=_):_=Z[28],r=_,Z[29]===Symbol.for("react.memo_cache_sentinel")?(w=[0,1,2,3,4,5,6],Z[29]=w):w=Z[29];let J=w,X={0:0,1:0,2:0,3:0,4:0,5:0,6:0},Y={W:0,U:0,B:0,R:0,G:0};for(let e of q){let t=Math.min(6,Math.floor(s(e)));X[t]=X[t]+1;let r=l(e);for(let e of Object.keys(Y))Y[e]=Y[e]+(r[e]||0)}Z[30]!==X?(C=J.map(e=>`${e}${6===e?"+":""}:${X[e]}`),Z[30]=X,Z[31]=C):C=Z[31],i=`Curve: ${C.join(" | ")}`,g=`Pips W:${Y.W} U:${Y.U} B:${Y.B} R:${Y.R} G:${Y.G}`;let Q=q.filter(W).length,ei=et.filter(B).length,ec=et.filter(F).length;if(j=[],Q>12&&j.push("Many 6+ drops"),ei<8&&j.push("Low ramp"),ec<8&&j.push("Low draw"),V.length<32&&j.push("Low land count"),Z[32]!==ee||Z[33]!==et||Z[34]!==es){let e,t;e=et.filter(e=>!o(e,es)),t=et.filter(e=>o(e,es)),S=`Commander
1 ${ee?ee.name:""}

Nonlands
`+e.map(e=>`1 ${e.name}`).join("\n")+`

Lands
`+t.map(e=>`1 ${e.name}`).join("\n"),Z[32]=ee,Z[33]=et,Z[34]=es,Z[35]=S}else S=Z[35];if(c=S,Z[36]!==c?(N=async()=>{await E(c),alert("Decklist copied to clipboard.")},Z[36]=c,Z[37]=N):N=Z[37],d=N,Z[38]!==et||Z[39]!==es?(R=async()=>{await E([...et.filter(e=>!o(e,es)),...et.filter(e=>o(e,es))].map(e=>`1 ${e.name}`).join("\n")),alert("MTGO decklist copied to clipboard.")},Z[38]=et,Z[39]=es,Z[40]=R):R=Z[40],h=R,Z[41]!==ee||Z[42]!==et||Z[43]!==es?($=async()=>{let e;await E((e=[...et.filter(e=>!o(e,es)),...et.filter(e=>o(e,es))],`Deck
${e.map(e=>`1 ${e.name}`).join("\n")}

Commander
1 ${ee?ee.name:""}`)),alert("Arena decklist copied to clipboard.")},Z[41]=ee,Z[42]=et,Z[43]=es,Z[44]=$):$=Z[44],u=$,Z[45]!==ee||Z[46]!==et||Z[47]!==es?(T=async()=>{let e,t;await E((e=et.filter(e=>!o(e,es)),t=et.filter(e=>o(e,es)),`Commander
1 ${ee?ee.name:""}

${[...e,...t].map(e=>`1 ${e.name}`).join("\n")}`)),alert("Moxfield decklist copied to clipboard.")},Z[45]=ee,Z[46]=et,Z[47]=es,Z[48]=T):T=Z[48],f=T,Z[49]!==ee||Z[50]!==et||Z[51]!==es?(L=async()=>{let e,t,r;await E((e=et.filter(e=>!o(e,es)),t=et.filter(e=>o(e,es)),r="",ee&&(r+=`// Commander
1 ${ee.name}

`),r+=`// Deck
`,r+=[...e,...t].map(e=>{let t=e._tag?` # ${e._tag}`:"";return`1 ${e.name}${t}`}).join("\n"))),alert("Archidekt decklist copied to clipboard.")},Z[49]=ee,Z[50]=et,Z[51]=es,Z[52]=L):L=Z[52],m=L,Z[53]!==ee||Z[54]!==et||Z[55]!==es?(D=async()=>{let e,t,r;await E((e=et.filter(e=>!o(e,es)),t=et.filter(e=>o(e,es)),r="",ee&&(r+=`Commander
1 ${ee.name}

`),r+=[...e,...t].map(e=>{let t=e._tag?` # ${e._tag}`:"";return`1 ${e.name}${t}`}).join("\n"))),alert("Moxfield decklist with tags copied to clipboard.")},Z[53]=ee,Z[54]=et,Z[55]=es,Z[56]=D):D=Z[56],p=D,!ee){v=null;break e}Z[57]!==et.length?(y=(0,t.jsxs)("h2",{children:["Deck List (",(0,t.jsx)("span",{children:et.length})," cards)"]}),Z[57]=et.length,Z[58]=y):y=Z[58],Z[59]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)("strong",{children:"Commander:"}),Z[59]=I):I=Z[59],Z[60]!==ee?(A=a(ee),Z[60]=ee,Z[61]=A):A=Z[61],Z[62]!==A?(z=(0,t.jsx)("span",{children:A}),Z[62]=A,Z[63]=z):z=Z[63],Z[64]!==ee.color_identity?(U=ee.color_identity?.map(P).join(" ")||"",Z[64]=ee.color_identity,Z[65]=U):U=Z[65],Z[66]!==U?(G=(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:U}}),Z[66]=U,Z[67]=G):G=Z[67],Z[68]!==z||Z[69]!==G?(O=(0,t.jsxs)("div",{children:[I," ",z," ",G]}),Z[68]=z,Z[69]=G,Z[70]=O):O=Z[70],Z[71]===Symbol.for("react.memo_cache_sentinel")?(H=(0,t.jsxs)("div",{className:"small muted",children:["Tip: Press ",(0,t.jsx)("span",{className:"kbd",children:"Enter"})," to search â€¢ Hover a card to preview"]}),Z[71]=H):H=Z[71],Z[72]!==O?(x=(0,t.jsxs)("div",{className:"line",children:[O,H]}),Z[72]=O,Z[73]=x):x=Z[73],b=(0,t.jsx)("ul",{children:K.map(e=>{var r;let s=e?.legalities?.commander==="legal"?(0,t.jsx)("span",{className:"badge",children:"EDH"}):null,l=e._tag?(0,t.jsx)("span",{className:"badge",children:e._tag}):null,o=(r=e.name,M.some(e=>r.toLowerCase()===e.toLowerCase()))?(0,t.jsx)("span",{className:"badge",style:{background:"#f8d7da",color:"#721c24",borderColor:"#f5c6cb"},children:"BANNED"}):null;return(0,t.jsxs)("li",{onMouseMove:t=>el?.(e,t),onMouseLeave:eo,children:[(0,t.jsxs)("span",{className:"small",children:[a(e)," ",n(e)&&`(${n(e)})`," - ",(0,t.jsx)("span",{className:"muted",children:e.type_line||""})," ",s," ",l," ",o]}),(0,t.jsx)("span",{style:{flex:"1 1 auto"}}),(0,t.jsxs)("div",{className:"inline-controls",children:[(0,t.jsxs)("select",{className:"btn",onChange:t=>ea(e.id,t.target.value),defaultValue:"",children:[(0,t.jsx)("option",{value:"",children:"Tag"}),(0,t.jsx)("option",{value:"Ramp",children:"Ramp"}),(0,t.jsx)("option",{value:"Draw",children:"Draw"}),(0,t.jsx)("option",{value:"Removal",children:"Removal"})]}),en&&(0,t.jsx)("button",{className:"btn",onClick:()=>en(e),children:"To Maybe"}),(0,t.jsx)("button",{className:"btn",onClick:()=>er(e.id),children:"Remove"})]})]},e.id)})})}Z[0]=ee,Z[1]=et,Z[2]=es,Z[3]=en,Z[4]=el,Z[5]=eo,Z[6]=er,Z[7]=ea,Z[8]=r,Z[9]=i,Z[10]=c,Z[11]=d,Z[12]=m,Z[13]=u,Z[14]=h,Z[15]=f,Z[16]=p,Z[17]=g,Z[18]=y,Z[19]=x,Z[20]=b,Z[21]=v,Z[22]=j}else r=Z[8],i=Z[9],c=Z[10],d=Z[11],m=Z[12],u=Z[13],h=Z[14],f=Z[15],p=Z[16],g=Z[17],y=Z[18],x=Z[19],b=Z[20],v=Z[21],j=Z[22];return v!==Symbol.for("react.early_return_sentinel")?v:(Z[74]===Symbol.for("react.memo_cache_sentinel")?(k={margin:"0.5rem 0",display:"flex",gap:"1rem",flexWrap:"wrap"},Z[74]=k):k=Z[74],Z[75]!==i?(_=(0,t.jsx)("span",{children:i}),Z[75]=i,Z[76]=_):_=Z[76],Z[77]!==g?(w=(0,t.jsx)("span",{children:g}),Z[77]=g,Z[78]=w):w=Z[78],Z[79]!==j?(C=j.length>0&&(0,t.jsx)("span",{className:"badge",style:{background:"#fff3cd",color:"#8a6d3b",borderColor:"#ffecb5"},children:j.join(", ")}),Z[79]=j,Z[80]=C):C=Z[80],Z[81]!==_||Z[82]!==w||Z[83]!==C?(S=(0,t.jsxs)("div",{className:"small",style:k,children:[_," ",w,C]}),Z[81]=_,Z[82]=w,Z[83]=C,Z[84]=S):S=Z[84],Z[85]!==r.creature?(N=(0,t.jsxs)("span",{className:"badge",children:["Creatures: ",r.creature]}),Z[85]=r.creature,Z[86]=N):N=Z[86],Z[87]!==r.instant?(R=(0,t.jsxs)("span",{className:"badge",children:["Instants: ",r.instant]}),Z[87]=r.instant,Z[88]=R):R=Z[88],Z[89]!==r.sorcery?($=(0,t.jsxs)("span",{className:"badge",children:["Sorceries: ",r.sorcery]}),Z[89]=r.sorcery,Z[90]=$):$=Z[90],Z[91]!==r.artifact?(T=(0,t.jsxs)("span",{className:"badge",children:["Artifacts: ",r.artifact]}),Z[91]=r.artifact,Z[92]=T):T=Z[92],Z[93]!==r.enchantment?(L=(0,t.jsxs)("span",{className:"badge",children:["Enchantments: ",r.enchantment]}),Z[93]=r.enchantment,Z[94]=L):L=Z[94],Z[95]!==r.planeswalker?(I=(0,t.jsxs)("span",{className:"badge",children:["Planeswalkers: ",r.planeswalker]}),Z[95]=r.planeswalker,Z[96]=I):I=Z[96],Z[97]!==r.land?(A=(0,t.jsxs)("span",{className:"badge",children:["Lands: ",r.land]}),Z[97]=r.land,Z[98]=A):A=Z[98],Z[99]!==N||Z[100]!==R||Z[101]!==$||Z[102]!==T||Z[103]!==L||Z[104]!==I||Z[105]!==A?(z=(0,t.jsxs)("div",{className:"small",children:[N,R,$,T,L,I,A]}),Z[99]=N,Z[100]=R,Z[101]=$,Z[102]=T,Z[103]=L,Z[104]=I,Z[105]=A,Z[106]=z):z=Z[106],Z[107]===Symbol.for("react.memo_cache_sentinel")?(U=(0,t.jsx)("h3",{children:"Export Decklist"}),Z[107]=U):U=Z[107],Z[108]===Symbol.for("react.memo_cache_sentinel")?(G={width:"100%",fontFamily:"monospace",fontSize:"0.9rem"},Z[108]=G):G=Z[108],Z[109]!==c?(O=(0,t.jsx)("textarea",{rows:15,value:c,readOnly:!0,style:G}),Z[109]=c,Z[110]=O):O=Z[110],Z[111]!==d?(H=(0,t.jsx)("button",{className:"btn",onClick:d,children:"Copy"}),Z[111]=d,Z[112]=H):H=Z[112],Z[113]!==h?(q=(0,t.jsx)("button",{className:"btn",onClick:h,children:"Copy MTGO"}),Z[113]=h,Z[114]=q):q=Z[114],Z[115]!==u?(V=(0,t.jsx)("button",{className:"btn",onClick:u,children:"Copy Arena"}),Z[115]=u,Z[116]=V):V=Z[116],Z[117]!==f?(K=(0,t.jsx)("button",{className:"btn",onClick:f,children:"Copy Moxfield"}),Z[117]=f,Z[118]=K):K=Z[118],Z[119]!==p?(J=(0,t.jsx)("button",{className:"btn",onClick:p,children:"Copy Moxfield (Tags)"}),Z[119]=p,Z[120]=J):J=Z[120],Z[121]!==m?(X=(0,t.jsx)("button",{className:"btn",onClick:m,children:"Copy Archidekt"}),Z[121]=m,Z[122]=X):X=Z[122],Z[123]!==H||Z[124]!==q||Z[125]!==V||Z[126]!==K||Z[127]!==J||Z[128]!==X?(Y=(0,t.jsxs)("div",{className:"inline-controls",children:[H,q,V,K,J,X]}),Z[123]=H,Z[124]=q,Z[125]=V,Z[126]=K,Z[127]=J,Z[128]=X,Z[129]=Y):Y=Z[129],Z[130]!==y||Z[131]!==z||Z[132]!==x||Z[133]!==O||Z[134]!==Y||Z[135]!==b||Z[136]!==S?(Q=(0,t.jsxs)("section",{children:[y,x,b,S,z,U,O,Y]}),Z[130]=y,Z[131]=z,Z[132]=x,Z[133]=O,Z[134]=Y,Z[135]=b,Z[136]=S,Z[137]=Q):Q=Z[137],Q)}function P(e){return`<span class="pill">${e}</span>`}function F(e){return"Draw"===e._tag}function B(e){return"Ramp"===e._tag}function W(e){return s(e)>=6}function z(e){return/^[a-f0-9\-]+$/.test(e)}let U="edh_builder_state",G="edh_saved_decks",O="edh_dark_mode";function H(e){let a,n,s,l,o,i=(0,D.c)(15),{onLoad:c}=e,[d,m]=(0,r.useState)(q);i[0]!==d?(a=e=>{if(!confirm(`Delete deck "${e}"?`))return;let t={...d};delete t[e],localStorage.setItem(G,JSON.stringify(t)),m(t)},i[0]=d,i[1]=a):a=i[1];let u=a;i[2]!==d||i[3]!==c?(n=e=>{let t=d[e];t&&(c(t),alert(`Loaded deck: ${e}`))},i[2]=d,i[3]=c,i[4]=n):n=i[4];let h=n;if(i[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("h3",{children:"Saved Decks"}),i[5]=s):s=i[5],i[6]!==d||i[7]!==u||i[8]!==h){let e;i[10]!==u||i[11]!==h?(e=e=>(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{children:e})," ",(0,t.jsx)("button",{className:"btn",onClick:()=>h(e),children:"Load"})," ",(0,t.jsx)("button",{className:"btn danger",onClick:()=>u(e),children:"Delete"})]},e),i[10]=u,i[11]=h,i[12]=e):e=i[12],l=Object.keys(d).sort().map(e),i[6]=d,i[7]=u,i[8]=h,i[9]=l}else l=i[9];return i[13]!==l?(o=(0,t.jsxs)(t.Fragment,{children:[s,(0,t.jsx)("ul",{children:l})]}),i[13]=l,i[14]=o):o=i[14],o}function q(){try{return JSON.parse(localStorage.getItem(G)||"{}")}catch{return{}}}function V(e){let a,n,s,l,o,i,c,d,m,u,h,f=(0,D.c)(27),{card:p,y:g,onDismiss:y}=e,[x,b]=(0,r.useState)(null),[v,j]=(0,r.useState)("20px"),[k]=(0,r.useState)(K),_=(0,r.useRef)(void 0);if(f[0]!==p?(a=()=>{let e=!1;if(!p){let e=setTimeout(()=>b(null),0);return()=>clearTimeout(e)}let t=new Image,r=function(e){if(!e)return null;if(e.image_uris?.normal)return e.image_uris.normal;if(e.image_uris?.large)return e.image_uris.large;if(e.image_uris?.png)return e.image_uris.png;if(e.image_uris?.small)return e.image_uris.small;if(e.card_faces&&e.card_faces[0]?.image_uris){if(e.card_faces[0].image_uris.normal)return e.card_faces[0].image_uris.normal;if(e.card_faces[0].image_uris.large)return e.card_faces[0].image_uris.large;if(e.card_faces[0].image_uris.png)return e.card_faces[0].image_uris.png;if(e.card_faces[0].image_uris.small)return e.card_faces[0].image_uris.small}return null}(p);if(!r){let e=setTimeout(()=>b(null),0);return()=>clearTimeout(e)}return t.onload=()=>{e||b(r)},t.onerror=()=>{e||b(null)},t.src=r,()=>{e=!0}},n=[p],f[0]=p,f[1]=a,f[2]=n):(a=f[1],n=f[2]),(0,r.useEffect)(a,n),f[3]!==p||f[4]!==g?(s=()=>(p&&(_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{let e=Math.max(20,Math.min(g-300,window.innerHeight-650));j(`${e}px`)},16)),()=>{_.current&&clearTimeout(_.current)}),l=[g,p],f[3]=p,f[4]=g,f[5]=s,f[6]=l):(s=f[5],l=f[6]),(0,r.useEffect)(s,l),!x)return null;f[7]!==y?(o=e=>{e.preventDefault(),e.stopPropagation(),y&&y()},f[7]=y,f[8]=o):o=f[8];let w=o;f[9]!==w||f[10]!==k?(i=k&&(0,t.jsx)("div",{onClick:w,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,background:"transparent"},"aria-label":"Dismiss card preview"}),f[9]=w,f[10]=k,f[11]=i):i=f[11];let C=k?"auto":"none",S=x?"block":"none",N=k?"pointer":"default";return f[12]!==C||f[13]!==S||f[14]!==N||f[15]!==v?(c={position:"fixed",pointerEvents:C,zIndex:9999,left:"20px",top:v,display:S,cursor:N},f[12]=C,f[13]=S,f[14]=N,f[15]=v,f[16]=c):c=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(d={width:"450px",height:"auto",display:"block",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",borderRadius:"8px"},f[17]=d):d=f[17],f[18]!==x?(m=(0,t.jsx)("img",{src:x,alt:"Card preview",style:d}),f[18]=x,f[19]=m):m=f[19],f[20]!==w||f[21]!==c||f[22]!==m?(u=(0,t.jsx)("div",{className:"img-popover",onClick:w,role:"button",tabIndex:0,"aria-label":"Card preview - click to dismiss",style:c,children:m}),f[20]=w,f[21]=c,f[22]=m,f[23]=u):u=f[23],f[24]!==u||f[25]!==i?(h=(0,t.jsxs)(t.Fragment,{children:[i,u]}),f[24]=u,f[25]=i,f[26]=h):h=f[26],h}function K(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function J(){let e,a,n,s,l,o,i,c,d,m=(0,D.c)(12),[u,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=e=>{e.preventDefault(),h(e),p(!0)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},a=[],m[0]=e,m[1]=a):(e=m[0],a=m[1]),(0,r.useEffect)(e,a),m[2]!==u?(n=async()=>{if(!u)return;u.prompt();let{outcome:e}=await u.userChoice;"accepted"===e&&p(!1),h(null)},m[2]=u,m[3]=n):n=m[3];let g=n;m[4]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{p(!1)},m[4]=s):s=m[4];let y=s;return f?(m[5]===Symbol.for("react.memo_cache_sentinel")?(l={position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"var(--card-bg)",border:"1px solid var(--btn-bd)",borderRadius:"8px",padding:"1rem",boxShadow:"0 4px 16px rgba(0,0,0,0.2)",zIndex:1e3,maxWidth:"90%",textAlign:"center"},o=(0,t.jsx)("p",{style:{margin:"0 0 1rem 0"},children:"Install this app for a better experience!"}),m[5]=l,m[6]=o):(l=m[5],o=m[6]),m[7]!==g?(i=(0,t.jsx)("button",{className:"btn primary",onClick:g,children:"Install"}),m[7]=g,m[8]=i):i=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("button",{className:"btn",onClick:y,children:"Dismiss"}),m[9]=c):c=m[9],m[10]!==i?(d=(0,t.jsxs)("div",{style:l,children:[o,(0,t.jsxs)("div",{className:"inline-controls",children:[i,c]})]}),m[10]=i,m[11]=d):d=m[11],d):null}function X(){let[e,a]=(0,r.useState)(!1),[n,s]=(0,r.useState)(null);return((0,r.useEffect)(()=>{if("serviceWorker"in navigator){let e=async()=>{try{let e=await navigator.serviceWorker.getRegistration();if(e){s(e),console.log("Checking for service worker updates..."),await e.update(),e.waiting&&navigator.serviceWorker.controller&&(console.log("Update found - waiting service worker detected"),a(!0));let t=()=>{console.log("Update found event fired");let t=e.installing;t&&t.addEventListener("statechange",()=>{console.log("Service worker state changed:",t.state),"installed"===t.state&&navigator.serviceWorker.controller&&(console.log("New service worker installed, showing update prompt"),a(!0))})};return e.addEventListener("updatefound",t),()=>{e.removeEventListener("updatefound",t)}}}catch(e){console.error("Error checking for updates:",e)}};e();let t=setInterval(()=>{console.log("Periodic update check..."),e()},12e4),r=()=>{console.log("Service worker controller changed, reloading page"),window.location.reload()};return navigator.serviceWorker.addEventListener("controllerchange",r),()=>{clearInterval(t),navigator.serviceWorker.removeEventListener("controllerchange",r)}}},[]),e)?(0,t.jsxs)("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",background:"var(--card-bg, #fff)",border:"2px solid var(--btn-bd, #4a9eff)",borderRadius:"8px",padding:"1rem",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",zIndex:1001,maxWidth:"90%",textAlign:"center"},role:"alert","aria-live":"polite",children:[(0,t.jsx)("p",{style:{margin:"0 0 1rem 0",fontWeight:"bold",fontSize:"1.1rem"},children:"ðŸŽ‰ New version available!"}),(0,t.jsx)("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem"},children:"A new version of the app is available. Update now to get the latest features and improvements."}),(0,t.jsxs)("div",{className:"inline-controls",children:[(0,t.jsx)("button",{className:"btn primary",onClick:()=>{console.log("User clicked update"),n?.waiting?(console.log("Sending SKIP_WAITING message to service worker"),n.waiting.postMessage({type:"SKIP_WAITING"}),a(!1)):(console.log("No waiting service worker found, reloading anyway"),window.location.reload())},children:"Update Now"}),(0,t.jsx)("button",{className:"btn",onClick:()=>{console.log("User dismissed update notification"),a(!1)},children:"Later"})]})]}):null}function Y(e){let r,s,l,o,i,c,d=(0,D.c)(20),{maybeboard:m,onAddToDeck:u,onRemove:h,onHover:f,onMouseLeave:p}=e;if(0===m.length)return null;if(d[0]===Symbol.for("react.memo_cache_sentinel")?(r={marginTop:"1rem"},d[0]=r):r=d[0],d[1]!==m.length?(s=(0,t.jsxs)("h3",{children:["Maybeboard (",m.length,")"]}),d[1]=m.length,d[2]=s):s=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("div",{className:"small muted",style:{marginBottom:"0.5rem"},children:'Cards considered but not in the main deck. Click "Add to Deck" to move them to your deck.'}),d[3]=l):l=d[3],d[4]!==m||d[5]!==u||d[6]!==f||d[7]!==p||d[8]!==h){let e;d[10]!==u||d[11]!==f||d[12]!==p||d[13]!==h?(e=e=>{let r=e?.legalities?.commander==="legal"?(0,t.jsx)("span",{className:"badge",children:"EDH"}):null,s=e._tag?(0,t.jsx)("span",{className:"badge",children:e._tag}):null;return(0,t.jsxs)("li",{onMouseMove:t=>f?.(e,t),onMouseLeave:p,children:[(0,t.jsxs)("span",{className:"small",children:[a(e)," ",n(e)&&`(${n(e)})`," - ",(0,t.jsx)("span",{className:"muted",children:e.type_line||""})," ",r," ",s]}),(0,t.jsx)("span",{style:{flex:"1 1 auto"}}),(0,t.jsxs)("div",{className:"inline-controls",children:[(0,t.jsx)("button",{className:"btn",onClick:()=>u(e),children:"Add to Deck"}),(0,t.jsx)("button",{className:"btn",onClick:()=>h(e.id),children:"Remove"})]})]},e.id)},d[10]=u,d[11]=f,d[12]=p,d[13]=h,d[14]=e):e=d[14],o=m.map(e),d[4]=m,d[5]=u,d[6]=f,d[7]=p,d[8]=h,d[9]=o}else o=d[9];return d[15]!==o?(i=(0,t.jsx)("ul",{children:o}),d[15]=o,d[16]=i):i=d[16],d[17]!==s||d[18]!==i?(c=(0,t.jsxs)("section",{style:r,children:[s,l,i]}),d[17]=s,d[18]=i,d[19]=c):c=d[19],c}function Q({onImport:e}){let[a,n]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[o,i]=(0,r.useState)(""),c=(0,r.useRef)(null),d=async()=>{if(!a.trim())return void i("Please paste a decklist first.");l(!0),i("Importing deck...");try{let t=await I(a,e=>{i(e)});if(0===t.deck.length&&!t.commander){i("Import failed: No cards found. Please check the decklist format."),setTimeout(()=>i(""),5e3);return}i(`Imported ${t.deck.length} cards${t.maybeboard.length>0?` and ${t.maybeboard.length} maybeboard cards`:""}${t.commander?` with commander ${t.commander.name}`:""}.`),e(t.commander,t.deck,t.maybeboard),n(""),setTimeout(()=>i(""),5e3)}catch(e){console.error("Import error:",e),i("Error importing deck. Please check the format."),setTimeout(()=>i(""),5e3)}finally{l(!1)}};return(0,t.jsxs)("section",{style:{marginTop:"1rem"},children:[(0,t.jsx)("h3",{children:"Import Deck"}),(0,t.jsx)("div",{className:"small muted",style:{marginBottom:"0.5rem"},children:"Paste a decklist from Moxfield, Archidekt, or any text format. Supports commanders, main deck, and maybeboard sections."}),(0,t.jsx)("textarea",{ref:c,value:a,onChange:e=>n(e.target.value),placeholder:"Paste decklist here (Moxfield, Archidekt, or text format)...",rows:10,style:{width:"100%",fontFamily:"monospace",fontSize:"0.9rem"},disabled:s,"aria-label":"Deck list input","aria-describedby":"deck-format-help"}),(0,t.jsxs)("div",{className:"inline-controls",style:{marginTop:"0.5rem"},children:[(0,t.jsx)("button",{className:"btn primary",onClick:d,disabled:s||!a.trim(),children:s?"Importing...":"Import Deck"}),(0,t.jsx)("button",{className:"btn",onClick:()=>{c.current?.focus(),navigator.clipboard.readText().then(e=>{n(e)}).catch(()=>{})},disabled:s,children:"Paste from Clipboard"}),o&&(0,t.jsx)("span",{className:"small muted",style:{color:"var(--primary)"},children:o})]}),(0,t.jsxs)("div",{className:"small muted",style:{marginTop:"0.5rem"},children:["Format examples:",(0,t.jsx)("br",{}),'â€¢ Moxfield: "Commander\\n1 Name\\n\\n1 Card Name..."',(0,t.jsx)("br",{}),'â€¢ Archidekt: "// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name..."',(0,t.jsx)("br",{}),'â€¢ Standard: "Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card..."']})]})}function Z(e){let r,a,n,s,l,o,i,c,d,m,u,h,f,p,g,y,x,b,v,j,k,_,w,C,S,N,R,$,T,L=(0,D.c)(56),{analysis:E}=e;L[0]===Symbol.for("react.memo_cache_sentinel")?(r={marginTop:"1rem",padding:"1rem",background:"var(--chip)",borderRadius:"8px"},a=(0,t.jsx)("h3",{children:"Power Level Assessment"}),n={marginBottom:"1rem"},s={display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},L[0]=r,L[1]=a,L[2]=n,L[3]=s):(r=L[0],a=L[1],n=L[2],s=L[3]);let M=function(e){switch(e){case"cEDH":return"#d32f2f";case"Optimized":return"#f57c00";case"Upgraded Precon":return"#1976d2";case"Casual":return"#388e3c";default:return"#666"}}(E.level);L[4]!==M?(l={fontSize:"1.5rem",fontWeight:"bold",color:M},L[4]=M,L[5]=l):l=L[5],L[6]!==E.level||L[7]!==l?(o=(0,t.jsx)("span",{style:l,children:E.level}),L[6]=E.level,L[7]=l,L[8]=o):o=L[8],L[9]!==E.score?(i=(0,t.jsxs)("span",{className:"small muted",children:["Score: ",E.score,"/200"]}),L[9]=E.score,L[10]=i):i=L[10],L[11]!==o||L[12]!==i?(c=(0,t.jsxs)("div",{style:s,children:[o,i]}),L[11]=o,L[12]=i,L[13]=c):c=L[13];let I=function(e){switch(e){case"cEDH":return"Competitive EDH - High-powered combos and tutors";case"Optimized":return"Optimized - Strong synergies and efficient cards";case"Upgraded Precon":return"Upgraded Precon - Improved from a precon deck";case"Casual":return"Casual - Fun-focused, lower power level";default:return""}}(E.level);return L[14]!==I?(d=(0,t.jsx)("div",{className:"small muted",children:I}),L[14]=I,L[15]=d):d=L[15],L[16]!==d||L[17]!==c?(m=(0,t.jsxs)("div",{style:n,children:[c,d]}),L[16]=d,L[17]=c,L[18]=m):m=L[18],L[19]===Symbol.for("react.memo_cache_sentinel")?(u={marginBottom:"1rem"},L[19]=u):u=L[19],L[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("h4",{className:"small",style:{marginBottom:"0.5rem"},children:"Factors"}),f={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.5rem"},L[20]=h,L[21]=f):(h=L[20],f=L[21]),L[22]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("strong",{children:"Ramp:"}),L[22]=p):p=L[22],L[23]!==E.factors.ramp?(g=(0,t.jsxs)("div",{className:"small",children:[p," ",E.factors.ramp]}),L[23]=E.factors.ramp,L[24]=g):g=L[24],L[25]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)("strong",{children:"Draw:"}),L[25]=y):y=L[25],L[26]!==E.factors.draw?(x=(0,t.jsxs)("div",{className:"small",children:[y," ",E.factors.draw]}),L[26]=E.factors.draw,L[27]=x):x=L[27],L[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsx)("strong",{children:"Tutors:"}),L[28]=b):b=L[28],L[29]!==E.factors.tutors?(v=(0,t.jsxs)("div",{className:"small",children:[b," ",E.factors.tutors]}),L[29]=E.factors.tutors,L[30]=v):v=L[30],L[31]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsx)("strong",{children:"Interaction:"}),L[31]=j):j=L[31],L[32]!==E.factors.interaction?(k=(0,t.jsxs)("div",{className:"small",children:[j," ",E.factors.interaction]}),L[32]=E.factors.interaction,L[33]=k):k=L[33],L[34]===Symbol.for("react.memo_cache_sentinel")?(_=(0,t.jsx)("strong",{children:"Combos:"}),L[34]=_):_=L[34],L[35]!==E.factors.combos?(w=(0,t.jsxs)("div",{className:"small",children:[_," ",E.factors.combos]}),L[35]=E.factors.combos,L[36]=w):w=L[36],L[37]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsx)("strong",{children:"Avg CMC:"}),L[37]=C):C=L[37],L[38]!==E.factors.averageCMC?(S=(0,t.jsxs)("div",{className:"small",children:[C," ",E.factors.averageCMC]}),L[38]=E.factors.averageCMC,L[39]=S):S=L[39],L[40]!==g||L[41]!==x||L[42]!==v||L[43]!==k||L[44]!==w||L[45]!==S?(N=(0,t.jsxs)("div",{style:u,children:[h,(0,t.jsxs)("div",{style:f,children:[g,x,v,k,w,S]})]}),L[40]=g,L[41]=x,L[42]=v,L[43]=k,L[44]=w,L[45]=S,L[46]=N):N=L[46],L[47]!==E.combos?(R=E.combos.length>0&&(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("h4",{className:"small",style:{marginBottom:"0.5rem",color:"#d32f2f"},children:"Detected Combos"}),(0,t.jsx)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:E.combos.map(et)})]}),L[47]=E.combos,L[48]=R):R=L[48],L[49]!==E.warnings?($=E.warnings.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"small",style:{marginBottom:"0.5rem",color:"#f57c00"},children:"Warnings"}),(0,t.jsx)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:E.warnings.map(ee)})]}),L[49]=E.warnings,L[50]=$):$=L[50],L[51]!==m||L[52]!==N||L[53]!==R||L[54]!==$?(T=(0,t.jsxs)("section",{style:r,children:[a,m,N,R,$]}),L[51]=m,L[52]=N,L[53]=R,L[54]=$,L[55]=T):T=L[55],T}function ee(e,r){return(0,t.jsx)("span",{className:"badge",style:{background:"#fff3cd",color:"#8a6d3b"},children:e},r)}function et(e,r){return(0,t.jsx)("span",{className:"badge",style:{background:"#ffebee",color:"#c62828"},children:e},r)}function er(e){let s,l,o,i,c,d,m,u,h,f,p,g,y,x,b,v,j,k,_,w,C,S=(0,D.c)(89),{deck:N,onShuffle:R}=e;S[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],S[0]=s):s=S[0];let[$,T]=(0,r.useState)(s);S[1]===Symbol.for("react.memo_cache_sentinel")?(l=[],S[1]=l):l=S[1];let[L,E]=(0,r.useState)(l);S[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],S[2]=o):o=S[2];let[M,I]=(0,r.useState)(o),[A,P]=(0,r.useState)(0),F=(0,r.useRef)(void 0),B=(0,r.useRef)(N);S[3]!==N?(i=()=>{B.current!==N&&(B.current=N,T([]),E([]),I([]),P(0))},c=[N],S[3]=N,S[4]=i,S[5]=c):(i=S[4],c=S[5]),(0,r.useEffect)(i,c),S[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{let e=F.current;return()=>{e&&clearTimeout(e)}},m=[],S[6]=d,S[7]=m):(d=S[6],m=S[7]),(0,r.useEffect)(d,m),S[8]!==N||S[9]!==R?(u=()=>{0===N.length||(E([...N].sort(eh)),T([]),I([]),P(0),R())},S[8]=N,S[9]=R,S[10]=u):u=S[10];let W=u;S[11]!==L[0]||S[12]!==L.length?(h=()=>{if(0===L.length)return void alert("Library is empty!");let e=L[0];E(eu),T(t=>[...t,e]),P(em)},S[11]=L[0],S[12]=L.length,S[13]=h):h=S[13];let z=h;S[14]!==L?(f=e=>{let t=void 0===e?7:e;if(L.length<t)return void alert(`Not enough cards in library! (${L.length} remaining)`);let r=L.slice(0,t);E(e=>e.slice(t)),T(e=>[...e,...r]),P(e=>e+t)},S[14]=L,S[15]=f):f=S[15];let U=f;S[16]!==$?(p=()=>{0!==$.length&&(E(e=>[...e,...$]),T([]),P(0),setTimeout(()=>{E(ec)},0))},S[16]=$,S[17]=p):p=S[17];let G=p;S[18]!==$?(g=e=>{let t=$.find(t=>t.id===e);t&&(T(t=>t.filter(t=>t.id!==e)),I(e=>[...e,t]))},S[18]=$,S[19]=g):g=S[19];let O=g;S[20]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{T([]),E([]),I([]),P(0)},S[20]=y):y=S[20];let H=y;if(S[21]!==N.length||S[22]!==z||S[23]!==U||S[24]!==A||S[25]!==M.length||S[26]!==$||S[27]!==L.length||S[28]!==G||S[29]!==W){let e,r,a,n,s,l,o,i,c,d,m,u,h,f;S[36]!==$?(e=$.length>0?$.reduce(eo,0)/$.length:0,S[36]=$,S[37]=e):e=S[37];let p={totalManaValue:$.reduce(ei,0),averageManaValue:e,lands:$.filter(el).length,ramp:$.filter(es).length,draw:$.filter(en).length,removal:$.filter(ea).length},g=p.lands>=2||p.ramp>=1,y=g&&p.averageManaValue<=3&&p.lands>=3;S[38]===Symbol.for("react.memo_cache_sentinel")?(x={marginTop:"1rem"},b=(0,t.jsx)("h3",{children:"Playtest Mode"}),S[38]=x,S[39]=b):(x=S[38],b=S[39]),S[40]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("div",{className:"small muted",style:{marginBottom:"0.5rem"},children:"Simulate shuffles, opening hands, and draws. Test your deck's consistency."}),S[40]=v):v=S[40],S[41]===Symbol.for("react.memo_cache_sentinel")?(r={marginBottom:"1rem"},S[41]=r):r=S[41];let w=0===N.length;S[42]!==W||S[43]!==w?(a=(0,t.jsx)("button",{className:"btn primary",onClick:W,disabled:w,children:"Shuffle Library"}),S[42]=W,S[43]=w,S[44]=a):a=S[44],S[45]!==U?(n=()=>U(7),S[45]=U,S[46]=n):n=S[46];let C=L.length<7;S[47]!==n||S[48]!==C?(s=(0,t.jsx)("button",{className:"btn",onClick:n,disabled:C,children:"Draw Opening Hand (7)"}),S[47]=n,S[48]=C,S[49]=s):s=S[49],S[50]!==z?(l=()=>z(),S[50]=z,S[51]=l):l=S[51];let R=0===L.length;S[52]!==l||S[53]!==R?(o=(0,t.jsx)("button",{className:"btn",onClick:l,disabled:R,children:"Draw Card"}),S[52]=l,S[53]=R,S[54]=o):o=S[54];let T=0===$.length;S[55]!==G||S[56]!==T?(i=(0,t.jsx)("button",{className:"btn",onClick:G,disabled:T,children:"Mulligan"}),S[55]=G,S[56]=T,S[57]=i):i=S[57],S[58]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("button",{className:"btn",onClick:H,children:"Reset"}),S[58]=c):c=S[58],S[59]!==a||S[60]!==s||S[61]!==o||S[62]!==i?(j=(0,t.jsxs)("div",{className:"inline-controls",style:r,children:[a,s,o,i,c]}),S[59]=a,S[60]=s,S[61]=o,S[62]=i,S[63]=j):j=S[63],S[64]===Symbol.for("react.memo_cache_sentinel")?(d={marginBottom:"1rem"},S[64]=d):d=S[64],S[65]!==L.length?(m=(0,t.jsxs)("span",{children:["Library: ",L.length," cards"]}),S[65]=L.length,S[66]=m):m=S[66],S[67]!==$.length?(u=(0,t.jsxs)("span",{children:["Hand: ",$.length," cards"]}),S[67]=$.length,S[68]=u):u=S[68],S[69]!==M.length?(h=(0,t.jsxs)("span",{children:["Graveyard: ",M.length," cards"]}),S[69]=M.length,S[70]=h):h=S[70],S[71]!==A?(f=(0,t.jsxs)("span",{children:["Drawn: ",A," cards"]}),S[71]=A,S[72]=f):f=S[72],S[73]!==m||S[74]!==u||S[75]!==h||S[76]!==f?(k=(0,t.jsxs)("div",{className:"small",style:d,children:[m," â€¢ ",u," â€¢ ",h," â€¢ ",f]}),S[73]=m,S[74]=u,S[75]=h,S[76]=f,S[77]=k):k=S[77],_=$.length>0&&(0,t.jsxs)("div",{style:{marginBottom:"1rem",padding:"1rem",background:"var(--chip)",borderRadius:"8px"},children:[(0,t.jsx)("h4",{className:"small",style:{marginBottom:"0.5rem"},children:"Hand Analysis"}),(0,t.jsx)("div",{className:"small",style:{marginBottom:"0.5rem"},children:(0,t.jsx)("span",{className:y?"badge":"",style:y?{background:"#d4edda",color:"#155724"}:{},children:y?"âœ“ Good Hand":g?"~ Playable":"âœ— Poor Hand"})}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:[(0,t.jsxs)("div",{className:"small",children:["Lands: ",p.lands]}),(0,t.jsxs)("div",{className:"small",children:["Ramp: ",p.ramp]}),(0,t.jsxs)("div",{className:"small",children:["Draw: ",p.draw]}),(0,t.jsxs)("div",{className:"small",children:["Removal: ",p.removal]}),(0,t.jsxs)("div",{className:"small",children:["Avg MV: ",p.averageManaValue.toFixed(1)]}),(0,t.jsxs)("div",{className:"small",children:["Total MV: ",p.totalManaValue]})]})]}),S[21]=N.length,S[22]=z,S[23]=U,S[24]=A,S[25]=M.length,S[26]=$,S[27]=L.length,S[28]=G,S[29]=W,S[30]=x,S[31]=b,S[32]=v,S[33]=j,S[34]=k,S[35]=_}else x=S[30],b=S[31],v=S[32],j=S[33],k=S[34],_=S[35];return S[78]!==O||S[79]!==$?(w=$.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"small",style:{marginBottom:"0.5rem"},children:["Hand (",$.length," cards)"]}),(0,t.jsx)("ul",{children:$.map(e=>(0,t.jsxs)("li",{children:[(0,t.jsxs)("span",{className:"small",children:[a(e)," ",n(e)&&`(${n(e)})`," - ",(0,t.jsx)("span",{className:"muted",children:e.type_line||""})]}),(0,t.jsx)("button",{className:"btn",onClick:()=>O(e.id),style:{marginLeft:"auto"},children:"Discard"})]},e.id))})]}),S[78]=O,S[79]=$,S[80]=w):w=S[80],S[81]!==x||S[82]!==b||S[83]!==v||S[84]!==j||S[85]!==k||S[86]!==_||S[87]!==w?(C=(0,t.jsxs)("section",{style:x,children:[b,v,j,k,_,w]}),S[81]=x,S[82]=b,S[83]=v,S[84]=j,S[85]=k,S[86]=_,S[87]=w,S[88]=C):C=S[88],C}function ea(e){return"Removal"===e._tag}function en(e){return"Draw"===e._tag}function es(e){return"Ramp"===e._tag}function el(e){return e.type_line?.toLowerCase().includes("land")}function eo(e,t){return e+s(t)}function ei(e,t){return e+s(t)}function ec(e){return[...e].sort(ed)}function ed(){return Math.random()-.5}function em(e){return e+1}function eu(e){return e.slice(1)}function eh(){return Math.random()-.5}var ef=e.i(37902);function ep(e){let r,a,n,l,o,i,c,d,m,u,h,f,p=(0,D.c)(27),{deck:g,commander:y}=e;if(p[0]!==g){let e=new Map;g.forEach(t=>{let r=s(t);e.set(r,(e.get(r)||0)+1)}),r=[];let t=g.length;for(let a=0;a<=10;a++){let n=e.get(a)||0;r.push({cmc:a,count:n,percentage:t>0?n/t*100:0})}let a=0;if(e.forEach((e,t)=>{t>10&&(a+=e)}),a>0){let e,n=a,s=t>0?a/t*100:0;p[2]!==n||p[3]!==s?(e={cmc:11,count:n,percentage:s},p[2]=n,p[3]=s,p[4]=e):e=p[4],r.push(e)}p[0]=g,p[1]=r}else r=p[1];let x=r;p[5]!==x?(a=x.map(ey),p[5]=x,p[6]=a):a=p[6];let b=Math.max(...a,1);e:{let e;if(0===g.length){n=0;break e}let t=g.reduce(eg,0)/g.length;p[7]!==t?(e=t.toFixed(2),p[7]=t,p[8]=e):e=p[8],n=e}let v=n;if(0===g.length){let e;return p[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"mana-curve-chart",children:[(0,t.jsx)("h3",{children:"Mana Curve"}),(0,t.jsx)("p",{className:"small muted",children:"Add cards to see mana curve visualization"})]}),p[9]=e):e=p[9],e}return p[10]===Symbol.for("react.memo_cache_sentinel")?(l={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},o=(0,t.jsx)("h3",{style:{margin:0},children:"Mana Curve"}),p[10]=l,p[11]=o):(l=p[10],o=p[11]),p[12]!==v?(i=(0,t.jsx)("strong",{children:v}),p[12]=v,p[13]=i):i=p[13],p[14]!==y?(c=y&&(0,t.jsxs)(t.Fragment,{children:[" | Commander: ",(0,t.jsx)("strong",{children:s(y)})]}),p[14]=y,p[15]=c):c=p[15],p[16]!==i||p[17]!==c?(d=(0,t.jsxs)("div",{style:l,children:[o,(0,t.jsxs)("div",{className:"small muted",children:["Avg CMC: ",i,c]})]}),p[16]=i,p[17]=c,p[18]=d):d=p[18],p[19]===Symbol.for("react.memo_cache_sentinel")?(m={display:"flex",gap:"4px",alignItems:"flex-end",height:"200px",padding:"0.5rem",borderRadius:"8px",background:"var(--bg-secondary, #f5f5f5)"},p[19]=m):m=p[19],p[20]!==x||p[21]!==b?(u=(0,t.jsx)("div",{className:"curve-bars",style:m,children:x.map(e=>{var r;let{cmc:a,count:n,percentage:s}=e,l=b>0?n/b*100:0,o=11===a?"10+":a.toString();return(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},title:`${n} card${1!==n?"s":""} at CMC ${o} (${s.toFixed(1)}%)`,children:[(0,t.jsx)("div",{style:{width:"100%",height:`${l}%`,minHeight:n>0?"8px":"0",background:0===(r=a)?"#d4d4d4":1===r?"#a3d977":2===r?"#7ec850":3===r?"#4ea832":4===r?"#f4c542":5===r?"#f39c12":6===r?"#e67e22":r>=7?"#c0392b":"#95a5a6",borderRadius:"4px 4px 0 0",transition:"all 0.2s ease",cursor:"pointer",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:n>0?"4px":"0",fontSize:"0.75rem",fontWeight:"bold",color:a>=6?"#fff":"var(--text-color, #333)"},className:"curve-bar",children:n>0&&n}),(0,t.jsx)("div",{className:"small muted",style:{fontSize:"0.7rem"},children:o})]},a)})}),p[20]=x,p[21]=b,p[22]=u):u=p[22],p[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(ef.default,{id:"6c44e57a496aa546",children:".curve-bar.jsx-6c44e57a496aa546:hover{opacity:.8;transform:translateY(-2px)}"}),p[23]=h):h=p[23],p[24]!==d||p[25]!==u?(f=(0,t.jsxs)("div",{className:"mana-curve-chart",children:[d,u,h]}),p[24]=d,p[25]=u,p[26]=f):f=p[26],f}function eg(e,t){return e+s(t)}function ey(e){return e.count}function ex(e){let r,a,n,s,o,i,c,d,m,u,h,f=(0,D.c)(37),{deck:p,commander:g}=e;f[0]!==p?(a={W:0,U:0,B:0,R:0,G:0,C:0},p.forEach(e=>{let t=l(e);a.W=a.W+t.W,a.U=a.U+t.U,a.B=a.B+t.B,a.R=a.R+t.R,a.G=a.G+t.G,a.C=a.C+t.C}),r=Object.values(a).reduce(eb,0),f[0]=p,f[1]=r,f[2]=a):(r=f[1],a=f[2]);let y=r,x=y>0?a.W/y*100:0,b=y>0?a.U/y*100:0,v=y>0?a.B/y*100:0,j=y>0?a.R/y*100:0,k=y>0?a.G/y*100:0,_=y>0?a.C/y*100:0;f[3]!==x||f[4]!==b||f[5]!==v||f[6]!==j||f[7]!==k||f[8]!==_?(n={W:x,U:b,B:v,R:j,G:k,C:_},f[3]=x,f[4]=b,f[5]=v,f[6]=j,f[7]=k,f[8]=_,f[9]=n):n=f[9],f[10]!==n||f[11]!==y||f[12]!==a?(s={totals:a,totalPips:y,percentages:n},f[10]=n,f[11]=y,f[12]=a,f[13]=s):s=f[13];let w=s;f[14]!==g?.color_identity?(o=g?.color_identity||[],f[14]=g?.color_identity,f[15]=o):o=f[15];let C=o;if(0===p.length){let e;return f[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"color-distribution",children:[(0,t.jsx)("h3",{children:"Color Distribution"}),(0,t.jsx)("p",{className:"small muted",children:"Add cards to see color pip distribution"})]}),f[16]=e):e=f[16],e}if(f[17]!==w.percentages||f[18]!==w.totalPips||f[19]!==w.totals||f[20]!==C){let e,r,a,n,s=[{symbol:"W",name:"White",color:"#f0e68c",key:"W"},{symbol:"U",name:"Blue",color:"#4a9eff",key:"U"},{symbol:"B",name:"Black",color:"#8b7355",key:"B"},{symbol:"R",name:"Red",color:"#e25822",key:"R"},{symbol:"G",name:"Green",color:"#4e9a06",key:"G"},{symbol:"C",name:"Colorless",color:"#95a5a6",key:"C"}];i="color-distribution",f[25]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},r=(0,t.jsx)("h3",{style:{margin:0},children:"Color Distribution"}),f[25]=e,f[26]=r):(e=f[25],r=f[26]),f[27]!==w.totalPips?(c=(0,t.jsxs)("div",{style:e,children:[r,(0,t.jsxs)("div",{className:"small muted",children:["Total Pips: ",(0,t.jsx)("strong",{children:w.totalPips})]})]}),f[27]=w.totalPips,f[28]=c):c=f[28],f[29]===Symbol.for("react.memo_cache_sentinel")?(a={display:"flex",height:"30px",borderRadius:"15px",overflow:"hidden",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},f[29]=a):a=f[29],d=(0,t.jsx)("div",{style:a,children:s.map(e=>{let{key:r,color:a}=e,n=w.percentages[r];return 0===n?null:(0,t.jsx)("div",{style:{width:`${n}%`,background:a,transition:"all 0.3s ease",cursor:"pointer"},title:`${r}: ${w.totals[r]} pips (${n.toFixed(1)}%)`,className:"color-segment"},r)})}),f[30]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"column",gap:"0.5rem"},f[30]=n):n=f[30],m=(0,t.jsx)("div",{style:n,children:s.map(e=>{let{symbol:r,name:a,color:n,key:s}=e,l=w.totals[s],o=w.percentages[s],i=C.includes(r);return 0===l?null:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.25rem 0.5rem",borderRadius:"4px",background:i?"var(--bg-secondary, #f5f5f5)":"transparent"},children:[(0,t.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:n,flexShrink:0}}),(0,t.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsxs)("span",{className:"small",style:{minWidth:"80px"},children:[(0,t.jsx)("strong",{children:r})," ",a]}),(0,t.jsx)("div",{style:{flex:1,height:"8px",background:"var(--bg-tertiary, #e0e0e0)",borderRadius:"4px",overflow:"hidden"},children:(0,t.jsx)("div",{style:{width:`${o}%`,height:"100%",background:n,transition:"width 0.3s ease"}})}),(0,t.jsxs)("span",{className:"small muted",style:{minWidth:"80px",textAlign:"right"},children:[l," (",o.toFixed(1),"%)"]})]})]},s)})}),f[17]=w.percentages,f[18]=w.totalPips,f[19]=w.totals,f[20]=C,f[21]=i,f[22]=c,f[23]=d,f[24]=m}else i=f[21],c=f[22],d=f[23],m=f[24];return f[31]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(ef.default,{id:"fc6f768c996a6700",children:".color-segment.jsx-fc6f768c996a6700:hover{filter:brightness(1.1)}"}),f[31]=u):u=f[31],f[32]!==i||f[33]!==c||f[34]!==d||f[35]!==m?(h=(0,t.jsxs)("div",{className:i,children:[c,d,m,u]}),f[32]=i,f[33]=c,f[34]=d,f[35]=m,f[36]=h):h=f[36],h}function eb(e,t){return e+t}function ev(e){let r,a,n,s,i,c,d,m,u,h,f,p,g,y,x,b,v,j,k,_,w,C,S,N,R,$,T,L,E,M,I,A,P,F,B,W,z,U,G,O,H,q,V,K=(0,D.c)(133),{deck:J,commander:X,mdfcAsLand:Y}=e;if(K[0]!==J||K[1]!==Y){let e;K[3]!==Y?(e=e=>o(e,Y),K[3]=Y,K[4]=e):e=K[4],r=J.filter(e),K[0]=J,K[1]=Y,K[2]=r}else r=K[2];let Q=r;if(K[5]!==J||K[6]!==Y){let e,t,r,l,y,x,b,v,j,k;K[19]!==Y?(e=e=>!o(e,Y),K[19]=Y,K[20]=e):e=K[20],m=J.filter(e),K[21]!==J?(t=J.filter(eM),K[21]=J,K[22]=t):t=K[22],s=t.length,K[23]!==J?(r=J.filter(eE),K[23]=J,K[24]=r):r=K[24],d=r.length,K[25]!==J?(l=J.filter(eD),K[25]=J,K[26]=l):l=K[26],p=l.length,K[27]!==J?(y=J.filter(eL),K[27]=J,K[28]=y):y=K[28],a=y.length,K[29]!==J?(x=J.filter(eT),K[29]=J,K[30]=x):x=K[30],c=x.length,K[31]!==J?(b=J.filter(e$),K[31]=J,K[32]=b):b=K[32],u=b.length,K[33]!==J?(v=J.filter(eR),K[33]=J,K[34]=v):v=K[34],h=v.length,K[35]!==J?(j=J.filter(eN),K[35]=J,K[36]=j):j=K[36],i=j.length,K[37]!==J?(k=J.filter(eS),K[37]=J,K[38]=k):k=K[38],f=k.length;let _=m.map(eC);n=_.length>0?(_.reduce(ew,0)/_.length).toFixed(2):"0.00",g=_.length>0?_.sort(e_)[Math.floor(_.length/2)]:0,K[5]=J,K[6]=Y,K[7]=a,K[8]=n,K[9]=s,K[10]=i,K[11]=c,K[12]=d,K[13]=m,K[14]=u,K[15]=h,K[16]=f,K[17]=p,K[18]=g}else a=K[7],n=K[8],s=K[9],i=K[10],c=K[11],d=K[12],m=K[13],u=K[14],h=K[15],f=K[16],p=K[17],g=K[18];let Z=g;K[39]!==J?(y={W:0,U:0,B:0,R:0,G:0,C:0},J.forEach(e=>{let t=l(e);y.W=y.W+t.W,y.U=y.U+t.U,y.B=y.B+t.B,y.R=y.R+t.R,y.G=y.G+t.G,y.C=y.C+t.C}),K[39]=J,K[40]=y):y=K[40];let ee=y.W+y.U+y.B+y.R+y.G;K[41]!==a||K[42]!==n||K[43]!==y||K[44]!==s||K[45]!==J.length||K[46]!==i||K[47]!==c||K[48]!==d||K[49]!==Q.length||K[50]!==Z||K[51]!==m.length||K[52]!==u||K[53]!==h||K[54]!==f||K[55]!==p||K[56]!==ee?(x={total:J.length,lands:Q.length,nonlands:m.length,creatures:s,instants:d,sorceries:p,artifacts:a,enchantments:c,planeswalkers:u,ramp:h,draw:i,removal:f,avgCMC:n,medianCMC:Z,colorPips:y,totalColorPips:ee},K[41]=a,K[42]=n,K[43]=y,K[44]=s,K[45]=J.length,K[46]=i,K[47]=c,K[48]=d,K[49]=Q.length,K[50]=Z,K[51]=m.length,K[52]=u,K[53]=h,K[54]=f,K[55]=p,K[56]=ee,K[57]=x):x=K[57];let et=x;if(K[58]!==et.avgCMC||K[59]!==et.creatures||K[60]!==et.draw||K[61]!==et.lands||K[62]!==et.ramp||K[63]!==et.removal||K[64]!==et.total){let e=[],t=[];et.lands<30&&et.total>=50?e.push("âš ï¸ Low land count - consider 33-40 lands"):et.lands<33&&et.total>=90&&t.push("\uD83D\uDCA1 Most Commander decks run 33-37 lands"),et.ramp<8&&et.total>=50&&e.push("âš ï¸ Low ramp count - consider 8-12 ramp sources"),et.draw<8&&et.total>=50&&e.push("âš ï¸ Low card draw - consider 8-12 draw sources"),et.removal<5&&et.total>=50&&t.push("\uD83D\uDCA1 Consider 5-10 removal spells"),parseFloat(et.avgCMC)>4?e.push("âš ï¸ High average CMC - may be slow to deploy"):2.5>parseFloat(et.avgCMC)&&et.total>=50&&t.push("\uD83D\uDCA1 Low CMC - fast aggressive deck");let r=et.total>0?et.creatures/et.total*100:0;r<20&&et.total>=50?t.push("\uD83D\uDCA1 Low creature count - control/combo deck?"):r>50&&t.push("\uD83D\uDCA1 High creature density - tribal/aggro build"),b={warnings:e,suggestions:t},K[58]=et.avgCMC,K[59]=et.creatures,K[60]=et.draw,K[61]=et.lands,K[62]=et.ramp,K[63]=et.removal,K[64]=et.total,K[65]=b}else b=K[65];let er=b;if(0===J.length){let e;return K[66]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"deck-stats",children:[(0,t.jsx)("h3",{children:"Deck Statistics"}),(0,t.jsx)("p",{className:"small muted",children:"Add cards to see detailed statistics"})]}),K[66]=e):e=K[66],e}K[67]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("h3",{children:"Deck Statistics"}),j={marginBottom:"1rem",padding:"1rem",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"8px"},k={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem"},K[67]=v,K[68]=j,K[69]=k):(v=K[67],j=K[68],k=K[69]);let ea=X?100:60;return K[70]!==et.total||K[71]!==ea?(_=(0,t.jsx)(eI,{label:"Total Cards",value:et.total,target:ea}),K[70]=et.total,K[71]=ea,K[72]=_):_=K[72],K[73]!==et.lands?(w=(0,t.jsx)(eI,{label:"Lands",value:et.lands}),K[73]=et.lands,K[74]=w):w=K[74],K[75]!==et.nonlands?(C=(0,t.jsx)(eI,{label:"Nonlands",value:et.nonlands}),K[75]=et.nonlands,K[76]=C):C=K[76],K[77]!==et.avgCMC?(S=(0,t.jsx)(eI,{label:"Avg CMC",value:et.avgCMC}),K[77]=et.avgCMC,K[78]=S):S=K[78],K[79]!==w||K[80]!==C||K[81]!==S||K[82]!==_?(N=(0,t.jsx)("div",{style:j,children:(0,t.jsxs)("div",{style:k,children:[_,w,C,S]})}),K[79]=w,K[80]=C,K[81]=S,K[82]=_,K[83]=N):N=K[83],K[84]===Symbol.for("react.memo_cache_sentinel")?(R={marginBottom:"1rem"},K[84]=R):R=K[84],K[85]===Symbol.for("react.memo_cache_sentinel")?($=(0,t.jsx)("h4",{className:"small",style:{marginBottom:"0.5rem"},children:"Card Types"}),T={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem"},K[85]=$,K[86]=T):($=K[85],T=K[86]),K[87]!==et.creatures||K[88]!==et.total?(L=(0,t.jsx)(eA,{label:"Creatures",count:et.creatures,total:et.total,color:"#4ea832"}),K[87]=et.creatures,K[88]=et.total,K[89]=L):L=K[89],K[90]!==et.instants||K[91]!==et.total?(E=(0,t.jsx)(eA,{label:"Instants",count:et.instants,total:et.total,color:"#4a9eff"}),K[90]=et.instants,K[91]=et.total,K[92]=E):E=K[92],K[93]!==et.sorceries||K[94]!==et.total?(M=(0,t.jsx)(eA,{label:"Sorceries",count:et.sorceries,total:et.total,color:"#8b7355"}),K[93]=et.sorceries,K[94]=et.total,K[95]=M):M=K[95],K[96]!==et.artifacts||K[97]!==et.total?(I=(0,t.jsx)(eA,{label:"Artifacts",count:et.artifacts,total:et.total,color:"#95a5a6"}),K[96]=et.artifacts,K[97]=et.total,K[98]=I):I=K[98],K[99]!==et.enchantments||K[100]!==et.total?(A=(0,t.jsx)(eA,{label:"Enchantments",count:et.enchantments,total:et.total,color:"#f39c12"}),K[99]=et.enchantments,K[100]=et.total,K[101]=A):A=K[101],K[102]!==et.planeswalkers||K[103]!==et.total?(P=(0,t.jsx)(eA,{label:"Planeswalkers",count:et.planeswalkers,total:et.total,color:"#e25822"}),K[102]=et.planeswalkers,K[103]=et.total,K[104]=P):P=K[104],K[105]!==L||K[106]!==E||K[107]!==M||K[108]!==I||K[109]!==A||K[110]!==P?(F=(0,t.jsxs)("div",{style:R,children:[$,(0,t.jsxs)("div",{style:T,children:[L,E,M,I,A,P]})]}),K[105]=L,K[106]=E,K[107]=M,K[108]=I,K[109]=A,K[110]=P,K[111]=F):F=K[111],K[112]===Symbol.for("react.memo_cache_sentinel")?(B={marginBottom:"1rem"},K[112]=B):B=K[112],K[113]===Symbol.for("react.memo_cache_sentinel")?(W=(0,t.jsx)("h4",{className:"small",style:{marginBottom:"0.5rem"},children:"Tagged Cards"}),z={display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem"},K[113]=W,K[114]=z):(W=K[113],z=K[114]),K[115]!==et.ramp?(U=(0,t.jsx)(eP,{label:"Ramp",count:et.ramp,emoji:"\uD83D\uDE80"}),K[115]=et.ramp,K[116]=U):U=K[116],K[117]!==et.draw?(G=(0,t.jsx)(eP,{label:"Draw",count:et.draw,emoji:"\uD83D\uDCD6"}),K[117]=et.draw,K[118]=G):G=K[118],K[119]!==et.removal?(O=(0,t.jsx)(eP,{label:"Removal",count:et.removal,emoji:"\uD83D\uDCA5"}),K[119]=et.removal,K[120]=O):O=K[120],K[121]!==U||K[122]!==G||K[123]!==O?(H=(0,t.jsxs)("div",{style:B,children:[W,(0,t.jsxs)("div",{style:z,children:[U,G,O]})]}),K[121]=U,K[122]=G,K[123]=O,K[124]=H):H=K[124],K[125]!==er.suggestions||K[126]!==er.warnings?(q=(er.warnings.length>0||er.suggestions.length>0)&&(0,t.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,t.jsx)("h4",{className:"small",style:{marginBottom:"0.5rem"},children:"Insights"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[er.warnings.map(ek),er.suggestions.map(ej)]})]}),K[125]=er.suggestions,K[126]=er.warnings,K[127]=q):q=K[127],K[128]!==N||K[129]!==F||K[130]!==H||K[131]!==q?(V=(0,t.jsxs)("div",{className:"deck-stats",children:[v,N,F,H,q]}),K[128]=N,K[129]=F,K[130]=H,K[131]=q,K[132]=V):V=K[132],V}function ej(e,r){return(0,t.jsx)("div",{className:"small muted",style:{padding:"0.5rem",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"4px"},children:e},`s-${r}`)}function ek(e,r){return(0,t.jsx)("div",{className:"small",style:{padding:"0.5rem",background:"#fff3cd",borderRadius:"4px"},children:e},`w-${r}`)}function e_(e,t){return e-t}function ew(e,t){return e+t}function eC(e){return s(e)}function eS(e){return"Removal"===e._tag}function eN(e){return"Draw"===e._tag}function eR(e){return"Ramp"===e._tag}function e$(e){return e.type_line?.toLowerCase().includes("planeswalker")}function eT(e){return e.type_line?.toLowerCase().includes("enchantment")}function eL(e){return e.type_line?.toLowerCase().includes("artifact")}function eD(e){return e.type_line?.toLowerCase().includes("sorcery")}function eE(e){return e.type_line?.toLowerCase().includes("instant")}function eM(e){return e.type_line?.toLowerCase().includes("creature")}function eI(e){let r,a,n,s,l,o,i=(0,D.c)(14),{label:c,value:d,target:m}=e,u="number"==typeof d?d:parseFloat(d),h=void 0!==m,f=h&&u>=m;i[0]===Symbol.for("react.memo_cache_sentinel")?(r={textAlign:"center"},i[0]=r):r=i[0],i[1]!==c?(a=(0,t.jsx)("div",{className:"small muted",children:c}),i[1]=c,i[2]=a):a=i[2];let p=h&&!f?"#e67e22":"inherit";return i[3]!==p?(n={fontSize:"1.5rem",fontWeight:"bold",color:p},i[3]=p,i[4]=n):n=i[4],i[5]!==m?(s=m&&(0,t.jsxs)("span",{className:"small muted",children:["/",m]}),i[5]=m,i[6]=s):s=i[6],i[7]!==n||i[8]!==s||i[9]!==d?(l=(0,t.jsxs)("div",{style:n,children:[d,s]}),i[7]=n,i[8]=s,i[9]=d,i[10]=l):l=i[10],i[11]!==a||i[12]!==l?(o=(0,t.jsxs)("div",{style:r,children:[a,l]}),i[11]=a,i[12]=l,i[13]=o):o=i[13],o}function eA(e){let r,a,n,s,l,o,i,c,d,m=(0,D.c)(18),{label:u,count:h,total:f,color:p}=e,g=f>0?h/f*100:0;m[0]===Symbol.for("react.memo_cache_sentinel")?(r={display:"flex",alignItems:"center",gap:"0.5rem"},m[0]=r):r=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(a={minWidth:"90px"},m[1]=a):a=m[1],m[2]!==u?(n=(0,t.jsx)("span",{className:"small",style:a,children:u}),m[2]=u,m[3]=n):n=m[3],m[4]===Symbol.for("react.memo_cache_sentinel")?(s={flex:1,height:"8px",background:"var(--bg-tertiary, #e0e0e0)",borderRadius:"4px",overflow:"hidden"},m[4]=s):s=m[4];let y=`${g}%`;return m[5]!==p||m[6]!==y?(l=(0,t.jsx)("div",{style:s,children:(0,t.jsx)("div",{style:{width:y,height:"100%",background:p,transition:"width 0.3s ease"}})}),m[5]=p,m[6]=y,m[7]=l):l=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(o={minWidth:"60px",textAlign:"right"},m[8]=o):o=m[8],m[9]!==g?(i=g.toFixed(0),m[9]=g,m[10]=i):i=m[10],m[11]!==h||m[12]!==i?(c=(0,t.jsxs)("span",{className:"small muted",style:o,children:[h," (",i,"%)"]}),m[11]=h,m[12]=i,m[13]=c):c=m[13],m[14]!==n||m[15]!==l||m[16]!==c?(d=(0,t.jsxs)("div",{style:r,children:[n,l,c]}),m[14]=n,m[15]=l,m[16]=c,m[17]=d):d=m[17],d}function eP(e){let r,a,n,s,l,o,i,c=(0,D.c)(13),{label:d,count:m,emoji:u}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(r={padding:"0.5rem",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"4px",textAlign:"center"},a={fontSize:"1.5rem"},c[0]=r,c[1]=a):(r=c[0],a=c[1]),c[2]!==u?(n=(0,t.jsx)("div",{style:a,children:u}),c[2]=u,c[3]=n):n=c[3],c[4]!==d?(s=(0,t.jsx)("div",{className:"small muted",children:d}),c[4]=d,c[5]=s):s=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(l={fontSize:"1.25rem",fontWeight:"bold"},c[6]=l):l=c[6],c[7]!==m?(o=(0,t.jsx)("div",{style:l,children:m}),c[7]=m,c[8]=o):o=c[8],c[9]!==n||c[10]!==s||c[11]!==o?(i=(0,t.jsxs)("div",{style:r,children:[n,s,o]}),c[9]=n,c[10]=s,c[11]=o,c[12]=i):i=c[12],i}function eF(e){let a,n,s,l,o,i,c,d,m,u,h,f,p,g,y=(0,D.c)(20),{isOpen:x,onClose:b}=e;if(y[0]!==x||y[1]!==b?(a=()=>{let e=e=>{"Escape"===e.key&&x&&b()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},n=[x,b],y[0]=x,y[1]=b,y[2]=a,y[3]=n):(a=y[2],n=y[3]),(0,r.useEffect)(a,n),!x)return null;y[4]===Symbol.for("react.memo_cache_sentinel")?(s=[{key:"/",description:"Focus commander search"},{key:"F",description:"Focus card search"},{key:"R",description:"Generate random deck"},{key:"Q",description:"Pick random commander"},{key:"E",description:"Export deck"},{key:"S",description:"Save deck"},{key:"D",description:"Toggle dark mode"},{key:"X",description:"Clear deck"},{key:"?",description:"Show this help"},{key:"Esc",description:"Close modals"}],y[4]=s):s=y[4];let v=s;return y[5]===Symbol.for("react.memo_cache_sentinel")?(l={position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},y[5]=l):l=y[5],y[6]===Symbol.for("react.memo_cache_sentinel")?(o={background:"var(--bg-primary, #fff)",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)"},y[6]=o):o=y[6],y[7]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},y[7]=i):i=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("h2",{id:"shortcuts-title",style:{margin:0,color:"var(--fg, #000)"},children:"âŒ¨ï¸ Keyboard Shortcuts"}),y[8]=c):c=y[8],y[9]===Symbol.for("react.memo_cache_sentinel")?(d={background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem",lineHeight:1,color:"var(--fg, #000)"},y[9]=d):d=y[9],y[10]!==b?(m=(0,t.jsxs)("div",{style:i,children:[c,(0,t.jsx)("button",{onClick:b,style:d,"aria-label":"Close",children:"Ã—"})]}),y[10]=b,y[11]=m):m=y[11],y[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:v.map(eB)}),y[12]=u):u=y[12],y[13]===Symbol.for("react.memo_cache_sentinel")?(h={marginTop:"1.5rem",textAlign:"center"},y[13]=h):h=y[13],y[14]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsxs)("div",{className:"small muted",style:h,children:["Press ",(0,t.jsx)("kbd",{style:{padding:"0.125rem 0.5rem",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"4px",color:"var(--fg, #000)"},children:"?"})," anytime to show shortcuts"]}),y[14]=f):f=y[14],y[15]!==m?(p=(0,t.jsxs)("div",{style:o,onClick:eW,children:[m,u,f]}),y[15]=m,y[16]=p):p=y[16],y[17]!==b||y[18]!==p?(g=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:l,onClick:b,role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-title",children:p})}),y[17]=b,y[18]=p,y[19]=g):g=y[19],g}function eB(e){let{key:r,description:a}=e;return(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"6px"},children:[(0,t.jsx)("span",{style:{color:"var(--fg, #000)"},children:a}),(0,t.jsx)("kbd",{style:{padding:"0.25rem 0.75rem",background:"var(--bg-primary, #fff)",border:"1px solid var(--border-color, #ddd)",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.9rem",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",color:"var(--fg, #000)"},children:r})]},r)}function eW(e){return e.stopPropagation()}function ez(e){let n,s,l,o,i,c,d,m,u=(0,D.c)(22),{commander:h,deck:f}=e,[p,g]=(0,r.useState)(!1),[y,x]=(0,r.useState)("");u[0]!==h||u[1]!==f?(n=()=>{let e="# MTG Commander Deck\n\n";return h&&(e+=`## Commander
1 ${a(h)}

`),e+=`## Deck (${f.length} cards)
`,f.forEach(t=>{let r=t._tag?` [${t._tag}]`:"";e+=`1 ${a(t)}${r}
`}),e},u[0]=h,u[1]=f,u[2]=n):n=u[2];let b=n;u[3]!==h?.id||u[4]!==f?(s=()=>{let e=btoa(JSON.stringify({c:h?.id||null,d:f.map(eG)})),t=`${window.location.origin}?deck=${e}`;return t.length<2e3?t:null},u[3]=h?.id,u[4]=f,u[5]=s):s=u[5];let v=s;u[6]!==b?(l=async()=>{let e=b();try{await navigator.clipboard.writeText(e),x("âœ“ Copied to clipboard!"),setTimeout(()=>x(""),2e3)}catch{x("âœ— Failed to copy"),setTimeout(()=>x(""),2e3)}},u[6]=b,u[7]=l):l=u[7];let j=l;u[8]!==v?(o=async()=>{let e=v();if(!e){x("âœ— Deck too large for URL"),setTimeout(()=>x(""),2e3);return}try{await navigator.clipboard.writeText(e),x("âœ“ Link copied!"),setTimeout(()=>x(""),2e3)}catch{x("âœ— Failed to copy link"),setTimeout(()=>x(""),2e3)}},u[8]=v,u[9]=o):o=u[9];let k=o;u[10]!==h||u[11]!==v?(i=()=>{let e=h?`Check out my ${a(h)} Commander deck! ðŸŽ´`:"Check out my Commander deck! \uD83C\uDFB4",t=v(),r=`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}${t?`&url=${encodeURIComponent(t)}`:""}`;window.open(r,"_blank","noopener,noreferrer")},u[10]=h,u[11]=v,u[12]=i):i=u[12];let _=i;return 0===f.length?null:(u[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("button",{className:"btn",onClick:()=>g(!0),title:"Share deck",children:"ðŸ”— Share"}),u[13]=c):c=u[13],u[14]!==y||u[15]!==j||u[16]!==k||u[17]!==_||u[18]!==p?(d=p&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},onClick:()=>g(!1),children:(0,t.jsxs)("div",{style:{background:"var(--bg-primary, #fff)",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"100%",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)"},onClick:eU,children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,t.jsx)("h2",{style:{margin:0},children:"ðŸ”— Share Deck"}),(0,t.jsx)("button",{onClick:()=>g(!1),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem",lineHeight:1},"aria-label":"Close",children:"Ã—"})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"small",style:{marginBottom:"0.5rem"},children:"Copy as Text"}),(0,t.jsx)("button",{className:"btn primary",onClick:j,style:{width:"100%"},children:"ðŸ“‹ Copy Decklist"}),(0,t.jsx)("p",{className:"small muted",style:{marginTop:"0.25rem"},children:"Copies the decklist as formatted text"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"small",style:{marginBottom:"0.5rem"},children:"Share Link"}),(0,t.jsx)("button",{className:"btn primary",onClick:k,style:{width:"100%"},children:"ðŸ”— Copy Shareable Link"}),(0,t.jsx)("p",{className:"small muted",style:{marginTop:"0.25rem"},children:"Creates a link others can use to load your deck"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"small",style:{marginBottom:"0.5rem"},children:"Social Media"}),(0,t.jsx)("button",{className:"btn",onClick:_,style:{width:"100%"},children:"ðŸ¦ Share on Twitter"})]}),y&&(0,t.jsx)("div",{style:{padding:"0.75rem",background:y.includes("âœ“")?"#d4edda":"#f8d7da",color:y.includes("âœ“")?"#155724":"#721c24",borderRadius:"6px",textAlign:"center",fontWeight:"bold"},children:y}),(0,t.jsxs)("div",{className:"small muted",style:{padding:"1rem",background:"var(--bg-secondary, #f5f5f5)",borderRadius:"6px"},children:[(0,t.jsx)("strong",{children:"Note:"})," Shareable links encode your entire deck in the URL. Very large decks may not work with this method."]})]})]})}),u[14]=y,u[15]=j,u[16]=k,u[17]=_,u[18]=p,u[19]=d):d=u[19],u[20]!==d?(m=(0,t.jsxs)(t.Fragment,{children:[c,d]}),u[20]=d,u[21]=m):m=u[21],m)}function eU(e){return e.stopPropagation()}function eG(e){return e.id}let eO=[{cards:["Thassa's Oracle","Demonic Consultation"],name:"Thoracle Consultation"},{cards:["Thassa's Oracle","Tainted Pact"],name:"Thoracle Pact"},{cards:["Laboratory Maniac","Demonic Consultation"],name:"Lab Man Consultation"},{cards:["Isochron Scepter","Dramatic Reversal"],name:"Dramatic Scepter"},{cards:["Kiki-Jiki, Mirror Breaker","Zealous Conscripts"],name:"Kiki Conscripts"},{cards:["Worldgorger Dragon","Animate Dead"],name:"Worldgorger Combo"},{cards:["Food Chain","Eternal Scourge"],name:"Food Chain Combo"},{cards:["Protean Hulk"],name:"Hulk Combo"},{cards:["Ad Nauseam"],name:"Ad Nauseam"},{cards:["Doomsday"],name:"Doomsday"}],eH={"/":"search-commander",f:"search-cards",r:"random-deck",q:"random-commander",e:"export",s:"save-deck",d:"toggle-dark-mode",x:"reset-deck","?":"show-help"},eq=e=>new Promise(t=>setTimeout(t,e));function eV(){let[e,a]=(0,r.useState)(!1),[n,l]=(0,r.useState)(null),[d,m]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!0),[x,b]=(0,r.useState)(32),[v,j]=(0,r.useState)(60),[_,C]=(0,r.useState)(!0),[S,R]=(0,r.useState)(!0),[$,T]=(0,r.useState)(null),[D,E]=(0,r.useState)({x:0,y:0}),[I,P]=(0,r.useState)(!1),[F,B]=(0,r.useState)(""),[W,G]=(0,r.useState)([]),[q,K]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),ea=(0,r.useRef)(void 0),en=(0,r.useRef)(!1);(0,r.useEffect)(()=>{a(!0);try{let e="1"===localStorage.getItem(O);if(h(e),"undefined"!=typeof document)try{let t=document.documentElement,r=document.body;t&&r&&(t.classList&&r.classList?e?(t.classList.add("dark"),r.classList.add("dark")):(t.classList.remove("dark"),r.classList.remove("dark")):e?(t.className+=" dark",r.className+=" dark"):(t.className=t.className.replace(/ dark/g,""),r.className=r.className.replace(/ dark/g,"")))}catch(e){console.warn("Error loading dark mode:",e)}}catch(e){console.warn("Error loading dark mode from storage:",e)}{let e=localStorage.getItem("edh_builder_state");if(e)try{let t=JSON.parse(e);t.commanderId&&p(t.commanderId).then(e=>{e&&l(e)}),Array.isArray(t.deckIds)&&t.deckIds.length&&(async()=>{let e=[];for(let r=0;r<t.deckIds.length;r+=20){let a=t.deckIds.slice(r,r+20),n=await Promise.all(a.map(e=>p(e)));e.push(...n.filter(Boolean)),await eq(80)}m(e)})()}catch{}}},[]),(0,r.useEffect)(()=>(e&&(n||d.length>0)&&(ea.current&&clearTimeout(ea.current),ea.current=setTimeout(()=>{try{if(n?.id&&!z(n.id))throw Error("Invalid commander ID");let e=d.map(e=>e.id).filter(e=>z(e)),t={commanderId:n?.id||null,deckIds:e};if(!/^[a-zA-Z0-9_]+$/.test(U))throw Error("Invalid storage key");localStorage.setItem(U,JSON.stringify(t))}catch(e){console.error("Error saving state:",e)}},1e3)),()=>{ea.current&&clearTimeout(ea.current)}),[n,d,e]);let es=(0,r.useCallback)(()=>{let e=!u;h(e);try{localStorage.setItem(O,e?"1":"0")}catch(e){console.warn("localStorage not available:",e)}if("undefined"!=typeof document)try{let t=document.documentElement,r=document.body;t&&r&&(t.classList&&r.classList?e?(t.classList.add("dark"),r.classList.add("dark")):(t.classList.remove("dark"),r.classList.remove("dark")):e?(t.className+=" dark",r.className+=" dark"):(t.className=t.className.replace(/ dark/g,""),r.className=r.className.replace(/ dark/g,"")))}catch(e){console.warn("Error toggling dark mode:",e)}},[u]),el=(0,r.useCallback)(e=>{l(e),m([])},[]),eo=(0,r.useCallback)(e=>{m(t=>t.length>=99||c(e,t)?t:[...t,e])},[]),ei=(0,r.useCallback)(e=>{m(t=>t.filter(t=>t.id!==e))},[]),ec=(0,r.useCallback)((e,t)=>{m(r=>r.map(r=>r.id===e?{...r,_tag:t||void 0}:r))},[]),ed=(0,r.useCallback)(()=>{let e=prompt("Enter deck name:");if(!e?.trim())return;let t=JSON.parse(localStorage.getItem("edh_saved_decks")||"{}");(!t[e]||confirm("Overwrite existing deck?"))&&(t[e]={commanderId:n?.id||null,deckIds:d.map(e=>e.id)},localStorage.setItem("edh_saved_decks",JSON.stringify(t)),alert("Deck saved."))},[n,d]),em=(0,r.useCallback)(async e=>{if(!en.current){en.current=!0,B("Loading deck...");try{if(e.commanderId){let t=await p(e.commanderId);t&&l(t)}if(m([]),Array.isArray(e.deckIds)&&e.deckIds.length){let t=[];for(let r=0;r<e.deckIds.length&&en.current;r+=20){let a=e.deckIds.slice(r,r+20),n=await Promise.all(a.map(e=>p(e)));t.push(...n.filter(Boolean)),B(`Loading deck... ${Math.min(100,Math.round((r+20)/e.deckIds.length*100))}%`),await eq(80)}en.current&&(m(t),B("Deck loaded successfully!"),setTimeout(()=>B(""),2e3))}}catch(e){console.error("Error loading deck:",e),B("Error loading deck. Please try again."),setTimeout(()=>B(""),3e3)}finally{en.current=!1}}},[]),eu=(0,r.useCallback)(()=>{l(null),m([]),localStorage.removeItem("edh_builder_state")},[]),eh=(0,r.useCallback)(async()=>{if(n&&!I){P(!0),B("Starting deck generation..."),m([]);try{let e=Math.max(32,Math.min(60,x)),t=Math.max(0,Math.min(100,v)),r=n.color_identity||[];B("Generating non-land cards...");let a=[],s=99-e,l=0;for(let e=0;e<6*s&&l<s;e++){let e=await k(r,"-t:land");e&&!c(e,a)&&(a.push(e),++l%10==0&&(B(`Generated ${l}/${s} non-land cards...`),m([...a]))),await eq(40)}m(a),B(`Generated ${a.length} non-land cards. Adding lands...`);let d=Math.round(t/100*e),u=function(e){if(!e||0===e.length)return["Wastes"];let t={W:"Plains",U:"Island",B:"Swamp",R:"Mountain",G:"Forest"},r=[];for(let a of e.split(""))t[a]&&!r.includes(t[a])&&r.push(t[a]);return r.length?r:["Wastes"]}(r.join("")),h=[...a],p=0;for(B(`Adding basic lands (${d} needed)...`);p<d;){let e=u[Math.floor(Math.random()*u.length)],t=await g(e);t&&(h.push(t),++p%5==0&&(B(`Added ${p}/${d} basic lands...`),m([...h]))),await eq(20)}m(h);let y=e-d;B(`Adding non-basic lands (${y} needed)...`);let b=[...h],j=0;for(;y>0&&j<2*e;){let e=await k(r,"t:land -type:basic");if(e){if(_&&!function(e,t){let r=new Set(t);return i(e).some(e=>r.has(e))}(e,r)||S&&function(e){let t=i(e);if(!t.length)return!0;let r=t.some(e=>"WUBRG".includes(e)),a=t.every(e=>"C"===e);return!r||a}(e))continue;c(e,b)||(b.push(e),y--,++j%5==0&&(B(`Added ${j} non-basic lands (${y} remaining)...`),m([...b])))}await eq(35)}m(b);let w=b.length,C=b.filter(e=>o(e,f)).length;B(`Deck generated! ${w} cards (${C} lands)`),setTimeout(()=>{B("")},3e3)}catch(e){console.error("Error generating deck:",e),B("Error generating deck. Please try again."),setTimeout(()=>{B("")},5e3)}finally{P(!1)}}},[n,x,v,_,S,I,f]),ef=(0,r.useCallback)((e,t)=>{T(t),E({x:e.clientX,y:e.clientY})},[]),eg=(0,r.useCallback)(()=>{T(null)},[]),ey=n&&d.length>0?function(e,t,r){let a,n,l=t.filter(e=>!o(e,r)),i=t.filter(e=>o(e,r)),c=t.filter(e=>"Ramp"===e._tag).length,d=t.filter(e=>"Draw"===e._tag).length,m=t.filter(e=>"Removal"===e._tag).length,u=["tutor","search your library","entomb","gamble"],h=t.filter(e=>{let t=(e.name||"").toLowerCase(),r=(e.type_line||"").toLowerCase();return u.some(e=>t.includes(e)||r.includes(e))||r.includes("tutor")}).length,f=m+t.filter(e=>(e.type_line||"").toLowerCase().includes("instant")&&((e.name||"").toLowerCase().includes("counter")||(e.name||"").toLowerCase().includes("destroy")||(e.name||"").toLowerCase().includes("exile"))).length,p=l.reduce((e,t)=>e+s(t),0),g=l.length>0?p/l.length:0,y={0:0,1:0,2:0,3:0,4:0,5:0,6:0};for(let e of l){let t=Math.min(6,Math.floor(s(e)));y[t]++}let x=Math.abs(y[1]-y[2])+Math.abs(y[2]-y[3])+Math.abs(y[3]-y[4]),b=new Set(t.map(e=>e.name.toLowerCase())),v=[];for(let e of eO)e.cards.filter(e=>b.has(e.toLowerCase())).length===e.cards.length&&v.push(e.name);a=(n=0+2*Math.min(c,15)+2*Math.min(d,15)+3*Math.min(h,10)+1.5*Math.min(f,20)+15*v.length+Math.max(0,20-2*g)+Math.max(0,10-x/10))>=150||v.length>=2?"cEDH":n>=100||v.length>=1?"Optimized":n>=60?"Upgraded Precon":"Casual";let j=[];c<8&&j.push("Low ramp count"),d<8&&j.push("Low card draw"),h>5&&j.push("High tutor density (competitive)"),g>4&&j.push("High average CMC"),i.length<32&&j.push("Low land count");let k=t.filter(e=>M.includes(e.name));return k.length>0&&j.push(`Banned cards: ${k.map(e=>e.name).join(", ")}`),{level:a,score:Math.round(n),factors:{ramp:c,draw:d,tutors:h,interaction:f,combos:v.length,averageCMC:Math.round(10*g)/10,curve:Math.round(10*x)/10},warnings:j,combos:v}}(0,d,f):null,eb=(0,r.useCallback)((e,t,r)=>{t.length>0||null!==e?(l(e),m(t),G(r||[])):console.warn("Import resulted in empty deck and no commander")},[]),ej=(0,r.useCallback)(e=>{d.length>=99?alert("Deck is full (99 cards plus 1 commander)."):(m(t=>[...t,e]),G(t=>t.filter(t=>t.id!==e.id)))},[d]),ek=(0,r.useCallback)(e=>{G(t=>t.filter(t=>t.id!==e))},[]),e_=(0,r.useCallback)(e=>{G(t=>t.some(t=>t.id===e.id)?t:[...t,e])},[]);return(0,r.useEffect)(()=>{var e;let t,r;return e=[{action:"search-commander",handler:()=>{let e=document.querySelector('input[placeholder*="commander"]');e?.focus()},description:"Search commander"},{action:"search-cards",handler:()=>{let e=document.querySelector('input[placeholder*="cards"]');e?.focus()},description:"Search cards"},{action:"random-deck",handler:eh,description:"Random deck"},{action:"toggle-dark-mode",handler:es,description:"Toggle dark mode"},{action:"reset-deck",handler:eu,description:"Reset deck"},{action:"show-help",handler:()=>K(!0),description:"Show keyboard shortcuts"}],t=new Map,e.forEach(e=>t.set(e.action,e.handler)),r=e=>{let r=e.target;if("INPUT"===r.tagName||"TEXTAREA"===r.tagName||r.isContentEditable){if("/"===e.key&&r!==document.activeElement){e.preventDefault();let r=t.get("search-commander");r&&r()}return}let a=eH[e.key.toLowerCase()];if(a){let r=t.get(a);r&&(e.preventDefault(),r())}},window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[eh,es,eu]),(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{children:"MTG Commander Deck Builder"}),(0,t.jsxs)("div",{className:"small muted",style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem",alignItems:"center",marginBottom:"0.5rem"},children:[(0,t.jsx)("button",{className:"btn",onClick:()=>K(!0),title:"Keyboard shortcuts (?)",children:"âŒ¨ï¸"}),(0,t.jsxs)("button",{className:"btn",onClick:()=>et(!ee),title:"Toggle statistics",children:["ðŸ“Š ",ee?"Hide":"Show"," Stats"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"checkbox",checked:u,onChange:es})," Dark mode"]}),(0,t.jsx)("button",{className:"btn",onClick:ed,children:"Save Deck"}),(0,t.jsx)(ez,{commander:n,deck:d})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(w,{onSelect:el,onHover:(e,t)=>ef(t,e),onMouseLeave:eg}),(0,t.jsx)(N,{onSelect:el})]}),"      ",n&&(0,t.jsx)("section",{className:"col",children:(0,t.jsxs)("div",{onMouseMove:e=>ef(e,n),onMouseLeave:eg,children:[(0,t.jsxs)("h3",{children:[n.name," ",n.mana_cost&&(0,t.jsxs)("span",{className:"muted small",children:["(",n.mana_cost,")"]})]}),(0,t.jsxs)("div",{className:"small muted",children:[n.type_line||""," ",n.color_identity?.map(e=>(0,t.jsx)("span",{className:"pill",children:e},e))]})]})}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L,{commander:n,deck:d,onAddCard:eo,onGenerateRandomDeck:eh,mdfcAsLand:f,setMdfcAsLand:y,targetLands:x,setTargetLands:b,basicsPercent:v,setBasicsPercent:j,preferColorLands:_,setPreferColorLands:C,avoidColorlessLands:S,setAvoidColorlessLands:R,onHover:(e,t)=>ef(t,e),onMouseLeave:eg,generatingDeck:I,deckGenStatus:F}),(0,t.jsx)(A,{commander:n,deck:d,onRemove:ei,onTag:ec,onAddToMaybeboard:e_,mdfcAsLand:f,targetLands:x,onHover:(e,t)=>ef(t,e),onMouseLeave:eg}),ee&&d.length>0&&(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginTop:"1rem"},children:[(0,t.jsx)(ep,{deck:d,commander:n}),(0,t.jsx)(ex,{deck:d,commander:n}),(0,t.jsx)(ev,{deck:d,commander:n,mdfcAsLand:f})]}),(0,t.jsx)("div",{className:"inline-controls",style:{marginTop:"0.5rem"},children:(0,t.jsx)("button",{className:"btn danger",onClick:eu,children:"Reset Deck"})}),(0,t.jsx)(H,{onLoad:em}),(0,t.jsx)(Q,{onImport:eb}),ey&&(0,t.jsx)(Z,{analysis:ey}),(0,t.jsx)(Y,{maybeboard:W,onAddToDeck:ej,onRemove:ek,onHover:(e,t)=>ef(t,e),onMouseLeave:eg}),(0,t.jsx)(er,{deck:d,onShuffle:()=>{}})]}),(0,t.jsx)(V,{card:$,x:D.x,y:D.y,onDismiss:eg}),(0,t.jsx)(eF,{isOpen:q,onClose:()=>K(!1)}),(0,t.jsx)(J,{}),(0,t.jsx)(X,{})]})}e.s(["default",()=>eV],52683)}]);