[{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\public\\sw.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CACHE_VERSION' is assigned a value but never used.","line":2,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const CACHE_NAME = 'mtg-deckbuilder-v1';\r\nconst CACHE_VERSION = '1.0.0';\r\nconst urlsToCache = [\r\n  '/',\r\n  '/manifest.json',\r\n  '/icon-192.png',\r\n  '/icon-512.png',\r\n];\r\n\r\n// Install event - cache resources\r\nself.addEventListener('install', (event) => {\r\n  // Skip waiting to activate the new service worker immediately\r\n  self.skipWaiting();\r\n  \r\n  event.waitUntil(\r\n    caches.open(CACHE_NAME).then((cache) => {\r\n      return cache.addAll(urlsToCache);\r\n    })\r\n  );\r\n});\r\n\r\n// Fetch event - network first, fallback to cache\r\nself.addEventListener('fetch', (event) => {\r\n  // Skip non-GET requests\r\n  if (event.request.method !== 'GET') {\r\n    return;\r\n  }\r\n\r\n  event.respondWith(\r\n    fetch(event.request)\r\n      .then((response) => {\r\n        // If network request succeeds, update cache\r\n        const responseToCache = response.clone();\r\n        caches.open(CACHE_NAME).then((cache) => {\r\n          cache.put(event.request, responseToCache);\r\n        });\r\n        return response;\r\n      })\r\n      .catch(() => {\r\n        // If network fails, try cache\r\n        return caches.match(event.request);\r\n      })\r\n  );\r\n});\r\n\r\n// Activate event - clean up old caches and claim clients\r\nself.addEventListener('activate', (event) => {\r\n  event.waitUntil(\r\n    Promise.all([\r\n      // Clean up old caches\r\n      caches.keys().then((cacheNames) => {\r\n        return Promise.all(\r\n          cacheNames.map((cacheName) => {\r\n            if (cacheName !== CACHE_NAME) {\r\n              return caches.delete(cacheName);\r\n            }\r\n          })\r\n        );\r\n      }),\r\n      // Claim all clients immediately\r\n      self.clients.claim()\r\n    ])\r\n  );\r\n});\r\n\r\n// Listen for messages from the client\r\nself.addEventListener('message', (event) => {\r\n  if (event.data && event.data.type === 'SKIP_WAITING') {\r\n    self.skipWaiting();\r\n  }\r\n});\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\scripts\\generate-icons.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":5,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":5,"endColumn":31},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":6,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":6,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'screenshotWide' is assigned a value but never used.","line":30,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'screenshotNarrow' is assigned a value but never used.","line":41,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":25}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Script to generate PWA icons from SVG\r\n// Run with: node scripts/generate-icons.js\r\n// Requires: npm install sharp\r\n\r\nconst sharp = require('sharp');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst sizes = [192, 512];\r\n\r\nasync function generateIcons() {\r\n  const svgPath = path.join(__dirname, '..', 'public', 'icon.svg');\r\n  const publicDir = path.join(__dirname, '..', 'public');\r\n\r\n  if (!fs.existsSync(svgPath)) {\r\n    console.error('icon.svg not found!');\r\n    return;\r\n  }\r\n\r\n  for (const size of sizes) {\r\n    const outputPath = path.join(publicDir, `icon-${size}.png`);\r\n    await sharp(svgPath)\r\n      .resize(size, size)\r\n      .png()\r\n      .toFile(outputPath);\r\n    console.log(`Generated icon-${size}.png`);\r\n  }\r\n\r\n  // Generate screenshots (simple colored rectangles for now)\r\n  const screenshotWide = sharp({\r\n    create: {\r\n      width: 1280,\r\n      height: 720,\r\n      channels: 3,\r\n      background: { r: 255, g: 255, b: 255 }\r\n    }\r\n  })\r\n    .png()\r\n    .toFile(path.join(publicDir, 'screenshot-wide.png'));\r\n  \r\n  const screenshotNarrow = sharp({\r\n    create: {\r\n      width: 540,\r\n      height: 720,\r\n      channels: 3,\r\n      background: { r: 255, g: 255, b: 255 }\r\n    }\r\n  })\r\n    .png()\r\n    .toFile(path.join(publicDir, 'screenshot-narrow.png'));\r\n\r\n  console.log('Generated screenshots');\r\n  console.log('Icons generated successfully!');\r\n}\r\n\r\ngenerateIcons().catch(console.error);\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\scripts\\serve-static.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":5,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":5,"endColumn":29},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":6,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":6,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":29}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Simple static server for testing the exported build\r\n// Run with: node scripts/serve-static.js\r\n// Requires: npm install http-server or use Node.js built-in http\r\n\r\nconst http = require('http');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst PORT = 3000;\r\nconst OUT_DIR = path.join(__dirname, '..', 'out');\r\n\r\nconst MIME_TYPES = {\r\n  '.html': 'text/html',\r\n  '.js': 'text/javascript',\r\n  '.css': 'text/css',\r\n  '.json': 'application/json',\r\n  '.png': 'image/png',\r\n  '.jpg': 'image/jpeg',\r\n  '.svg': 'image/svg+xml',\r\n  '.ico': 'image/x-icon',\r\n};\r\n\r\nfunction getMimeType(filePath) {\r\n  const ext = path.extname(filePath).toLowerCase();\r\n  return MIME_TYPES[ext] || 'application/octet-stream';\r\n}\r\n\r\nconst server = http.createServer((req, res) => {\r\n  let filePath = path.join(OUT_DIR, req.url === '/' ? 'index.html' : req.url);\r\n  \r\n  // Security: prevent directory traversal\r\n  filePath = path.normalize(filePath);\r\n  if (!filePath.startsWith(OUT_DIR)) {\r\n    res.writeHead(403);\r\n    res.end('Forbidden');\r\n    return;\r\n  }\r\n\r\n  fs.stat(filePath, (err, stats) => {\r\n    if (err || !stats.isFile()) {\r\n      // Try index.html for directory requests\r\n      if (req.url.endsWith('/')) {\r\n        filePath = path.join(filePath, 'index.html');\r\n      } else {\r\n        res.writeHead(404);\r\n        res.end('Not Found');\r\n        return;\r\n      }\r\n    }\r\n\r\n    fs.readFile(filePath, (err, data) => {\r\n      if (err) {\r\n        res.writeHead(404);\r\n        res.end('Not Found');\r\n        return;\r\n      }\r\n\r\n      res.writeHead(200, {\r\n        'Content-Type': getMimeType(filePath),\r\n        'Cache-Control': 'no-cache',\r\n      });\r\n      res.end(data);\r\n    });\r\n  });\r\n});\r\n\r\nserver.listen(PORT, () => {\r\n  console.log(`Static server running at http://localhost:${PORT}`);\r\n  console.log(`Serving from: ${OUT_DIR}`);\r\n  console.log('Press Ctrl+C to stop');\r\n});\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isBanned' is defined but never used.","line":19,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isBasicLand' is defined but never used.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'desiredBasicDistribution' is defined but never used.","line":32,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'suggestLandCycles' is defined but never used.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'smallImage' is defined but never used.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport type { Card, SavedDeck } from '@/lib/types';\r\nimport { CommanderSearch } from '@/components/CommanderSearch';\r\nimport { CardSearch } from '@/components/CardSearch';\r\nimport { DeckList } from '@/components/DeckList';\r\nimport { SavedDecks } from '@/components/SavedDecks';\r\nimport { HoverPreview } from '@/components/HoverPreview';\r\nimport { InstallPrompt } from '@/components/InstallPrompt';\r\nimport { UpdateChecker } from '@/components/UpdateChecker';\r\nimport { OwnedCards } from '@/components/OwnedCards';\r\nimport { Maybeboard } from '@/components/Maybeboard';\r\nimport { ImportDeck } from '@/components/ImportDeck';\r\nimport { PowerLevel } from '@/components/PowerLevel';\r\nimport { Playtest } from '@/components/Playtest';\r\nimport { analyzePowerLevel } from '@/lib/powerLevel';\r\nimport { setupHotkeys, type HotkeyHandler } from '@/lib/hotkeys';\r\nimport { isBanned } from '@/lib/import';\r\nimport {\r\n  fetchCardById,\r\n  fetchNamedCard,\r\n  getRandomCard,\r\n} from '@/lib/scryfall';\r\nimport {\r\n  isLand,\r\n  isBasicLand,\r\n  isDuplicateInDeck,\r\n  isColorlessOnly,\r\n  producesCommanderColors,\r\n  getBasicLandNamesForCI,\r\n  desiredBasicDistribution,\r\n  suggestLandCycles,\r\n  smallImage,\r\n} from '@/lib/deck';\r\nimport { saveState, getDarkMode, setDarkMode } from '@/lib/storage';\r\n\r\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\nexport default function Home() {\r\n  const [mounted, setMounted] = useState(false);\r\n  const [commander, setCommander] = useState<Card | null>(null);\r\n  const [deck, setDeck] = useState<Card[]>([]);\r\n  const [darkMode, setDarkModeState] = useState(false);\r\n  const [mdfcAsLand, setMdfcAsLand] = useState(true);\r\n  const [targetLands, setTargetLands] = useState(32);\r\n  const [basicsPercent, setBasicsPercent] = useState(60);\r\n  const [preferColorLands, setPreferColorLands] = useState(true);\r\n  const [avoidColorlessLands, setAvoidColorlessLands] = useState(true);\r\n  const [hoverCard, setHoverCard] = useState<Card | null>(null);\r\n  const [hoverPos, setHoverPos] = useState({ x: 0, y: 0 });\r\n  const [generatingDeck, setGeneratingDeck] = useState(false);\r\n  const [deckGenStatus, setDeckGenStatus] = useState<string>('');\r\n  const [maybeboard, setMaybeboard] = useState<Card[]>([]);\r\n\r\n  // Load state on mount (client-side only) with browser compatibility\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    try {\r\n      const saved = getDarkMode();\r\n      setDarkModeState(saved);\r\n      if (typeof document !== 'undefined') {\r\n        try {\r\n          const htmlEl = document.documentElement;\r\n          const bodyEl = document.body;\r\n          if (htmlEl && bodyEl) {\r\n            if (htmlEl.classList && bodyEl.classList) {\r\n              // Modern browsers with classList support\r\n              if (saved) {\r\n                htmlEl.classList.add('dark');\r\n                bodyEl.classList.add('dark');\r\n              } else {\r\n                htmlEl.classList.remove('dark');\r\n                bodyEl.classList.remove('dark');\r\n              }\r\n            } else {\r\n              // Fallback for older browsers\r\n              if (saved) {\r\n                htmlEl.className += ' dark';\r\n                bodyEl.className += ' dark';\r\n              } else {\r\n                htmlEl.className = htmlEl.className.replace(/ dark/g, '');\r\n                bodyEl.className = bodyEl.className.replace(/ dark/g, '');\r\n              }\r\n            }\r\n          }\r\n        } catch (e) {\r\n          console.warn('Error loading dark mode:', e);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('Error loading dark mode from storage:', e);\r\n    }\r\n\r\n    // Load deck state\r\n    if (typeof window !== 'undefined') {\r\n      const state = localStorage.getItem('edh_builder_state');\r\n      if (state) {\r\n        try {\r\n          const parsed = JSON.parse(state);\r\n          if (parsed.commanderId) {\r\n            fetchCardById(parsed.commanderId).then(c => {\r\n              if (c) setCommander(c);\r\n            });\r\n          }\r\n          if (Array.isArray(parsed.deckIds) && parsed.deckIds.length) {\r\n            const loadDeck = async () => {\r\n              const cards: Card[] = [];\r\n              for (let i = 0; i < parsed.deckIds.length; i += 20) {\r\n                const chunk = parsed.deckIds.slice(i, i + 20);\r\n                const fetched = await Promise.all(chunk.map((id: string) => fetchCardById(id)));\r\n                cards.push(...fetched.filter(Boolean) as Card[]);\r\n                await sleep(80);\r\n              }\r\n              setDeck(cards);\r\n            };\r\n            loadDeck();\r\n          }\r\n        } catch {}\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save state whenever deck/commander changes (only after mount)\r\n  // Don't save empty state - this prevents clearing after import\r\n  useEffect(() => {\r\n    if (mounted && (commander || deck.length > 0)) {\r\n      saveState(commander, deck);\r\n    }\r\n  }, [commander, deck, mounted]);\r\n\r\n  // Dark mode toggle with better browser compatibility\r\n  const toggleDarkMode = useCallback(() => {\r\n    const newMode = !darkMode;\r\n    setDarkModeState(newMode);\r\n    try {\r\n      setDarkMode(newMode);\r\n    } catch (e) {\r\n      // Fallback for browsers that don't support localStorage\r\n      console.warn('localStorage not available:', e);\r\n    }\r\n    if (typeof document !== 'undefined') {\r\n      try {\r\n        const htmlEl = document.documentElement;\r\n        const bodyEl = document.body;\r\n        if (htmlEl && bodyEl) {\r\n          if (htmlEl.classList && bodyEl.classList) {\r\n            // Modern browsers with classList support\r\n            if (newMode) {\r\n              htmlEl.classList.add('dark');\r\n              bodyEl.classList.add('dark');\r\n            } else {\r\n              htmlEl.classList.remove('dark');\r\n              bodyEl.classList.remove('dark');\r\n            }\r\n          } else {\r\n            // Fallback for older browsers\r\n            if (newMode) {\r\n              htmlEl.className += ' dark';\r\n              bodyEl.className += ' dark';\r\n            } else {\r\n              htmlEl.className = htmlEl.className.replace(/ dark/g, '');\r\n              bodyEl.className = bodyEl.className.replace(/ dark/g, '');\r\n            }\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn('Error toggling dark mode:', e);\r\n      }\r\n    }\r\n  }, [darkMode]);\r\n\r\n  const handleSelectCommander = useCallback((c: Card) => {\r\n    setCommander(c);\r\n    setDeck([]);\r\n  }, []);\r\n\r\n  const handleAddCard = useCallback((card: Card) => {\r\n    setDeck(prev => {\r\n      if (prev.length >= 99) return prev;\r\n      if (isDuplicateInDeck(card, prev)) return prev;\r\n      return [...prev, card];\r\n    });\r\n  }, []);\r\n\r\n  const handleRemoveCard = useCallback((cardId: string) => {\r\n    setDeck(prev => prev.filter(c => c.id !== cardId));\r\n  }, []);\r\n\r\n  const handleTagCard = useCallback((cardId: string, tag: 'Ramp' | 'Draw' | 'Removal' | '') => {\r\n    setDeck(prev => prev.map(c => c.id === cardId ? { ...c, _tag: tag || undefined } : c));\r\n  }, []);\r\n\r\n  const handleSaveDeck = useCallback(() => {\r\n    const name = prompt('Enter deck name:');\r\n    if (!name?.trim()) return;\r\n    const decks = JSON.parse(localStorage.getItem('edh_saved_decks') || '{}');\r\n    if (decks[name] && !confirm('Overwrite existing deck?')) return;\r\n    decks[name] = { commanderId: commander?.id || null, deckIds: deck.map(c => c.id) };\r\n    localStorage.setItem('edh_saved_decks', JSON.stringify(decks));\r\n    alert('Deck saved.');\r\n  }, [commander, deck]);\r\n\r\n  const handleLoadDeck = useCallback(async (saved: SavedDeck) => {\r\n    if (saved.commanderId) {\r\n      const c = await fetchCardById(saved.commanderId);\r\n      if (c) setCommander(c);\r\n    }\r\n    setDeck([]);\r\n    if (Array.isArray(saved.deckIds) && saved.deckIds.length) {\r\n      const cards: Card[] = [];\r\n      for (let i = 0; i < saved.deckIds.length; i += 20) {\r\n        const chunk = saved.deckIds.slice(i, i + 20);\r\n        const fetched = await Promise.all(chunk.map((id: string) => fetchCardById(id)));\r\n        cards.push(...fetched.filter(Boolean) as Card[]);\r\n        await sleep(50);\r\n      }\r\n      setDeck(cards);\r\n    }\r\n  }, []);\r\n\r\n  const handleReset = useCallback(() => {\r\n    setCommander(null);\r\n    setDeck([]);\r\n    localStorage.removeItem('edh_builder_state');\r\n  }, []);\r\n\r\n  const handleGenerateRandomDeck = useCallback(async () => {\r\n    if (!commander || generatingDeck) return;\r\n    \r\n    setGeneratingDeck(true);\r\n    setDeckGenStatus('Starting deck generation...');\r\n    setDeck([]);\r\n    \r\n    try {\r\n      const target = Math.max(32, Math.min(60, targetLands));\r\n      const basicsPct = Math.max(0, Math.min(100, basicsPercent));\r\n\r\n      // Add nonlands first\r\n      const ci = commander.color_identity || [];\r\n      setDeckGenStatus(`Generating non-land cards...`);\r\n      const nonlands: Card[] = [];\r\n      const nonlandCount = 99 - target;\r\n      let added = 0;\r\n      for (let guard = 0; guard < nonlandCount * 6 && added < nonlandCount; guard++) {\r\n        const c = await getRandomCard(ci, '-t:land');\r\n        if (c && !isDuplicateInDeck(c, nonlands)) {\r\n          nonlands.push(c);\r\n          added++;\r\n          if (added % 10 === 0) {\r\n            setDeckGenStatus(`Generated ${added}/${nonlandCount} non-land cards...`);\r\n            setDeck([...nonlands]);\r\n          }\r\n        }\r\n        await sleep(40);\r\n      }\r\n      setDeck(nonlands);\r\n      setDeckGenStatus(`Generated ${nonlands.length} non-land cards. Adding lands...`);\r\n\r\n      // Add lands\r\n      const desiredBasics = Math.round(target * (basicsPct / 100));\r\n      const basics = getBasicLandNamesForCI(ci.join(''));\r\n      const newDeck = [...nonlands];\r\n      let basicsAdded = 0;\r\n      setDeckGenStatus(`Adding basic lands (${desiredBasics} needed)...`);\r\n      while (basicsAdded < desiredBasics) {\r\n        const name = basics[Math.floor(Math.random() * basics.length)];\r\n        const card = await fetchNamedCard(name);\r\n        if (card) {\r\n          newDeck.push(card);\r\n          basicsAdded++;\r\n          if (basicsAdded % 5 === 0) {\r\n            setDeckGenStatus(`Added ${basicsAdded}/${desiredBasics} basic lands...`);\r\n            setDeck([...newDeck]);\r\n          }\r\n        }\r\n        await sleep(20);\r\n      }\r\n      setDeck(newDeck);\r\n\r\n      // Add color-producing nonbasic lands\r\n      let need = target - desiredBasics;\r\n      setDeckGenStatus(`Adding non-basic lands (${need} needed)...`);\r\n      const finalDeck = [...newDeck];\r\n      let landsAdded = 0;\r\n      while (need > 0 && landsAdded < target * 2) {\r\n        const c = await getRandomCard(ci, 't:land -type:basic');\r\n        if (c) {\r\n          if (preferColorLands && !producesCommanderColors(c, ci)) continue;\r\n          if (avoidColorlessLands && isColorlessOnly(c)) continue;\r\n          if (!isDuplicateInDeck(c, finalDeck)) {\r\n            finalDeck.push(c);\r\n            need--;\r\n            landsAdded++;\r\n            if (landsAdded % 5 === 0) {\r\n              setDeckGenStatus(`Added ${landsAdded} non-basic lands (${need} remaining)...`);\r\n              setDeck([...finalDeck]);\r\n            }\r\n          }\r\n        }\r\n        await sleep(35);\r\n      }\r\n      setDeck(finalDeck);\r\n      \r\n      const total = finalDeck.length;\r\n      const landCount = finalDeck.filter(c => isLand(c, mdfcAsLand)).length;\r\n      setDeckGenStatus(`Deck generated! ${total} cards (${landCount} lands)`);\r\n      \r\n      // Clear status after 3 seconds\r\n      setTimeout(() => {\r\n        setDeckGenStatus('');\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error('Error generating deck:', error);\r\n      setDeckGenStatus('Error generating deck. Please try again.');\r\n      setTimeout(() => {\r\n        setDeckGenStatus('');\r\n      }, 5000);\r\n    } finally {\r\n      setGeneratingDeck(false);\r\n    }\r\n  }, [commander, targetLands, basicsPercent, preferColorLands, avoidColorlessLands, generatingDeck, mdfcAsLand]);\r\n\r\n  const handleMouseMove = useCallback((e: React.MouseEvent, card: Card | null) => {\r\n    setHoverCard(card);\r\n    setHoverPos({ x: e.clientX, y: e.clientY });\r\n  }, []);\r\n\r\n  const handleMouseLeave = useCallback(() => {\r\n    setHoverCard(null);\r\n  }, []);\r\n\r\n  // Power level analysis\r\n  const powerLevelAnalysis = commander && deck.length > 0 \r\n    ? analyzePowerLevel(commander, deck, mdfcAsLand)\r\n    : null;\r\n\r\n  // Import deck handler\r\n  const handleImportDeck = useCallback((commander: Card | null, deck: Card[], maybeboard: Card[]) => {\r\n    // Only update if we got valid data - don't reset if import partially failed\r\n    if (deck.length > 0 || commander !== null) {\r\n      setCommander(commander);\r\n      setDeck(deck);\r\n      setMaybeboard(maybeboard || []);\r\n    } else {\r\n      console.warn('Import resulted in empty deck and no commander');\r\n    }\r\n  }, []);\r\n\r\n  // Maybeboard handlers\r\n  const handleAddToDeckFromMaybeboard = useCallback((card: Card) => {\r\n    if (deck.length >= 99) {\r\n      alert('Deck is full (99 cards plus 1 commander).');\r\n      return;\r\n    }\r\n    setDeck(prev => [...prev, card]);\r\n    setMaybeboard(prev => prev.filter(c => c.id !== card.id));\r\n  }, [deck]);\r\n\r\n  const handleRemoveFromMaybeboard = useCallback((cardId: string) => {\r\n    setMaybeboard(prev => prev.filter(c => c.id !== cardId));\r\n  }, []);\r\n\r\n  const handleAddToMaybeboard = useCallback((card: Card) => {\r\n    setMaybeboard(prev => {\r\n      if (prev.some(c => c.id === card.id)) return prev;\r\n      return [...prev, card];\r\n    });\r\n  }, []);\r\n\r\n  // Hotkeys setup\r\n  useEffect(() => {\r\n    const handlers: HotkeyHandler[] = [\r\n      { action: 'search-commander', handler: () => {\r\n        const input = document.querySelector('input[placeholder*=\"commander\"]') as HTMLInputElement;\r\n        input?.focus();\r\n      }, description: 'Search commander' },\r\n      { action: 'search-cards', handler: () => {\r\n        const input = document.querySelector('input[placeholder*=\"cards\"]') as HTMLInputElement;\r\n        input?.focus();\r\n      }, description: 'Search cards' },\r\n      { action: 'random-deck', handler: handleGenerateRandomDeck, description: 'Random deck' },\r\n      { action: 'toggle-dark-mode', handler: toggleDarkMode, description: 'Toggle dark mode' },\r\n      { action: 'reset-deck', handler: handleReset, description: 'Reset deck' },\r\n    ];\r\n    \r\n    const cleanup = setupHotkeys(handlers);\r\n    return cleanup;\r\n  }, [handleGenerateRandomDeck, toggleDarkMode, handleReset]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>MTG Commander Deck Builder</h1>\r\n\r\n      <div className=\"small muted\" style={{ display: 'flex', justifyContent: 'flex-end', gap: '0.5rem', alignItems: 'center', marginBottom: '0.5rem' }}>\r\n        <label>\r\n          <input type=\"checkbox\" checked={darkMode} onChange={toggleDarkMode} /> Dark mode\r\n        </label>\r\n        <button className=\"btn\" onClick={handleSaveDeck}>\r\n          Save Deck\r\n        </button>\r\n      </div>\r\n\r\n      <CommanderSearch\r\n        onSelect={handleSelectCommander}\r\n        onHover={(card, e) => handleMouseMove(e, card)}\r\n        onMouseLeave={handleMouseLeave}\r\n      />\r\n\r\n      {commander && (\r\n        <section className=\"col\">\r\n          <div\r\n            onMouseMove={(e) => handleMouseMove(e, commander)}\r\n            onMouseLeave={handleMouseLeave}\r\n          >\r\n            <h3>\r\n              {commander.name} {commander.mana_cost && <span className=\"muted small\">({commander.mana_cost})</span>}\r\n            </h3>\r\n            <div className=\"small muted\">\r\n              {commander.type_line || ''} {commander.color_identity?.map(c => <span key={c} className=\"pill\">{c}</span>)}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {commander && (\r\n        <>\r\n          <CardSearch\r\n            commander={commander}\r\n            deck={deck}\r\n            onAddCard={handleAddCard}\r\n            onGenerateRandomDeck={handleGenerateRandomDeck}\r\n            mdfcAsLand={mdfcAsLand}\r\n            setMdfcAsLand={setMdfcAsLand}\r\n            targetLands={targetLands}\r\n            setTargetLands={setTargetLands}\r\n            basicsPercent={basicsPercent}\r\n            setBasicsPercent={setBasicsPercent}\r\n            preferColorLands={preferColorLands}\r\n            setPreferColorLands={setPreferColorLands}\r\n            avoidColorlessLands={avoidColorlessLands}\r\n            setAvoidColorlessLands={setAvoidColorlessLands}\r\n            onHover={(card, e) => handleMouseMove(e, card)}\r\n            onMouseLeave={handleMouseLeave}\r\n            generatingDeck={generatingDeck}\r\n            deckGenStatus={deckGenStatus}\r\n          />\r\n          <DeckList\r\n            commander={commander}\r\n            deck={deck}\r\n            onRemove={handleRemoveCard}\r\n            onTag={handleTagCard}\r\n            onAddToMaybeboard={handleAddToMaybeboard}\r\n            mdfcAsLand={mdfcAsLand}\r\n            targetLands={targetLands}\r\n            onHover={(card, e) => handleMouseMove(e, card)}\r\n            onMouseLeave={handleMouseLeave}\r\n          />\r\n          <div className=\"inline-controls\" style={{ marginTop: '0.5rem' }}>\r\n            <button className=\"btn danger\" onClick={handleReset}>\r\n              Reset Deck\r\n            </button>\r\n        </div>\r\n          <SavedDecks onLoad={handleLoadDeck} />\r\n          <OwnedCards onOwnedCardsChange={() => {}} />\r\n          <ImportDeck onImport={handleImportDeck} />\r\n          {powerLevelAnalysis && <PowerLevel analysis={powerLevelAnalysis} />}\r\n          <Maybeboard\r\n            maybeboard={maybeboard}\r\n            onAddToDeck={handleAddToDeckFromMaybeboard}\r\n            onRemove={handleRemoveFromMaybeboard}\r\n            onHover={(card, e) => handleMouseMove(e, card)}\r\n            onMouseLeave={handleMouseLeave}\r\n          />\r\n          <Playtest\r\n            commander={commander}\r\n            deck={deck}\r\n            onShuffle={() => {}}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      <HoverPreview card={hoverCard} x={hoverPos.x} y={hoverPos.y} />\r\n      <InstallPrompt />\r\n      <UpdateChecker />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\CardSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\CommanderSearch.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSearch'. Either include it or remove the dependency array.","line":31,"column":6,"nodeType":"ArrayExpression","endLine":31,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [colorFilter, archetypeFilter, handleSearch]","fix":{"range":[1154,1184],"text":"[colorFilter, archetypeFilter, handleSearch]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\DeckList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'desiredBasicDistribution' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'suggestLandCycles' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'targetLands' is defined but never used.","line":31,"column":93,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":104},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setLandSuggestions' is assigned a value but never used.","line":32,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":128,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5224,5227],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5224,5227],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport type { Card } from '@/lib/types';\r\nimport {\r\n  cardName,\r\n  manaCost,\r\n  manaValue,\r\n  pipCounts,\r\n  isLand,\r\n  countByTypeLine,\r\n  desiredBasicDistribution,\r\n  suggestLandCycles,\r\n} from '@/lib/deck';\r\nimport { makeStandardExport, makeMTGO, makeArena, makeMoxfield, makeArchidekt, makeMoxfieldWithTags, copyToClipboard } from '@/lib/export';\r\nimport { isOwned } from '@/lib/storage';\r\nimport { isBanned } from '@/lib/import';\r\n\r\ninterface DeckListProps {\r\n  commander: Card | null;\r\n  deck: Card[];\r\n  onRemove: (cardId: string) => void;\r\n  onTag: (cardId: string, tag: 'Ramp' | 'Draw' | 'Removal' | '') => void;\r\n  onAddToMaybeboard?: (card: Card) => void;\r\n  mdfcAsLand: boolean;\r\n  targetLands: number;\r\n  onHover?: (card: Card | null, e: React.MouseEvent) => void;\r\n  onMouseLeave?: () => void;\r\n}\r\n\r\nexport function DeckList({ commander, deck, onRemove, onTag, onAddToMaybeboard, mdfcAsLand, targetLands, onHover, onMouseLeave }: DeckListProps) {\r\n  const [landSuggestions, setLandSuggestions] = useState('');\r\n\r\n  const nonlands = deck.filter(c => !isLand(c, mdfcAsLand));\r\n  const lands = deck.filter(c => isLand(c, mdfcAsLand));\r\n  const ordered = [...nonlands, ...lands];\r\n  const counts = countByTypeLine(deck);\r\n\r\n  // Analytics\r\n  const mvBuckets = [0, 1, 2, 3, 4, 5, 6];\r\n  const curve: Record<number, number> = { 0: 0, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };\r\n  const pipTotal = { W: 0, U: 0, B: 0, R: 0, G: 0 };\r\n  for (const c of nonlands) {\r\n    const mv = Math.min(6, Math.floor(manaValue(c)));\r\n    curve[mv]++;\r\n    const pc = pipCounts(c);\r\n    for (const k of Object.keys(pipTotal) as Array<keyof typeof pipTotal>) pipTotal[k] += pc[k] || 0;\r\n  }\r\n  const curveStr = `Curve: ${mvBuckets.map(k => `${k}${k === 6 ? '+' : ''}:${curve[k]}`).join(' | ')}`;\r\n  const pipStr = `Pips W:${pipTotal.W} U:${pipTotal.U} B:${pipTotal.B} R:${pipTotal.R} G:${pipTotal.G}`;\r\n\r\n  // Heuristics\r\n  const bigDrops = nonlands.filter(c => manaValue(c) >= 6).length;\r\n  const rampCount = deck.filter(c => c._tag === 'Ramp').length;\r\n  const drawCount = deck.filter(c => c._tag === 'Draw').length;\r\n  const warn: string[] = [];\r\n  if (bigDrops > 12) warn.push('Many 6+ drops');\r\n  if (rampCount < 8) warn.push('Low ramp');\r\n  if (drawCount < 8) warn.push('Low draw');\r\n  if (lands.length < 32) warn.push('Low land count');\r\n\r\n  const exportText = makeStandardExport(commander, deck, mdfcAsLand);\r\n\r\n  const handleCopy = async () => {\r\n    await copyToClipboard(exportText);\r\n    alert('Decklist copied to clipboard.');\r\n  };\r\n\r\n  const handleExportMTGO = async () => {\r\n    await copyToClipboard(makeMTGO(deck, mdfcAsLand));\r\n    alert('MTGO decklist copied to clipboard.');\r\n  };\r\n\r\n  const handleExportArena = async () => {\r\n    await copyToClipboard(makeArena(commander, deck, mdfcAsLand));\r\n    alert('Arena decklist copied to clipboard.');\r\n  };\r\n\r\n  const handleExportMoxfield = async () => {\r\n    await copyToClipboard(makeMoxfield(commander, deck, mdfcAsLand));\r\n    alert('Moxfield decklist copied to clipboard.');\r\n  };\r\n\r\n  const handleExportArchidekt = async () => {\r\n    await copyToClipboard(makeArchidekt(commander, deck, mdfcAsLand));\r\n    alert('Archidekt decklist copied to clipboard.');\r\n  };\r\n\r\n  const handleExportMoxfieldWithTags = async () => {\r\n    await copyToClipboard(makeMoxfieldWithTags(commander, deck, mdfcAsLand));\r\n    alert('Moxfield decklist with tags copied to clipboard.');\r\n  };\r\n\r\n  if (!commander) return null;\r\n\r\n  return (\r\n    <section>\r\n      <h2>\r\n        Deck List (<span>{deck.length}</span> cards)\r\n      </h2>\r\n      <div className=\"line\">\r\n        <div>\r\n          <strong>Commander:</strong> <span>{cardName(commander)}</span>{' '}\r\n          <span dangerouslySetInnerHTML={{ __html: commander.color_identity?.map(c => `<span class=\"pill\">${c}</span>`).join(' ') || '' }} />\r\n        </div>\r\n        <div className=\"small muted\">\r\n          Tip: Press <span className=\"kbd\">Enter</span> to search • Hover a card to preview\r\n        </div>\r\n      </div>\r\n      <ul>\r\n        {ordered.map((c) => {\r\n          const legal = c?.legalities?.commander === 'legal' ? <span className=\"badge\">EDH</span> : null;\r\n          const tag = c._tag ? <span className=\"badge\">{c._tag}</span> : null;\r\n          const owned = isOwned(c.id) ? <span className=\"badge\" style={{ background: '#d4edda', color: '#155724', borderColor: '#c3e6cb' }}>Owned</span> : null;\r\n          const banned = isBanned(c.name) ? <span className=\"badge\" style={{ background: '#f8d7da', color: '#721c24', borderColor: '#f5c6cb' }}>BANNED</span> : null;\r\n          return (\r\n            <li\r\n              key={c.id}\r\n              onMouseMove={(e) => onHover?.(c, e)}\r\n              onMouseLeave={onMouseLeave}\r\n            >\r\n              <span className=\"small\">\r\n                {cardName(c)} {manaCost(c) && `(${manaCost(c)})`} - <span className=\"muted\">{c.type_line || ''}</span>{' '}\r\n                {legal} {tag} {owned} {banned}\r\n              </span>\r\n              <span style={{ flex: '1 1 auto' }}></span>\r\n              <div className=\"inline-controls\">\r\n                <select className=\"btn\" onChange={(e) => onTag(c.id, e.target.value as any)} defaultValue=\"\">\r\n                  <option value=\"\">Tag</option>\r\n                  <option value=\"Ramp\">Ramp</option>\r\n                  <option value=\"Draw\">Draw</option>\r\n                  <option value=\"Removal\">Removal</option>\r\n                </select>\r\n                {onAddToMaybeboard && (\r\n                  <button className=\"btn\" onClick={() => onAddToMaybeboard(c)}>\r\n                    To Maybe\r\n                  </button>\r\n                )}\r\n                <button className=\"btn\" onClick={() => onRemove(c.id)}>\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n      <div className=\"small\" style={{ margin: '0.5rem 0', display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n        <span>{curveStr}</span> <span>{pipStr}</span>\r\n        {warn.length > 0 && (\r\n          <span className=\"badge\" style={{ background: '#fff3cd', color: '#8a6d3b', borderColor: '#ffecb5' }}>\r\n            {warn.join(', ')}\r\n          </span>\r\n        )}\r\n      </div>\r\n      <div className=\"small\">\r\n        <span className=\"badge\">Creatures: {counts.creature}</span>\r\n        <span className=\"badge\">Instants: {counts.instant}</span>\r\n        <span className=\"badge\">Sorceries: {counts.sorcery}</span>\r\n        <span className=\"badge\">Artifacts: {counts.artifact}</span>\r\n        <span className=\"badge\">Enchantments: {counts.enchantment}</span>\r\n        <span className=\"badge\">Planeswalkers: {counts.planeswalker}</span>\r\n        <span className=\"badge\">Lands: {counts.land}</span>\r\n      </div>\r\n      <h3>Export Decklist</h3>\r\n      <textarea rows={15} value={exportText} readOnly style={{ width: '100%', fontFamily: 'monospace', fontSize: '0.9rem' }} />\r\n      <div className=\"inline-controls\">\r\n        <button className=\"btn\" onClick={handleCopy}>\r\n          Copy\r\n        </button>\r\n        <button className=\"btn\" onClick={handleExportMTGO}>\r\n          Copy MTGO\r\n        </button>\r\n        <button className=\"btn\" onClick={handleExportArena}>\r\n          Copy Arena\r\n        </button>\r\n        <button className=\"btn\" onClick={handleExportMoxfield}>\r\n          Copy Moxfield\r\n        </button>\r\n        <button className=\"btn\" onClick={handleExportMoxfieldWithTags}>\r\n          Copy Moxfield (Tags)\r\n        </button>\r\n        <button className=\"btn\" onClick={handleExportArchidekt}>\r\n          Copy Archidekt\r\n        </button>\r\n      </div>\r\n      <div className=\"small muted\">{landSuggestions && `Suggestions: ${landSuggestions}`}</div>\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\HoverPreview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'x' is defined but never used.","line":13,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":39},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\HoverPreview.tsx:19:7\n  17 |   useEffect(() => {\n  18 |     if (card) {\n> 19 |       setImage(normalImage(card));\n     |       ^^^^^^^^ Avoid calling setState() directly within an effect\n  20 |     } else {\n  21 |       setImage(null);\n  22 |     }","line":19,"column":7,"nodeType":null,"endLine":19,"endColumn":15},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\HoverPreview.tsx:29:7\n  27 |       const maxTop = window.innerHeight - 650;\n  28 |       const calculatedTop = Math.max(20, Math.min(y - 300, maxTop));\n> 29 |       setTopPosition(`${calculatedTop}px`);\n     |       ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |     }\n  31 |   }, [y, card]);\n  32 |","line":29,"column":7,"nodeType":null,"endLine":29,"endColumn":21},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":47,"column":7,"nodeType":"JSXOpeningElement","endLine":57,"endColumn":9}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport type { Card } from '@/lib/types';\r\nimport { normalImage } from '@/lib/deck';\r\n\r\ninterface HoverPreviewProps {\r\n  card: Card | null;\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport function HoverPreview({ card, x, y }: HoverPreviewProps) {\r\n  const [image, setImage] = useState<string | null>(null);\r\n  const [topPosition, setTopPosition] = useState('20px');\r\n\r\n  useEffect(() => {\r\n    if (card) {\r\n      setImage(normalImage(card));\r\n    } else {\r\n      setImage(null);\r\n    }\r\n  }, [card]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined' && card) {\r\n      const maxTop = window.innerHeight - 650;\r\n      const calculatedTop = Math.max(20, Math.min(y - 300, maxTop));\r\n      setTopPosition(`${calculatedTop}px`);\r\n    }\r\n  }, [y, card]);\r\n\r\n  if (!image) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"img-popover\"\r\n      style={{\r\n        position: 'fixed',\r\n        pointerEvents: 'none',\r\n        zIndex: 9999,\r\n        left: '20px',\r\n        top: topPosition,\r\n        display: image ? 'block' : 'none',\r\n      }}\r\n    >\r\n      <img \r\n        src={image} \r\n        alt=\"Card preview\" \r\n        style={{ \r\n          width: '450px', \r\n          height: 'auto', \r\n          display: 'block',\r\n          boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)',\r\n          borderRadius: '8px',\r\n        }} \r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\ImportDeck.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":90,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &quot;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &ldquo;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &#34;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &rdquo;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":90,"column":57,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&quot;\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&ldquo;\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&#34;\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&rdquo;\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":92,"column":22,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &quot;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &ldquo;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &#34;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &rdquo;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":92,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&quot;\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&ldquo;\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&#34;\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&rdquo;\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":94,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &quot;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &ldquo;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &#34;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &rdquo;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":94,"column":82,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&quot;\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&ldquo;\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&#34;\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&rdquo;\r\n      "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport type { Card } from '@/lib/types';\r\nimport { importDeckFromText } from '@/lib/import';\r\n\r\ninterface ImportDeckProps {\r\n  onImport: (commander: Card | null, deck: Card[], maybeboard: Card[]) => void;\r\n}\r\n\r\nexport function ImportDeck({ onImport }: ImportDeckProps) {\r\n  const [text, setText] = useState('');\r\n  const [importing, setImporting] = useState(false);\r\n  const [status, setStatus] = useState<string>('');\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  const handleImport = async () => {\r\n    if (!text.trim()) {\r\n      setStatus('Please paste a decklist first.');\r\n      return;\r\n    }\r\n\r\n    setImporting(true);\r\n    setStatus('Importing deck...');\r\n\r\n    try {\r\n      const result = await importDeckFromText(text, (progress) => {\r\n        setStatus(progress);\r\n      });\r\n\r\n      if (result.deck.length === 0 && !result.commander) {\r\n        setStatus('Import failed: No cards found. Please check the decklist format.');\r\n        setTimeout(() => setStatus(''), 5000);\r\n        return;\r\n      }\r\n      \r\n      setStatus(`Imported ${result.deck.length} cards${result.maybeboard.length > 0 ? ` and ${result.maybeboard.length} maybeboard cards` : ''}${result.commander ? ` with commander ${result.commander.name}` : ''}.`);\r\n      onImport(result.commander, result.deck, result.maybeboard);\r\n      setText('');\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } catch (error) {\r\n      console.error('Import error:', error);\r\n      setStatus('Error importing deck. Please check the format.');\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n  };\r\n\r\n  const handlePaste = () => {\r\n    textareaRef.current?.focus();\r\n    navigator.clipboard.readText().then((clipText) => {\r\n      setText(clipText);\r\n    }).catch(() => {\r\n      // Fallback - user can manually paste\r\n    });\r\n  };\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Import Deck</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Paste a decklist from Moxfield, Archidekt, or any text format. Supports commanders, main deck, and maybeboard sections.\r\n      </div>\r\n      <textarea\r\n        ref={textareaRef}\r\n        value={text}\r\n        onChange={(e) => setText(e.target.value)}\r\n        placeholder=\"Paste decklist here (Moxfield, Archidekt, or text format)...\"\r\n        rows={10}\r\n        style={{ width: '100%', fontFamily: 'monospace', fontSize: '0.9rem' }}\r\n        disabled={importing}\r\n      />\r\n      <div className=\"inline-controls\" style={{ marginTop: '0.5rem' }}>\r\n        <button className=\"btn primary\" onClick={handleImport} disabled={importing || !text.trim()}>\r\n          {importing ? 'Importing...' : 'Import Deck'}\r\n        </button>\r\n        <button className=\"btn\" onClick={handlePaste} disabled={importing}>\r\n          Paste from Clipboard\r\n        </button>\r\n        {status && (\r\n          <span className=\"small muted\" style={{ color: 'var(--primary)' }}>\r\n            {status}\r\n          </span>\r\n        )}\r\n      </div>\r\n      <div className=\"small muted\" style={{ marginTop: '0.5rem' }}>\r\n        Format examples:\r\n        <br />\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        <br />\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        <br />\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\InstallPrompt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\Maybeboard.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":27,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &quot;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &ldquo;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &#34;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &rdquo;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":27,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&quot; to move them to your deck.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&ldquo; to move them to your deck.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&#34; to move them to your deck.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&rdquo; to move them to your deck.\r\n      "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport type { Card } from '@/lib/types';\r\nimport { cardName, manaCost } from '@/lib/deck';\r\n\r\ninterface MaybeboardProps {\r\n  maybeboard: Card[];\r\n  onAddToDeck: (card: Card) => void;\r\n  onRemove: (cardId: string) => void;\r\n  onHover?: (card: Card | null, e: React.MouseEvent) => void;\r\n  onMouseLeave?: () => void;\r\n}\r\n\r\nexport function Maybeboard({\r\n  maybeboard,\r\n  onAddToDeck,\r\n  onRemove,\r\n  onHover,\r\n  onMouseLeave,\r\n}: MaybeboardProps) {\r\n  if (maybeboard.length === 0) return null;\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Maybeboard ({maybeboard.length})</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Cards considered but not in the main deck. Click \"Add to Deck\" to move them to your deck.\r\n      </div>\r\n      <ul>\r\n        {maybeboard.map((c) => {\r\n          const legal = c?.legalities?.commander === 'legal' ? <span className=\"badge\">EDH</span> : null;\r\n          const tag = c._tag ? <span className=\"badge\">{c._tag}</span> : null;\r\n          return (\r\n            <li\r\n              key={c.id}\r\n              onMouseMove={(e) => onHover?.(c, e)}\r\n              onMouseLeave={onMouseLeave}\r\n            >\r\n              <span className=\"small\">\r\n                {cardName(c)} {manaCost(c) && `(${manaCost(c)})`} - <span className=\"muted\">{c.type_line || ''}</span>{' '}\r\n                {legal} {tag}\r\n              </span>\r\n              <span style={{ flex: '1 1 auto' }}></span>\r\n              <div className=\"inline-controls\">\r\n                <button className=\"btn\" onClick={() => onAddToDeck(c)}>\r\n                  Add to Deck\r\n                </button>\r\n                <button className=\"btn\" onClick={() => onRemove(c.id)}>\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\OwnedCards.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cardName' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":7,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleToggleOwned' is assigned a value but never used.","line":91,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":26},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &quot;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &ldquo;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &#34;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &rdquo;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&quot; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&ldquo; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&#34; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&rdquo; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &quot;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &ldquo;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &#34;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &rdquo;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":84,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&quot;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&ldquo;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&#34;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&rdquo;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useRef } from 'react';\r\nimport { getOwnedCards, setOwnedCards, addOwnedCard, removeOwnedCard } from '@/lib/storage';\r\nimport { fetchNamedCard } from '@/lib/scryfall';\r\nimport { cardName } from '@/lib/deck';\r\nimport type { Card } from '@/lib/types';\r\n\r\ninterface OwnedCardsProps {\r\n  onOwnedCardsChange?: () => void;\r\n}\r\n\r\nexport function OwnedCards({ onOwnedCardsChange }: OwnedCardsProps) {\r\n  const [ownedSet, setOwnedSet] = useState<Set<string>>(getOwnedCards());\r\n  const [processing, setProcessing] = useState(false);\r\n  const [status, setStatus] = useState<string>('');\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const refreshOwned = useCallback(() => {\r\n    const owned = getOwnedCards();\r\n    setOwnedSet(owned);\r\n    onOwnedCardsChange?.();\r\n  }, [onOwnedCardsChange]);\r\n\r\n  const handleFileUpload = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setProcessing(true);\r\n    setStatus('Processing file...');\r\n\r\n    try {\r\n      const text = await file.text();\r\n      const lines = text.split('\\n').map(l => l.trim()).filter(l => l);\r\n      const cardNames: string[] = [];\r\n      \r\n      // Parse different formats: \"1 Card Name\", \"Card Name\", \"// Comment\", etc.\r\n      for (const line of lines) {\r\n        if (line.startsWith('//') || line.startsWith('#') || !line) continue;\r\n        // Remove quantity prefix like \"1 \" or \"2x \"\r\n        const match = line.match(/^\\d+\\s*(?:x\\s*)?(.+)$/i);\r\n        const cardName = match ? match[1].trim() : line.trim();\r\n        if (cardName) cardNames.push(cardName);\r\n      }\r\n\r\n      setStatus(`Found ${cardNames.length} card names. Looking up cards...`);\r\n      \r\n      // Fetch cards and add to owned set\r\n      const owned = new Set(ownedSet);\r\n      let added = 0;\r\n      let failed = 0;\r\n\r\n      for (let i = 0; i < cardNames.length; i++) {\r\n        const name = cardNames[i];\r\n        try {\r\n          const card = await fetchNamedCard(name);\r\n          if (card) {\r\n            owned.add(card.id);\r\n            added++;\r\n            if (added % 10 === 0) {\r\n              setStatus(`Added ${added}/${cardNames.length} cards...`);\r\n            }\r\n          } else {\r\n            failed++;\r\n          }\r\n        } catch {\r\n          failed++;\r\n        }\r\n        // Rate limit\r\n        if (i % 10 === 0 && i > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, 100));\r\n        }\r\n      }\r\n\r\n      setOwnedCards(owned);\r\n      refreshOwned();\r\n      setStatus(`Successfully added ${added} cards. ${failed} cards not found.`);\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error processing file:', error);\r\n      setStatus('Error processing file. Please check the format.');\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } finally {\r\n      setProcessing(false);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  }, [ownedSet, refreshOwned]);\r\n\r\n  const handleToggleOwned = useCallback((cardId: string) => {\r\n    if (ownedSet.has(cardId)) {\r\n      removeOwnedCard(cardId);\r\n    } else {\r\n      addOwnedCard(cardId);\r\n    }\r\n    refreshOwned();\r\n  }, [ownedSet, refreshOwned]);\r\n\r\n  const handleClearAll = useCallback(() => {\r\n    if (confirm('Clear all owned cards?')) {\r\n      setOwnedCards([]);\r\n      refreshOwned();\r\n    }\r\n  }, [refreshOwned]);\r\n\r\n  const ownedCount = ownedSet.size;\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Owned Cards ({ownedCount})</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Upload a text file (TXT/CSV) with card names to mark cards as owned. Cards will be highlighted in your decklist.\r\n      </div>\r\n      <div className=\"inline-controls\" style={{ marginBottom: '0.5rem' }}>\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\".txt,.csv,.text\"\r\n          onChange={handleFileUpload}\r\n          disabled={processing}\r\n          style={{ display: 'none' }}\r\n        />\r\n        <button\r\n          className=\"btn\"\r\n          onClick={() => fileInputRef.current?.click()}\r\n          disabled={processing}\r\n        >\r\n          {processing ? 'Processing...' : 'Upload Card List'}\r\n        </button>\r\n        {ownedCount > 0 && (\r\n          <button className=\"btn\" onClick={handleClearAll}>\r\n            Clear All\r\n          </button>\r\n        )}\r\n        {status && (\r\n          <span className=\"small muted\" style={{ color: 'var(--primary)' }}>\r\n            {status}\r\n          </span>\r\n        )}\r\n      </div>\r\n      <div className=\"small muted\">\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\Playtest.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'commander' is defined but never used.","line":13,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":37},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":93,"column":68,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3022,3114],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&apos;s consistency.\r\n      "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3022,3114],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&lsquo;s consistency.\r\n      "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3022,3114],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&#39;s consistency.\r\n      "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3022,3114],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&rsquo;s consistency.\r\n      "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback } from 'react';\r\nimport type { Card } from '@/lib/types';\r\nimport { cardName, manaCost, manaValue } from '@/lib/deck';\r\n\r\ninterface PlaytestProps {\r\n  commander: Card | null;\r\n  deck: Card[];\r\n  onShuffle: () => void;\r\n}\r\n\r\nexport function Playtest({ commander, deck, onShuffle }: PlaytestProps) {\r\n  const [hand, setHand] = useState<Card[]>([]);\r\n  const [library, setLibrary] = useState<Card[]>([]);\r\n  const [graveyard, setGraveyard] = useState<Card[]>([]);\r\n  const [drawn, setDrawn] = useState(0);\r\n\r\n  const shuffleLibrary = useCallback(() => {\r\n    if (deck.length === 0) return;\r\n    const shuffled = [...deck].sort(() => Math.random() - 0.5);\r\n    setLibrary(shuffled);\r\n    setHand([]);\r\n    setGraveyard([]);\r\n    setDrawn(0);\r\n    onShuffle();\r\n  }, [deck, onShuffle]);\r\n\r\n  const drawCard = useCallback(() => {\r\n    if (library.length === 0) {\r\n      alert('Library is empty!');\r\n      return;\r\n    }\r\n    const card = library[0];\r\n    setLibrary(prev => prev.slice(1));\r\n    setHand(prev => [...prev, card]);\r\n    setDrawn(prev => prev + 1);\r\n  }, [library]);\r\n\r\n  const drawHand = useCallback((count: number = 7) => {\r\n    if (library.length < count) {\r\n      alert(`Not enough cards in library! (${library.length} remaining)`);\r\n      return;\r\n    }\r\n    const drawnCards = library.slice(0, count);\r\n    setLibrary(prev => prev.slice(count));\r\n    setHand(prev => [...prev, ...drawnCards]);\r\n    setDrawn(prev => prev + count);\r\n  }, [library]);\r\n\r\n  const mulligan = useCallback(() => {\r\n    if (hand.length === 0) return;\r\n    setLibrary(prev => [...prev, ...hand]);\r\n    setHand([]);\r\n    setDrawn(0);\r\n    // Shuffle after adding cards back\r\n    setTimeout(() => {\r\n      setLibrary(prev => [...prev].sort(() => Math.random() - 0.5));\r\n    }, 0);\r\n  }, [hand]);\r\n\r\n  const discard = useCallback((cardId: string) => {\r\n    const card = hand.find(c => c.id === cardId);\r\n    if (!card) return;\r\n    setHand(prev => prev.filter(c => c.id !== cardId));\r\n    setGraveyard(prev => [...prev, card]);\r\n  }, [hand]);\r\n\r\n  const reset = useCallback(() => {\r\n    setHand([]);\r\n    setLibrary([]);\r\n    setGraveyard([]);\r\n    setDrawn(0);\r\n  }, []);\r\n\r\n  // Analyze hand\r\n  const handAnalysis = {\r\n    totalManaValue: hand.reduce((sum, c) => sum + manaValue(c), 0),\r\n    averageManaValue: hand.length > 0 ? hand.reduce((sum, c) => sum + manaValue(c), 0) / hand.length : 0,\r\n    lands: hand.filter(c => c.type_line?.toLowerCase().includes('land')).length,\r\n    ramp: hand.filter(c => c._tag === 'Ramp').length,\r\n    draw: hand.filter(c => c._tag === 'Draw').length,\r\n    removal: hand.filter(c => c._tag === 'Removal').length,\r\n  };\r\n\r\n  const isPlayable = handAnalysis.lands >= 2 || handAnalysis.ramp >= 1;\r\n  const isGoodHand = isPlayable && handAnalysis.averageManaValue <= 3 && handAnalysis.lands >= 3;\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Playtest Mode</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Simulate shuffles, opening hands, and draws. Test your deck's consistency.\r\n      </div>\r\n      \r\n      <div className=\"inline-controls\" style={{ marginBottom: '1rem' }}>\r\n        <button className=\"btn primary\" onClick={shuffleLibrary} disabled={deck.length === 0}>\r\n          Shuffle Library\r\n        </button>\r\n        <button className=\"btn\" onClick={() => drawHand(7)} disabled={library.length < 7}>\r\n          Draw Opening Hand (7)\r\n        </button>\r\n        <button className=\"btn\" onClick={() => drawCard()} disabled={library.length === 0}>\r\n          Draw Card\r\n        </button>\r\n        <button className=\"btn\" onClick={mulligan} disabled={hand.length === 0}>\r\n          Mulligan\r\n        </button>\r\n        <button className=\"btn\" onClick={reset}>\r\n          Reset\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"small\" style={{ marginBottom: '1rem' }}>\r\n        <span>Library: {library.length} cards</span>\r\n        {' • '}\r\n        <span>Hand: {hand.length} cards</span>\r\n        {' • '}\r\n        <span>Graveyard: {graveyard.length} cards</span>\r\n        {' • '}\r\n        <span>Drawn: {drawn} cards</span>\r\n      </div>\r\n\r\n      {hand.length > 0 && (\r\n        <div style={{ marginBottom: '1rem', padding: '1rem', background: 'var(--chip)', borderRadius: '8px' }}>\r\n          <h4 className=\"small\" style={{ marginBottom: '0.5rem' }}>Hand Analysis</h4>\r\n          <div className=\"small\" style={{ marginBottom: '0.5rem' }}>\r\n            <span className={isGoodHand ? 'badge' : ''} style={isGoodHand ? { background: '#d4edda', color: '#155724' } : {}}>\r\n              {isGoodHand ? '✓ Good Hand' : isPlayable ? '~ Playable' : '✗ Poor Hand'}\r\n            </span>\r\n          </div>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))', gap: '0.5rem' }}>\r\n            <div className=\"small\">Lands: {handAnalysis.lands}</div>\r\n            <div className=\"small\">Ramp: {handAnalysis.ramp}</div>\r\n            <div className=\"small\">Draw: {handAnalysis.draw}</div>\r\n            <div className=\"small\">Removal: {handAnalysis.removal}</div>\r\n            <div className=\"small\">Avg MV: {handAnalysis.averageManaValue.toFixed(1)}</div>\r\n            <div className=\"small\">Total MV: {handAnalysis.totalManaValue}</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {hand.length > 0 && (\r\n        <div>\r\n          <h4 className=\"small\" style={{ marginBottom: '0.5rem' }}>Hand ({hand.length} cards)</h4>\r\n          <ul>\r\n            {hand.map((c) => (\r\n              <li key={c.id}>\r\n                <span className=\"small\">\r\n                  {cardName(c)} {manaCost(c) && `(${manaCost(c)})`} - <span className=\"muted\">{c.type_line || ''}</span>\r\n                </span>\r\n                <button className=\"btn\" onClick={() => discard(c.id)} style={{ marginLeft: 'auto' }}>\r\n                  Discard\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\PowerLevel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\SavedDecks.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\SavedDecks.tsx:15:5\n  13 |\n  14 |   useEffect(() => {\n> 15 |     setDecks(getSavedDecks());\n     |     ^^^^^^^^ Avoid calling setState() directly within an effect\n  16 |   }, []);\n  17 |\n  18 |   const handleDelete = (name: string) => {","line":15,"column":5,"nodeType":null,"endLine":15,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getSavedDecks, setSavedDecks } from '@/lib/storage';\r\nimport type { SavedDeck } from '@/lib/types';\r\n\r\ninterface SavedDecksProps {\r\n  onLoad: (deck: SavedDeck) => void;\r\n}\r\n\r\nexport function SavedDecks({ onLoad }: SavedDecksProps) {\r\n  const [decks, setDecks] = useState<Record<string, SavedDeck>>({});\r\n\r\n  useEffect(() => {\r\n    setDecks(getSavedDecks());\r\n  }, []);\r\n\r\n  const handleDelete = (name: string) => {\r\n    if (!confirm(`Delete deck \"${name}\"?`)) return;\r\n    const updated = { ...decks };\r\n    delete updated[name];\r\n    setSavedDecks(updated);\r\n    setDecks(updated);\r\n  };\r\n\r\n  const handleLoad = (name: string) => {\r\n    const deck = decks[name];\r\n    if (deck) {\r\n      onLoad(deck);\r\n      alert(`Loaded deck: ${name}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h3>Saved Decks</h3>\r\n      <ul>\r\n        {Object.keys(decks)\r\n          .sort()\r\n          .map((name) => (\r\n            <li key={name}>\r\n              <span>{name}</span>{' '}\r\n              <button className=\"btn\" onClick={() => handleLoad(name)}>\r\n                Load\r\n              </button>{' '}\r\n              <button className=\"btn danger\" onClick={() => handleDelete(name)}>\r\n                Delete\r\n              </button>\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\ServiceWorker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\components\\UpdateChecker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\deck.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\export.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\hotkeys.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":65,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type HotkeyAction = \r\n  | 'search-commander'\r\n  | 'search-cards'\r\n  | 'random-deck'\r\n  | 'random-commander'\r\n  | 'export'\r\n  | 'save-deck'\r\n  | 'toggle-dark-mode'\r\n  | 'reset-deck';\r\n\r\nexport interface HotkeyHandler {\r\n  action: HotkeyAction;\r\n  handler: () => void;\r\n  description: string;\r\n}\r\n\r\nconst HOTKEY_MAP: Record<string, HotkeyAction> = {\r\n  '/': 'search-commander',\r\n  'f': 'search-cards',\r\n  'r': 'random-deck',\r\n  'q': 'random-commander',\r\n  'e': 'export',\r\n  's': 'save-deck',\r\n  'd': 'toggle-dark-mode',\r\n  'x': 'reset-deck',\r\n};\r\n\r\nexport function setupHotkeys(handlers: HotkeyHandler[]): () => void {\r\n  const handlerMap = new Map<HotkeyAction, () => void>();\r\n  handlers.forEach(h => handlerMap.set(h.action, h.handler));\r\n\r\n  const handleKeyDown = (e: KeyboardEvent) => {\r\n    // Don't trigger if typing in input/textarea\r\n    const target = e.target as HTMLElement;\r\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\r\n      // Allow '/' for search when not already focused\r\n      if (e.key === '/' && target !== document.activeElement) {\r\n        e.preventDefault();\r\n        const handler = handlerMap.get('search-commander');\r\n        if (handler) handler();\r\n      }\r\n      return;\r\n    }\r\n\r\n    const action = HOTKEY_MAP[e.key.toLowerCase()];\r\n    if (action) {\r\n      const handler = handlerMap.get(action);\r\n      if (handler) {\r\n        e.preventDefault();\r\n        handler();\r\n      }\r\n    }\r\n  };\r\n\r\n  window.addEventListener('keydown', handleKeyDown);\r\n  \r\n  return () => {\r\n    window.removeEventListener('keydown', handleKeyDown);\r\n  };\r\n}\r\n\r\nexport function getHotkeyHelp(handlers: HotkeyHandler[]): string {\r\n  const help: string[] = [];\r\n  handlers.forEach(h => {\r\n    const key = Object.entries(HOTKEY_MAP).find(([_, action]) => action === h.action)?.[0];\r\n    if (key) {\r\n      help.push(`${key.toUpperCase()}: ${h.description}`);\r\n    }\r\n  });\r\n  return help.join(' • ');\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\import.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\powerLevel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\scryfall.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\Mtg-Random-Deckbuilder\\src\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\coverage\\block-navigation.js","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported).","line":1,"column":1,"severity":1,"nodeType":null,"fix":{"range":[0,20],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/* eslint-disable */\nvar jumpToCode = (function init() {\n    // Classes of code we would like to highlight in the file view\n    var missingCoverageClasses = ['.cbranch-no', '.cstat-no', '.fstat-no'];\n\n    // Elements to highlight in the file listing view\n    var fileListingElements = ['td.pct.low'];\n\n    // We don't want to select elements that are direct descendants of another match\n    var notSelector = ':not(' + missingCoverageClasses.join('):not(') + ') > '; // becomes `:not(a):not(b) > `\n\n    // Selector that finds elements on the page to which we can jump\n    var selector =\n        fileListingElements.join(', ') +\n        ', ' +\n        notSelector +\n        missingCoverageClasses.join(', ' + notSelector); // becomes `:not(a):not(b) > a, :not(a):not(b) > b`\n\n    // The NodeList of matching elements\n    var missingCoverageElements = document.querySelectorAll(selector);\n\n    var currentIndex;\n\n    function toggleClass(index) {\n        missingCoverageElements\n            .item(currentIndex)\n            .classList.remove('highlighted');\n        missingCoverageElements.item(index).classList.add('highlighted');\n    }\n\n    function makeCurrent(index) {\n        toggleClass(index);\n        currentIndex = index;\n        missingCoverageElements.item(index).scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'center'\n        });\n    }\n\n    function goToPrevious() {\n        var nextIndex = 0;\n        if (typeof currentIndex !== 'number' || currentIndex === 0) {\n            nextIndex = missingCoverageElements.length - 1;\n        } else if (missingCoverageElements.length > 1) {\n            nextIndex = currentIndex - 1;\n        }\n\n        makeCurrent(nextIndex);\n    }\n\n    function goToNext() {\n        var nextIndex = 0;\n\n        if (\n            typeof currentIndex === 'number' &&\n            currentIndex < missingCoverageElements.length - 1\n        ) {\n            nextIndex = currentIndex + 1;\n        }\n\n        makeCurrent(nextIndex);\n    }\n\n    return function jump(event) {\n        if (\n            document.getElementById('fileSearch') === document.activeElement &&\n            document.activeElement != null\n        ) {\n            // if we're currently focused on the search input, we don't want to navigate\n            return;\n        }\n\n        switch (event.which) {\n            case 78: // n\n            case 74: // j\n                goToNext();\n                break;\n            case 66: // b\n            case 75: // k\n            case 80: // p\n                goToPrevious();\n                break;\n        }\n    };\n})();\nwindow.addEventListener('keydown', jumpToCode);\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\coverage\\prettify.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ae' is assigned a value but never used.","line":2,"column":11414,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":11416,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'af' is assigned a value but never used.","line":2,"column":11438,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":11440,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ag' is assigned a value but never used.","line":2,"column":11471,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":11473,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ae' is assigned a value but never used.","line":2,"column":14757,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":14759,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\coverage\\sorter.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":36,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\public\\sw.js","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CACHE_VERSION' is assigned a value but never used.","line":2,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'APP_VERSION' is assigned a value but never used.","line":3,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const CACHE_NAME = 'mtg-deckbuilder-v1.4';\r\nconst CACHE_VERSION = '1.4.0';\r\nconst APP_VERSION = '1.4.0';\r\n\r\n// Get base path and URL handling\r\nconst BASE_URL = self.location.origin;\r\nconst BASE_PATH = self.location.pathname.includes('/Mtg-Random-Deckbuilder') ? '/Mtg-Random-Deckbuilder' : '';\r\n\r\n// Clean up URLs and handle GitHub Pages paths\r\nconst getAssetPath = (path) => {\r\n  const cleanPath = path.startsWith('/') ? path.slice(1) : path;\r\n  return BASE_PATH + '/' + cleanPath.replace(/^\\/+/, '');\r\n};\r\n\r\nconst getFullUrl = (path) => {\r\n  const assetPath = getAssetPath(path);\r\n  return new URL(assetPath, BASE_URL).toString();\r\n};\r\n\r\nconst urlsToCache = [\r\n  getFullUrl('/'),\r\n  getFullUrl('/manifest.json'),\r\n  getFullUrl('/icon-192.png'),\r\n  getFullUrl('/icon-512.png'),\r\n];\r\n\r\n// Helper function to validate and handle response\r\nconst validateAndClone = async (response) => {\r\n  if (!response) return null;\r\n  \r\n  // Accept 200-299 range and 0 (opaque responses)\r\n  const validStatus = (response.status >= 200 && response.status < 300) || response.status === 0;\r\n  if (!validStatus) {\r\n    console.warn('Invalid response status:', response.status, 'for URL:', response.url);\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    // For opaque responses, return as is\r\n    if (response.status === 0) return response;\r\n    // For normal responses, try to clone\r\n    return response.clone();\r\n  } catch (e) {\r\n    console.warn('Failed to clone response:', e);\r\n    return response;\r\n  }\r\n};\r\n\r\n// Install event - cache resources\r\nself.addEventListener('install', (event) => {\r\n  self.skipWaiting();\r\n  \r\n  event.waitUntil(\r\n    caches.open(CACHE_NAME).then((cache) => {\r\n      return Promise.all(\r\n        urlsToCache.map(url => \r\n          fetch(url)\r\n            .then(response => {\r\n              if (!response.ok) throw new Error(`Failed to fetch ${url}`);\r\n              return cache.put(url, response);\r\n            })\r\n            .catch(error => console.warn('Cache error:', error))\r\n        )\r\n      );\r\n    })\r\n  );\r\n});\r\n\r\n// Fetch event - network first, fallback to cache\r\nself.addEventListener('fetch', (event) => {\r\n  // Skip non-GET requests\r\n  if (event.request.method !== 'GET') return;\r\n\r\n  // Skip analytics and API calls\r\n  if (event.request.url.includes('analytics') || \r\n      event.request.url.includes('api.scryfall.com')) {\r\n    return;\r\n  }\r\n\r\n  // Special handling for fonts - pass through\r\n  if (event.request.url.includes('fonts.googleapis.com') || \r\n      event.request.url.includes('fonts.gstatic.com')) {\r\n    event.respondWith(fetch(event.request));\r\n    return;\r\n  }\r\n\r\n  event.respondWith(\r\n    (async () => {\r\n      try {\r\n        // Try network first\r\n        const fetchResponse = await fetch(event.request);\r\n        const validResponse = await validateAndClone(fetchResponse);\r\n        \r\n        if (validResponse) {\r\n          // Cache successful responses only\r\n          if (fetchResponse.ok) {\r\n            const cache = await caches.open(CACHE_NAME);\r\n            try {\r\n              await cache.put(event.request, fetchResponse.clone());\r\n            } catch (err) {\r\n              console.warn('Cache write failed:', err);\r\n            }\r\n          }\r\n          return validResponse;\r\n        }\r\n      } catch (error) {\r\n        console.warn('Network fetch failed:', error);\r\n      }\r\n\r\n      // Try cache on network failure\r\n      try {\r\n        const cachedResponse = await caches.match(event.request);\r\n        if (cachedResponse) return cachedResponse;\r\n      } catch (error) {\r\n        console.warn('Cache fetch failed:', error);\r\n      }\r\n\r\n      // Last resort - return empty 404 response\r\n      return new Response('Not found', { \r\n        status: 404,\r\n        statusText: 'Not Found',\r\n        headers: new Headers({\r\n          'Content-Type': 'text/plain',\r\n        })\r\n      });\r\n    })()\r\n  );\r\n});\r\n\r\n// Activate event - clean up old caches\r\nself.addEventListener('activate', (event) => {\r\n  event.waitUntil(\r\n    Promise.all([\r\n      caches.keys()\r\n        .then(cacheNames => Promise.all(\r\n          cacheNames\r\n            .filter(cacheName => cacheName !== CACHE_NAME)\r\n            .map(cacheName => caches.delete(cacheName))\r\n        )),\r\n      self.clients.claim()\r\n    ])\r\n  );\r\n});\r\n\r\n// Handle client messages\r\nself.addEventListener('message', (event) => {\r\n  if (event.data?.type === 'SKIP_WAITING') {\r\n    self.skipWaiting();\r\n  }\r\n});","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\scripts\\__tests__\\manifest.test.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":29},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":22,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'templatePath' is assigned a value but never used.","line":8,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":19}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const fs = require('fs');\r\nconst path = require('path');\r\nconst { execSync } = require('child_process');\r\n\r\nconst repoRoot = path.resolve(__dirname, '..', '..');\r\nconst publicDir = path.join(repoRoot, 'public');\r\nconst manifestPath = path.join(publicDir, 'manifest.json');\r\nconst templatePath = path.join(publicDir, 'manifest.template.json');\r\n\r\ndescribe('manifest management', () => {\r\n  // Clean up after each test\r\n  afterEach(() => {\r\n    if (fs.existsSync(manifestPath)) {\r\n      fs.unlinkSync(manifestPath);\r\n    }\r\n  });\r\n\r\n  it('should generate valid manifest from template', () => {\r\n    // Run manifest generation\r\n    execSync('npm run generate-manifest', { stdio: 'pipe' });\r\n\r\n    // Verify manifest was created\r\n    expect(fs.existsSync(manifestPath)).toBe(true);\r\n\r\n    // Read and parse the manifest\r\n    const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));\r\n\r\n    // Verify required fields\r\n    expect(manifest).toHaveProperty('name');\r\n    expect(manifest).toHaveProperty('short_name');\r\n    expect(manifest).toHaveProperty('icons');\r\n    expect(Array.isArray(manifest.icons)).toBe(true);\r\n  });\r\n\r\n  it('should validate manifest successfully', () => {\r\n    // Run manifest generation first\r\n    execSync('npm run generate-manifest', { stdio: 'pipe' });\r\n\r\n    // Run validation\r\n    const output = execSync('npm run validate-manifest', { stdio: 'pipe' }).toString();\r\n    expect(output).toContain('Manifest validation passed');\r\n  });\r\n});","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\scripts\\generate-icons.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":5,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":5,"endColumn":31},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":6,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":6,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'screenshotWide' is assigned a value but never used.","line":30,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'screenshotNarrow' is assigned a value but never used.","line":41,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":25}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Script to generate PWA icons from SVG\r\n// Run with: node scripts/generate-icons.js\r\n// Requires: npm install sharp\r\n\r\nconst sharp = require('sharp');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst sizes = [192, 512];\r\n\r\nasync function generateIcons() {\r\n  const svgPath = path.join(__dirname, '..', 'public', 'icon.svg');\r\n  const publicDir = path.join(__dirname, '..', 'public');\r\n\r\n  if (!fs.existsSync(svgPath)) {\r\n    console.error('icon.svg not found!');\r\n    return;\r\n  }\r\n\r\n  for (const size of sizes) {\r\n    const outputPath = path.join(publicDir, `icon-${size}.png`);\r\n    await sharp(svgPath)\r\n      .resize(size, size)\r\n      .png()\r\n      .toFile(outputPath);\r\n    console.log(`Generated icon-${size}.png`);\r\n  }\r\n\r\n  // Generate screenshots (simple colored rectangles for now)\r\n  const screenshotWide = sharp({\r\n    create: {\r\n      width: 1280,\r\n      height: 720,\r\n      channels: 3,\r\n      background: { r: 255, g: 255, b: 255 }\r\n    }\r\n  })\r\n    .png()\r\n    .toFile(path.join(publicDir, 'screenshot-wide.png'));\r\n  \r\n  const screenshotNarrow = sharp({\r\n    create: {\r\n      width: 540,\r\n      height: 720,\r\n      channels: 3,\r\n      background: { r: 255, g: 255, b: 255 }\r\n    }\r\n  })\r\n    .png()\r\n    .toFile(path.join(publicDir, 'screenshot-narrow.png'));\r\n\r\n  console.log('Generated screenshots');\r\n  console.log('Icons generated successfully!');\r\n}\r\n\r\ngenerateIcons().catch(console.error);\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\scripts\\generate-manifest.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":15,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":13}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst repoRoot = path.resolve(__dirname, '..');\r\nconst publicDir = path.join(repoRoot, 'public');\r\nconst templatePath = path.join(publicDir, 'manifest.template.json');\r\nconst outPath = path.join(publicDir, 'manifest.json');\r\nconst nextConfigPath = path.join(repoRoot, 'next.config.ts');\r\n\r\nfunction getBasePathFromNextConfig() {\r\n  try {\r\n    const content = fs.readFileSync(nextConfigPath, 'utf8');\r\n    const m = content.match(/basePath\\s*:\\s*['\"]([^'\"]+)['\"]/);\r\n    if (m) return m[1];\r\n  } catch (e) {\r\n    // ignore\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction main() {\r\n  let template;\r\n  if (fs.existsSync(templatePath)) {\r\n    template = JSON.parse(fs.readFileSync(templatePath, 'utf8'));\r\n  } else if (fs.existsSync(outPath)) {\r\n    template = JSON.parse(fs.readFileSync(outPath, 'utf8'));\r\n  } else {\r\n    console.error('No manifest.template.json or manifest.json found in public/.');\r\n    process.exit(1);\r\n  }\r\n\r\n  const envBasePath = process.env.NEXT_PUBLIC_BASE_PATH || process.env.BASE_PATH || '';\r\n  const basePathFromNext = getBasePathFromNextConfig();\r\n  const basePath = envBasePath || basePathFromNext || '';\r\n\r\n  // Normalize basePath (no trailing slash)\r\n  const normalizedBase = basePath.replace(/\\/$/, '');\r\n\r\n  // Ensure start_url is relative\r\n  template.start_url = './';\r\n\r\n  // Handle icon and screenshot paths based on environment\r\n  const isProd = process.env.NODE_ENV === 'production';\r\n  \r\n  function processAssetPath(src) {\r\n    if (!src) return '';\r\n    const filename = src.split('/').pop();\r\n    // In production, prefix with basePath\r\n    if (isProd && normalizedBase) {\r\n      return `${normalizedBase}/${filename}`;\r\n    }\r\n    // In development, use relative path\r\n    return filename;\r\n  }\r\n\r\n  if (Array.isArray(template.icons)) {\r\n    template.icons = template.icons.map((ico) => {\r\n      const src = (ico.src || '').toString();\r\n      return Object.assign({}, ico, { src: processAssetPath(src) });\r\n    });\r\n  }\r\n\r\n  if (Array.isArray(template.screenshots)) {\r\n    template.screenshots = template.screenshots.map((ss) => {\r\n      const src = (ss.src || '').toString();\r\n      return Object.assign({}, ss, { src: processAssetPath(src) });\r\n    });\r\n  }\r\n\r\n  // Write manifest.json\r\n  fs.writeFileSync(outPath, JSON.stringify(template, null, 2));\r\n  console.log('Generated manifest.json from template (basePath=', normalizedBase, ')');\r\n}\r\n\r\nmain();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\scripts\\serve-static.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":5,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":5,"endColumn":29},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":6,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":6,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":29}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Simple static server for testing the exported build\r\n// Run with: node scripts/serve-static.js\r\n// Requires: npm install http-server or use Node.js built-in http\r\n\r\nconst http = require('http');\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst PORT = 3000;\r\nconst OUT_DIR = path.join(__dirname, '..', 'out');\r\n\r\nconst MIME_TYPES = {\r\n  '.html': 'text/html',\r\n  '.js': 'text/javascript',\r\n  '.css': 'text/css',\r\n  '.json': 'application/json',\r\n  '.png': 'image/png',\r\n  '.jpg': 'image/jpeg',\r\n  '.svg': 'image/svg+xml',\r\n  '.ico': 'image/x-icon',\r\n};\r\n\r\nfunction getMimeType(filePath) {\r\n  const ext = path.extname(filePath).toLowerCase();\r\n  return MIME_TYPES[ext] || 'application/octet-stream';\r\n}\r\n\r\nconst server = http.createServer((req, res) => {\r\n  let filePath = path.join(OUT_DIR, req.url === '/' ? 'index.html' : req.url);\r\n  \r\n  // Security: prevent directory traversal\r\n  filePath = path.normalize(filePath);\r\n  if (!filePath.startsWith(OUT_DIR)) {\r\n    res.writeHead(403);\r\n    res.end('Forbidden');\r\n    return;\r\n  }\r\n\r\n  fs.stat(filePath, (err, stats) => {\r\n    if (err || !stats.isFile()) {\r\n      // Try index.html for directory requests\r\n      if (req.url.endsWith('/')) {\r\n        filePath = path.join(filePath, 'index.html');\r\n      } else {\r\n        res.writeHead(404);\r\n        res.end('Not Found');\r\n        return;\r\n      }\r\n    }\r\n\r\n    fs.readFile(filePath, (err, data) => {\r\n      if (err) {\r\n        res.writeHead(404);\r\n        res.end('Not Found');\r\n        return;\r\n      }\r\n\r\n      res.writeHead(200, {\r\n        'Content-Type': getMimeType(filePath),\r\n        'Cache-Control': 'no-cache',\r\n      });\r\n      res.end(data);\r\n    });\r\n  });\r\n});\r\n\r\nserver.listen(PORT, () => {\r\n  console.log(`Static server running at http://localhost:${PORT}`);\r\n  console.log(`Serving from: ${OUT_DIR}`);\r\n  console.log('Press Ctrl+C to stop');\r\n});\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\scripts\\validate-manifest.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validateRequiredFields' is defined but never used.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'validateAssets' is defined but never used.","line":26,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":24}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst repoRoot = path.resolve(__dirname, '..');\r\nconst publicDir = path.join(repoRoot, 'public');\r\nconst manifestPath = path.join(publicDir, 'manifest.json');\r\n\r\nfunction existsInPublic(src) {\r\n  if (!src) return false;\r\n  // skip external URLs\r\n  if (/^https?:\\/\\//i.test(src)) return true;\r\n  // strip leading slashes\r\n  const relative = src.replace(/^\\/+/, '');\r\n  const full = path.join(publicDir, relative);\r\n  return fs.existsSync(full);\r\n}\r\n\r\nfunction validateRequiredFields(manifest) {\r\n  const required = ['name', 'short_name', 'description', 'start_url', 'display', 'theme_color', 'background_color'];\r\n  const missing = required.filter(field => !manifest[field]);\r\n  if (missing.length > 0) {\r\n    throw new Error(`Missing required fields in manifest: ${missing.join(', ')}`);\r\n  }\r\n}\r\n\r\nfunction validateAssets(manifest) {\r\n  const assetErrors = [];\r\n\r\n  // Check icons\r\n  if (!Array.isArray(manifest.icons) || manifest.icons.length === 0) {\r\n    assetErrors.push('Manifest must include at least one icon');\r\n  } else {\r\n    manifest.icons.forEach((icon, index) => {\r\n      if (!icon.src || !icon.sizes || !icon.type) {\r\n        assetErrors.push(`Icon at index ${index} missing required fields (src, sizes, type)`);\r\n      } else if (!existsInPublic(icon.src)) {\r\n        assetErrors.push(`Icon file not found: ${icon.src}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (assetErrors.length > 0) {\r\n    throw new Error(assetErrors.join('\\n'));\r\n  }\r\n}\r\n\r\nfunction main() {\r\n  if (!fs.existsSync(manifestPath)) {\r\n    console.error('\\x1b[31mError: manifest.json not found in public/\\x1b[0m');\r\n    console.error('Run `npm run generate-manifest` to create a new manifest.');\r\n    process.exit(2);\r\n  }\r\n\r\n  const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));\r\n  const missing = [];\r\n\r\n  if (Array.isArray(manifest.icons)) {\r\n    manifest.icons.forEach((ico) => {\r\n      if (!existsInPublic(ico.src)) missing.push(ico.src);\r\n    });\r\n  }\r\n\r\n  if (Array.isArray(manifest.screenshots)) {\r\n    manifest.screenshots.forEach((ss) => {\r\n      if (!existsInPublic(ss.src)) missing.push(ss.src);\r\n    });\r\n  }\r\n\r\n  if (!existsInPublic(manifest.start_url)) {\r\n    // start_url is often './' so skip that case\r\n    if (manifest.start_url && manifest.start_url !== './') missing.push(manifest.start_url);\r\n  }\r\n\r\n  // Check manifest properties\r\n  const errors = [];\r\n  \r\n  // Check for required fields\r\n  ['name', 'short_name', 'start_url', 'display'].forEach(field => {\r\n    if (!manifest[field]) {\r\n      errors.push(`Missing required field: ${field}`);\r\n    }\r\n  });\r\n\r\n  // Check icons array\r\n  if (!Array.isArray(manifest.icons) || manifest.icons.length === 0) {\r\n    errors.push('Manifest must contain at least one icon');\r\n  } else {\r\n    manifest.icons.forEach((icon, index) => {\r\n      if (!icon.src) errors.push(`Icon at index ${index} missing src`);\r\n      if (!icon.sizes) errors.push(`Icon at index ${index} missing sizes`);\r\n      if (!icon.type) errors.push(`Icon at index ${index} missing type`);\r\n    });\r\n  }\r\n\r\n  // Report missing files\r\n  if (missing.length) {\r\n    errors.push('Missing files referenced in manifest:');\r\n    missing.forEach(m => errors.push(`  - ${m}`));\r\n  }\r\n\r\n  // Report all errors or success\r\n  if (errors.length) {\r\n    console.error('Manifest validation failed:');\r\n    errors.forEach(err => console.error(' ❌', err));\r\n    process.exit(3);\r\n  }\r\n\r\n  console.log('✅ Manifest validation passed. All referenced assets exist and required fields are present.');\r\n}\r\n\r\nmain();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\app\\api\\metrics\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isBanned' is defined but never used.","line":20,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isBasicLand' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'desiredBasicDistribution' is defined but never used.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'suggestLandCycles' is defined but never used.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'smallImage' is defined but never used.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'statusTimeoutRef' is assigned a value but never used.","line":58,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'chunks' is assigned a value but never used.","line":235,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":235,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport type { Card, SavedDeck } from '@/lib/types';\nimport { CommanderSearch } from '@/components/CommanderSearch';\nimport { AICommanderSuggestion } from '@/components/AICommanderSuggestion';\nimport { CardSearch } from '@/components/CardSearch';\nimport { DeckList } from '@/components/DeckList';\nimport { SavedDecks } from '@/components/SavedDecks';\nimport { HoverPreview } from '@/components/HoverPreview';\nimport { InstallPrompt } from '@/components/InstallPrompt';\nimport { UpdateChecker } from '@/components/UpdateChecker';\nimport { OwnedCards } from '@/components/OwnedCards';\nimport { Maybeboard } from '@/components/Maybeboard';\nimport { ImportDeck } from '@/components/ImportDeck';\nimport { PowerLevel } from '@/components/PowerLevel';\nimport { Playtest } from '@/components/Playtest';\nimport { analyzePowerLevel } from '@/lib/powerLevel';\nimport { setupHotkeys, type HotkeyHandler } from '@/lib/hotkeys';\nimport { isBanned } from '@/lib/import';\nimport {\n  fetchCardById,\n  fetchNamedCard,\n  getRandomCard,\n} from '@/lib/scryfall';\nimport {\n  isLand,\n  isBasicLand,\n  isDuplicateInDeck,\n  isColorlessOnly,\n  producesCommanderColors,\n  getBasicLandNamesForCI,\n  desiredBasicDistribution,\n  suggestLandCycles,\n  smallImage,\n} from '@/lib/deck';\nimport { saveState, getDarkMode, setDarkMode } from '@/lib/storage';\n\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\n\nexport default function Home() {\n  const [mounted, setMounted] = useState(false);\n  const [commander, setCommander] = useState<Card | null>(null);\n  const [deck, setDeck] = useState<Card[]>([]);\n  const [darkMode, setDarkModeState] = useState(false);\n  const [mdfcAsLand, setMdfcAsLand] = useState(true);\n  const [targetLands, setTargetLands] = useState(32);\n  const [basicsPercent, setBasicsPercent] = useState(60);\n  const [preferColorLands, setPreferColorLands] = useState(true);\n  const [avoidColorlessLands, setAvoidColorlessLands] = useState(true);\n  const [hoverCard, setHoverCard] = useState<Card | null>(null);\n  const [hoverPos, setHoverPos] = useState({ x: 0, y: 0 });\n  const [generatingDeck, setGeneratingDeck] = useState(false);\n  const [deckGenStatus, setDeckGenStatus] = useState<string>('');\n  const [maybeboard, setMaybeboard] = useState<Card[]>([]);\n  \n  // Refs for performance optimization\n  const statusTimeoutRef = useRef<NodeJS.Timeout | undefined>(undefined);\n  const debouncedSaveRef = useRef<NodeJS.Timeout | undefined>(undefined);\n  const loadingRef = useRef<boolean>(false);\n\n  // Load state on mount (client-side only) with browser compatibility\n  useEffect(() => {\n    setMounted(true);\n    try {\n      const saved = getDarkMode();\n      setDarkModeState(saved);\n      if (typeof document !== 'undefined') {\n        try {\n          const htmlEl = document.documentElement;\n          const bodyEl = document.body;\n          if (htmlEl && bodyEl) {\n            if (htmlEl.classList && bodyEl.classList) {\n              // Modern browsers with classList support\n              if (saved) {\n                htmlEl.classList.add('dark');\n                bodyEl.classList.add('dark');\n              } else {\n                htmlEl.classList.remove('dark');\n                bodyEl.classList.remove('dark');\n              }\n            } else {\n              // Fallback for older browsers\n              if (saved) {\n                htmlEl.className += ' dark';\n                bodyEl.className += ' dark';\n              } else {\n                htmlEl.className = htmlEl.className.replace(/ dark/g, '');\n                bodyEl.className = bodyEl.className.replace(/ dark/g, '');\n              }\n            }\n          }\n        } catch (e) {\n          console.warn('Error loading dark mode:', e);\n        }\n      }\n    } catch (e) {\n      console.warn('Error loading dark mode from storage:', e);\n    }\n\n    // Load deck state\n    if (typeof window !== 'undefined') {\n      const state = localStorage.getItem('edh_builder_state');\n      if (state) {\n        try {\n          const parsed = JSON.parse(state);\n          if (parsed.commanderId) {\n            fetchCardById(parsed.commanderId).then(c => {\n              if (c) setCommander(c);\n            });\n          }\n          if (Array.isArray(parsed.deckIds) && parsed.deckIds.length) {\n            const loadDeck = async () => {\n              const cards: Card[] = [];\n              for (let i = 0; i < parsed.deckIds.length; i += 20) {\n                const chunk = parsed.deckIds.slice(i, i + 20);\n                const fetched = await Promise.all(chunk.map((id: string) => fetchCardById(id)));\n                cards.push(...fetched.filter(Boolean) as Card[]);\n                await sleep(80);\n              }\n              setDeck(cards);\n            };\n            loadDeck();\n          }\n        } catch {}\n      }\n    }\n  }, []);\n\n  // Save state whenever deck/commander changes (only after mount)\n  // Don't save empty state - this prevents clearing after import\n  useEffect(() => {\n    if (mounted && (commander || deck.length > 0)) {\n      if (debouncedSaveRef.current) {\n        clearTimeout(debouncedSaveRef.current);\n      }\n      debouncedSaveRef.current = setTimeout(() => {\n        saveState(commander, deck);\n      }, 1000); // Debounce saving for 1 second\n    }\n    return () => {\n      if (debouncedSaveRef.current) {\n        clearTimeout(debouncedSaveRef.current);\n      }\n    };\n  }, [commander, deck, mounted]);\n\n  // Dark mode toggle with better browser compatibility\n  const toggleDarkMode = useCallback(() => {\n    const newMode = !darkMode;\n    setDarkModeState(newMode);\n    try {\n      setDarkMode(newMode);\n    } catch (e) {\n      // Fallback for browsers that don't support localStorage\n      console.warn('localStorage not available:', e);\n    }\n    if (typeof document !== 'undefined') {\n      try {\n        const htmlEl = document.documentElement;\n        const bodyEl = document.body;\n        if (htmlEl && bodyEl) {\n          if (htmlEl.classList && bodyEl.classList) {\n            // Modern browsers with classList support\n            if (newMode) {\n              htmlEl.classList.add('dark');\n              bodyEl.classList.add('dark');\n            } else {\n              htmlEl.classList.remove('dark');\n              bodyEl.classList.remove('dark');\n            }\n          } else {\n            // Fallback for older browsers\n            if (newMode) {\n              htmlEl.className += ' dark';\n              bodyEl.className += ' dark';\n            } else {\n              htmlEl.className = htmlEl.className.replace(/ dark/g, '');\n              bodyEl.className = bodyEl.className.replace(/ dark/g, '');\n            }\n          }\n        }\n      } catch (e) {\n        console.warn('Error toggling dark mode:', e);\n      }\n    }\n  }, [darkMode]);\n\n  const handleSelectCommander = useCallback((c: Card) => {\n    setCommander(c);\n    setDeck([]);\n  }, []);\n\n  const handleAddCard = useCallback((card: Card) => {\n    setDeck(prev => {\n      if (prev.length >= 99) return prev;\n      if (isDuplicateInDeck(card, prev)) return prev;\n      return [...prev, card];\n    });\n  }, []);\n\n  const handleRemoveCard = useCallback((cardId: string) => {\n    setDeck(prev => prev.filter(c => c.id !== cardId));\n  }, []);\n\n  const handleTagCard = useCallback((cardId: string, tag: 'Ramp' | 'Draw' | 'Removal' | '') => {\n    setDeck(prev => prev.map(c => c.id === cardId ? { ...c, _tag: tag || undefined } : c));\n  }, []);\n\n  const handleSaveDeck = useCallback(() => {\n    const name = prompt('Enter deck name:');\n    if (!name?.trim()) return;\n    const decks = JSON.parse(localStorage.getItem('edh_saved_decks') || '{}');\n    if (decks[name] && !confirm('Overwrite existing deck?')) return;\n    decks[name] = { commanderId: commander?.id || null, deckIds: deck.map(c => c.id) };\n    localStorage.setItem('edh_saved_decks', JSON.stringify(decks));\n    alert('Deck saved.');\n  }, [commander, deck]);\n\n  const handleLoadDeck = useCallback(async (saved: SavedDeck) => {\n    if (loadingRef.current) return; // Prevent concurrent loads\n    loadingRef.current = true;\n    setDeckGenStatus('Loading deck...');\n    \n    try {\n      if (saved.commanderId) {\n        const c = await fetchCardById(saved.commanderId);\n        if (c) setCommander(c);\n      }\n      setDeck([]);\n      \n      if (Array.isArray(saved.deckIds) && saved.deckIds.length) {\n        const cards: Card[] = [];\n        const chunkSize = 20;\n        const chunks = Math.ceil(saved.deckIds.length / chunkSize);\n        \n        for (let i = 0; i < saved.deckIds.length; i += chunkSize) {\n          if (!loadingRef.current) break; // Allow cancellation\n          const chunk = saved.deckIds.slice(i, i + chunkSize);\n          const fetched = await Promise.all(chunk.map((id: string) => fetchCardById(id)));\n          cards.push(...fetched.filter(Boolean) as Card[]);\n          setDeckGenStatus(`Loading deck... ${Math.min(100, Math.round((i + chunkSize) / saved.deckIds.length * 100))}%`);\n          await sleep(80);\n        }\n        \n        if (loadingRef.current) { // Only update if not cancelled\n          setDeck(cards);\n          setDeckGenStatus('Deck loaded successfully!');\n          setTimeout(() => setDeckGenStatus(''), 2000);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading deck:', error);\n      setDeckGenStatus('Error loading deck. Please try again.');\n      setTimeout(() => setDeckGenStatus(''), 3000);\n    } finally {\n      loadingRef.current = false;\n    }\n  }, []);\n\n  const handleReset = useCallback(() => {\n    setCommander(null);\n    setDeck([]);\n    localStorage.removeItem('edh_builder_state');\n  }, []);\n\n  const handleGenerateRandomDeck = useCallback(async () => {\n    if (!commander || generatingDeck) return;\n    \n    setGeneratingDeck(true);\n    setDeckGenStatus('Starting deck generation...');\n    setDeck([]);\n    \n    try {\n      const target = Math.max(32, Math.min(60, targetLands));\n      const basicsPct = Math.max(0, Math.min(100, basicsPercent));\n\n      // Add nonlands first\n      const ci = commander.color_identity || [];\n      setDeckGenStatus(`Generating non-land cards...`);\n      const nonlands: Card[] = [];\n      const nonlandCount = 99 - target;\n      let added = 0;\n      for (let guard = 0; guard < nonlandCount * 6 && added < nonlandCount; guard++) {\n        const c = await getRandomCard(ci, '-t:land');\n        if (c && !isDuplicateInDeck(c, nonlands)) {\n          nonlands.push(c);\n          added++;\n          if (added % 10 === 0) {\n            setDeckGenStatus(`Generated ${added}/${nonlandCount} non-land cards...`);\n            setDeck([...nonlands]);\n          }\n        }\n        await sleep(40);\n      }\n      setDeck(nonlands);\n      setDeckGenStatus(`Generated ${nonlands.length} non-land cards. Adding lands...`);\n\n      // Add lands\n      const desiredBasics = Math.round(target * (basicsPct / 100));\n      const basics = getBasicLandNamesForCI(ci.join(''));\n      const newDeck = [...nonlands];\n      let basicsAdded = 0;\n      setDeckGenStatus(`Adding basic lands (${desiredBasics} needed)...`);\n      while (basicsAdded < desiredBasics) {\n        const name = basics[Math.floor(Math.random() * basics.length)];\n        const card = await fetchNamedCard(name);\n        if (card) {\n          newDeck.push(card);\n          basicsAdded++;\n          if (basicsAdded % 5 === 0) {\n            setDeckGenStatus(`Added ${basicsAdded}/${desiredBasics} basic lands...`);\n            setDeck([...newDeck]);\n          }\n        }\n        await sleep(20);\n      }\n      setDeck(newDeck);\n\n      // Add color-producing nonbasic lands\n      let need = target - desiredBasics;\n      setDeckGenStatus(`Adding non-basic lands (${need} needed)...`);\n      const finalDeck = [...newDeck];\n      let landsAdded = 0;\n      while (need > 0 && landsAdded < target * 2) {\n        const c = await getRandomCard(ci, 't:land -type:basic');\n        if (c) {\n          if (preferColorLands && !producesCommanderColors(c, ci)) continue;\n          if (avoidColorlessLands && isColorlessOnly(c)) continue;\n          if (!isDuplicateInDeck(c, finalDeck)) {\n            finalDeck.push(c);\n            need--;\n            landsAdded++;\n            if (landsAdded % 5 === 0) {\n              setDeckGenStatus(`Added ${landsAdded} non-basic lands (${need} remaining)...`);\n              setDeck([...finalDeck]);\n            }\n          }\n        }\n        await sleep(35);\n      }\n      setDeck(finalDeck);\n      \n      const total = finalDeck.length;\n      const landCount = finalDeck.filter(c => isLand(c, mdfcAsLand)).length;\n      setDeckGenStatus(`Deck generated! ${total} cards (${landCount} lands)`);\n      \n      // Clear status after 3 seconds\n      setTimeout(() => {\n        setDeckGenStatus('');\n      }, 3000);\n    } catch (error) {\n      console.error('Error generating deck:', error);\n      setDeckGenStatus('Error generating deck. Please try again.');\n      setTimeout(() => {\n        setDeckGenStatus('');\n      }, 5000);\n    } finally {\n      setGeneratingDeck(false);\n    }\n  }, [commander, targetLands, basicsPercent, preferColorLands, avoidColorlessLands, generatingDeck, mdfcAsLand]);\n\n  const handleMouseMove = useCallback((e: React.MouseEvent, card: Card | null) => {\n    setHoverCard(card);\n    setHoverPos({ x: e.clientX, y: e.clientY });\n  }, []);\n\n  const handleMouseLeave = useCallback(() => {\n    setHoverCard(null);\n  }, []);\n\n  // Power level analysis\n  const powerLevelAnalysis = commander && deck.length > 0 \n    ? analyzePowerLevel(commander, deck, mdfcAsLand)\n    : null;\n\n  // Import deck handler\n  const handleImportDeck = useCallback((commander: Card | null, deck: Card[], maybeboard: Card[]) => {\n    // Only update if we got valid data - don't reset if import partially failed\n    if (deck.length > 0 || commander !== null) {\n      setCommander(commander);\n      setDeck(deck);\n      setMaybeboard(maybeboard || []);\n    } else {\n      console.warn('Import resulted in empty deck and no commander');\n    }\n  }, []);\n\n  // Maybeboard handlers\n  const handleAddToDeckFromMaybeboard = useCallback((card: Card) => {\n    if (deck.length >= 99) {\n      alert('Deck is full (99 cards plus 1 commander).');\n      return;\n    }\n    setDeck(prev => [...prev, card]);\n    setMaybeboard(prev => prev.filter(c => c.id !== card.id));\n  }, [deck]);\n\n  const handleRemoveFromMaybeboard = useCallback((cardId: string) => {\n    setMaybeboard(prev => prev.filter(c => c.id !== cardId));\n  }, []);\n\n  const handleAddToMaybeboard = useCallback((card: Card) => {\n    setMaybeboard(prev => {\n      if (prev.some(c => c.id === card.id)) return prev;\n      return [...prev, card];\n    });\n  }, []);\n\n  // Hotkeys setup\n  useEffect(() => {\n    const handlers: HotkeyHandler[] = [\n      { action: 'search-commander', handler: () => {\n        const input = document.querySelector('input[placeholder*=\"commander\"]') as HTMLInputElement;\n        input?.focus();\n      }, description: 'Search commander' },\n      { action: 'search-cards', handler: () => {\n        const input = document.querySelector('input[placeholder*=\"cards\"]') as HTMLInputElement;\n        input?.focus();\n      }, description: 'Search cards' },\n      { action: 'random-deck', handler: handleGenerateRandomDeck, description: 'Random deck' },\n      { action: 'toggle-dark-mode', handler: toggleDarkMode, description: 'Toggle dark mode' },\n      { action: 'reset-deck', handler: handleReset, description: 'Reset deck' },\n    ];\n    \n    const cleanup = setupHotkeys(handlers);\n    return cleanup;\n  }, [handleGenerateRandomDeck, toggleDarkMode, handleReset]);\n\n  return (\n    <div className=\"container\">\n      <h1>MTG Commander Deck Builder</h1>\n\n      <div className=\"small muted\" style={{ display: 'flex', justifyContent: 'flex-end', gap: '0.5rem', alignItems: 'center', marginBottom: '0.5rem' }}>\n        <label>\n          <input type=\"checkbox\" checked={darkMode} onChange={toggleDarkMode} /> Dark mode\n        </label>\n        <button className=\"btn\" onClick={handleSaveDeck}>\n          Save Deck\n        </button>\n      </div>\n\n          <div className=\"space-y-4\">\n            <CommanderSearch\n              onSelect={handleSelectCommander}\n              onHover={(card, e) => handleMouseMove(e, card)}\n              onMouseLeave={handleMouseLeave}\n            />\n            <AICommanderSuggestion onSelect={handleSelectCommander} />\n          </div>      {commander && (\n        <section className=\"col\">\n          <div\n            onMouseMove={(e) => handleMouseMove(e, commander)}\n            onMouseLeave={handleMouseLeave}\n          >\n            <h3>\n              {commander.name} {commander.mana_cost && <span className=\"muted small\">({commander.mana_cost})</span>}\n            </h3>\n            <div className=\"small muted\">\n              {commander.type_line || ''} {commander.color_identity?.map(c => <span key={c} className=\"pill\">{c}</span>)}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {commander && (\n        <>\n          <CardSearch\n            commander={commander}\n            deck={deck}\n            onAddCard={handleAddCard}\n            onGenerateRandomDeck={handleGenerateRandomDeck}\n            mdfcAsLand={mdfcAsLand}\n            setMdfcAsLand={setMdfcAsLand}\n            targetLands={targetLands}\n            setTargetLands={setTargetLands}\n            basicsPercent={basicsPercent}\n            setBasicsPercent={setBasicsPercent}\n            preferColorLands={preferColorLands}\n            setPreferColorLands={setPreferColorLands}\n            avoidColorlessLands={avoidColorlessLands}\n            setAvoidColorlessLands={setAvoidColorlessLands}\n            onHover={(card, e) => handleMouseMove(e, card)}\n            onMouseLeave={handleMouseLeave}\n            generatingDeck={generatingDeck}\n            deckGenStatus={deckGenStatus}\n          />\n          <DeckList\n            commander={commander}\n            deck={deck}\n            onRemove={handleRemoveCard}\n            onTag={handleTagCard}\n            onAddToMaybeboard={handleAddToMaybeboard}\n            mdfcAsLand={mdfcAsLand}\n            targetLands={targetLands}\n            onHover={(card, e) => handleMouseMove(e, card)}\n            onMouseLeave={handleMouseLeave}\n          />\n          <div className=\"inline-controls\" style={{ marginTop: '0.5rem' }}>\n            <button className=\"btn danger\" onClick={handleReset}>\n              Reset Deck\n            </button>\n        </div>\n          <SavedDecks onLoad={handleLoadDeck} />\n          <OwnedCards onOwnedCardsChange={() => {}} />\n          <ImportDeck onImport={handleImportDeck} />\n          {powerLevelAnalysis && <PowerLevel analysis={powerLevelAnalysis} />}\n          <Maybeboard\n            maybeboard={maybeboard}\n            onAddToDeck={handleAddToDeckFromMaybeboard}\n            onRemove={handleRemoveFromMaybeboard}\n            onHover={(card, e) => handleMouseMove(e, card)}\n            onMouseLeave={handleMouseLeave}\n          />\n          <Playtest\n            commander={commander}\n            deck={deck}\n            onShuffle={() => {}}\n          />\n        </>\n      )}\n\n      <HoverPreview card={hoverCard} x={hoverPos.x} y={hoverPos.y} />\n      <InstallPrompt />\n      <UpdateChecker />\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\AICommanderSuggestion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\CardSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\CommanderSearch.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSearch'. Either include it or remove the dependency array.","line":31,"column":6,"nodeType":"ArrayExpression","endLine":31,"endColumn":36,"suggestions":[{"desc":"Update the dependencies array to be: [colorFilter, archetypeFilter, handleSearch]","fix":{"range":[1124,1154],"text":"[colorFilter, archetypeFilter, handleSearch]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\DeckList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'desiredBasicDistribution' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'suggestLandCycles' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'targetLands' is defined but never used.","line":31,"column":93,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":104},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setLandSuggestions' is assigned a value but never used.","line":32,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":128,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5097,5100],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5097,5100],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport type { Card } from '@/lib/types';\nimport {\n  cardName,\n  manaCost,\n  manaValue,\n  pipCounts,\n  isLand,\n  countByTypeLine,\n  desiredBasicDistribution,\n  suggestLandCycles,\n} from '@/lib/deck';\nimport { makeStandardExport, makeMTGO, makeArena, makeMoxfield, makeArchidekt, makeMoxfieldWithTags, copyToClipboard } from '@/lib/export';\nimport { isOwned } from '@/lib/storage';\nimport { isBanned } from '@/lib/import';\n\ninterface DeckListProps {\n  commander: Card | null;\n  deck: Card[];\n  onRemove: (cardId: string) => void;\n  onTag: (cardId: string, tag: 'Ramp' | 'Draw' | 'Removal' | '') => void;\n  onAddToMaybeboard?: (card: Card) => void;\n  mdfcAsLand: boolean;\n  targetLands: number;\n  onHover?: (card: Card | null, e: React.MouseEvent) => void;\n  onMouseLeave?: () => void;\n}\n\nexport function DeckList({ commander, deck, onRemove, onTag, onAddToMaybeboard, mdfcAsLand, targetLands, onHover, onMouseLeave }: DeckListProps) {\n  const [landSuggestions, setLandSuggestions] = useState('');\n\n  const nonlands = deck.filter(c => !isLand(c, mdfcAsLand));\n  const lands = deck.filter(c => isLand(c, mdfcAsLand));\n  const ordered = [...nonlands, ...lands];\n  const counts = countByTypeLine(deck);\n\n  // Analytics\n  const mvBuckets = [0, 1, 2, 3, 4, 5, 6];\n  const curve: Record<number, number> = { 0: 0, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };\n  const pipTotal = { W: 0, U: 0, B: 0, R: 0, G: 0 };\n  for (const c of nonlands) {\n    const mv = Math.min(6, Math.floor(manaValue(c)));\n    curve[mv]++;\n    const pc = pipCounts(c);\n    for (const k of Object.keys(pipTotal) as Array<keyof typeof pipTotal>) pipTotal[k] += pc[k] || 0;\n  }\n  const curveStr = `Curve: ${mvBuckets.map(k => `${k}${k === 6 ? '+' : ''}:${curve[k]}`).join(' | ')}`;\n  const pipStr = `Pips W:${pipTotal.W} U:${pipTotal.U} B:${pipTotal.B} R:${pipTotal.R} G:${pipTotal.G}`;\n\n  // Heuristics\n  const bigDrops = nonlands.filter(c => manaValue(c) >= 6).length;\n  const rampCount = deck.filter(c => c._tag === 'Ramp').length;\n  const drawCount = deck.filter(c => c._tag === 'Draw').length;\n  const warn: string[] = [];\n  if (bigDrops > 12) warn.push('Many 6+ drops');\n  if (rampCount < 8) warn.push('Low ramp');\n  if (drawCount < 8) warn.push('Low draw');\n  if (lands.length < 32) warn.push('Low land count');\n\n  const exportText = makeStandardExport(commander, deck, mdfcAsLand);\n\n  const handleCopy = async () => {\n    await copyToClipboard(exportText);\n    alert('Decklist copied to clipboard.');\n  };\n\n  const handleExportMTGO = async () => {\n    await copyToClipboard(makeMTGO(deck, mdfcAsLand));\n    alert('MTGO decklist copied to clipboard.');\n  };\n\n  const handleExportArena = async () => {\n    await copyToClipboard(makeArena(commander, deck, mdfcAsLand));\n    alert('Arena decklist copied to clipboard.');\n  };\n\n  const handleExportMoxfield = async () => {\n    await copyToClipboard(makeMoxfield(commander, deck, mdfcAsLand));\n    alert('Moxfield decklist copied to clipboard.');\n  };\n\n  const handleExportArchidekt = async () => {\n    await copyToClipboard(makeArchidekt(commander, deck, mdfcAsLand));\n    alert('Archidekt decklist copied to clipboard.');\n  };\n\n  const handleExportMoxfieldWithTags = async () => {\n    await copyToClipboard(makeMoxfieldWithTags(commander, deck, mdfcAsLand));\n    alert('Moxfield decklist with tags copied to clipboard.');\n  };\n\n  if (!commander) return null;\n\n  return (\n    <section>\n      <h2>\n        Deck List (<span>{deck.length}</span> cards)\n      </h2>\n      <div className=\"line\">\n        <div>\n          <strong>Commander:</strong> <span>{cardName(commander)}</span>{' '}\n          <span dangerouslySetInnerHTML={{ __html: commander.color_identity?.map(c => `<span class=\"pill\">${c}</span>`).join(' ') || '' }} />\n        </div>\n        <div className=\"small muted\">\n          Tip: Press <span className=\"kbd\">Enter</span> to search • Hover a card to preview\n        </div>\n      </div>\n      <ul>\n        {ordered.map((c) => {\n          const legal = c?.legalities?.commander === 'legal' ? <span className=\"badge\">EDH</span> : null;\n          const tag = c._tag ? <span className=\"badge\">{c._tag}</span> : null;\n          const owned = isOwned(c.id) ? <span className=\"badge\" style={{ background: '#d4edda', color: '#155724', borderColor: '#c3e6cb' }}>Owned</span> : null;\n          const banned = isBanned(c.name) ? <span className=\"badge\" style={{ background: '#f8d7da', color: '#721c24', borderColor: '#f5c6cb' }}>BANNED</span> : null;\n          return (\n            <li\n              key={c.id}\n              onMouseMove={(e) => onHover?.(c, e)}\n              onMouseLeave={onMouseLeave}\n            >\n              <span className=\"small\">\n                {cardName(c)} {manaCost(c) && `(${manaCost(c)})`} - <span className=\"muted\">{c.type_line || ''}</span>{' '}\n                {legal} {tag} {owned} {banned}\n              </span>\n              <span style={{ flex: '1 1 auto' }}></span>\n              <div className=\"inline-controls\">\n                <select className=\"btn\" onChange={(e) => onTag(c.id, e.target.value as any)} defaultValue=\"\">\n                  <option value=\"\">Tag</option>\n                  <option value=\"Ramp\">Ramp</option>\n                  <option value=\"Draw\">Draw</option>\n                  <option value=\"Removal\">Removal</option>\n                </select>\n                {onAddToMaybeboard && (\n                  <button className=\"btn\" onClick={() => onAddToMaybeboard(c)}>\n                    To Maybe\n                  </button>\n                )}\n                <button className=\"btn\" onClick={() => onRemove(c.id)}>\n                  Remove\n                </button>\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n      <div className=\"small\" style={{ margin: '0.5rem 0', display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n        <span>{curveStr}</span> <span>{pipStr}</span>\n        {warn.length > 0 && (\n          <span className=\"badge\" style={{ background: '#fff3cd', color: '#8a6d3b', borderColor: '#ffecb5' }}>\n            {warn.join(', ')}\n          </span>\n        )}\n      </div>\n      <div className=\"small\">\n        <span className=\"badge\">Creatures: {counts.creature}</span>\n        <span className=\"badge\">Instants: {counts.instant}</span>\n        <span className=\"badge\">Sorceries: {counts.sorcery}</span>\n        <span className=\"badge\">Artifacts: {counts.artifact}</span>\n        <span className=\"badge\">Enchantments: {counts.enchantment}</span>\n        <span className=\"badge\">Planeswalkers: {counts.planeswalker}</span>\n        <span className=\"badge\">Lands: {counts.land}</span>\n      </div>\n      <h3>Export Decklist</h3>\n      <textarea rows={15} value={exportText} readOnly style={{ width: '100%', fontFamily: 'monospace', fontSize: '0.9rem' }} />\n      <div className=\"inline-controls\">\n        <button className=\"btn\" onClick={handleCopy}>\n          Copy\n        </button>\n        <button className=\"btn\" onClick={handleExportMTGO}>\n          Copy MTGO\n        </button>\n        <button className=\"btn\" onClick={handleExportArena}>\n          Copy Arena\n        </button>\n        <button className=\"btn\" onClick={handleExportMoxfield}>\n          Copy Moxfield\n        </button>\n        <button className=\"btn\" onClick={handleExportMoxfieldWithTags}>\n          Copy Moxfield (Tags)\n        </button>\n        <button className=\"btn\" onClick={handleExportArchidekt}>\n          Copy Archidekt\n        </button>\n      </div>\n      <div className=\"small muted\">{landSuggestions && `Suggestions: ${landSuggestions}`}</div>\n    </section>\n  );\n}\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\HoverPreview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'x' is defined but never used.","line":13,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":15},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\HoverPreview.tsx:21:5\n  19 |   // Handle image loading with error handling\n  20 |   useEffect(() => {\n> 21 |     setError(null);\n     |     ^^^^^^^^ Avoid calling setState() directly within an effect\n  22 |     if (card) {\n  23 |       const img = new Image();\n  24 |       img.onload = () => {","line":21,"column":5,"nodeType":null,"endLine":21,"endColumn":13},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":78,"column":7,"nodeType":"JSXOpeningElement","endLine":88,"endColumn":9}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport type { Card } from '@/lib/types';\r\nimport { normalImage } from '@/lib/deck';\r\n\r\ninterface HoverPreviewProps {\r\n  card: Card | null;\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport function HoverPreview({ card, x, y }: HoverPreviewProps) {\r\n  const [image, setImage] = useState<string | null>(null);\r\n  const [topPosition, setTopPosition] = useState('20px');\r\n  const [error, setError] = useState<string | null>(null);\r\n  const debounceTimer = useRef<NodeJS.Timeout | undefined>(undefined);\r\n\r\n  // Handle image loading with error handling\r\n  useEffect(() => {\r\n    setError(null);\r\n    if (card) {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        setImage(normalImage(card));\r\n        setError(null);\r\n      };\r\n      img.onerror = () => {\r\n        setError('Failed to load card image');\r\n        setImage(null);\r\n      };\r\n      const imgUrl = normalImage(card);\r\n      if (imgUrl) {\r\n        img.src = imgUrl;\r\n      } else {\r\n        setError('No image available for this card');\r\n      }\r\n    } else {\r\n      setImage(null);\r\n    }\r\n  }, [card]);\r\n\r\n  // Debounced position updates\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined' && card) {\r\n      if (debounceTimer.current) {\r\n        clearTimeout(debounceTimer.current);\r\n      }\r\n      \r\n      debounceTimer.current = setTimeout(() => {\r\n        const maxTop = window.innerHeight - 650;\r\n        const calculatedTop = Math.max(20, Math.min(y - 300, maxTop));\r\n        setTopPosition(`${calculatedTop}px`);\r\n      }, 16); // ~1 frame at 60fps\r\n    }\r\n    \r\n    return () => {\r\n      if (debounceTimer.current) {\r\n        clearTimeout(debounceTimer.current);\r\n      }\r\n    };\r\n  }, [y, card]);\r\n\r\n  if (!image) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"img-popover\"\r\n      style={{\r\n        position: 'fixed',\r\n        pointerEvents: 'none',\r\n        zIndex: 9999,\r\n        left: '20px',\r\n        top: topPosition,\r\n        display: image ? 'block' : 'none',\r\n      }}\r\n    >\r\n      <img \r\n        src={image} \r\n        alt=\"Card preview\" \r\n        style={{ \r\n          width: '450px', \r\n          height: 'auto', \r\n          display: 'block',\r\n          boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)',\r\n          borderRadius: '8px',\r\n        }} \r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\ImportDeck.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":90,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &quot;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &ldquo;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &#34;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: &rdquo;Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":90,"column":57,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&quot;\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&ldquo;\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&#34;\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3217,3286],"text":"\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...&rdquo;\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":92,"column":22,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &quot;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &ldquo;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &#34;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: &rdquo;// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":92,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&quot;\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&ldquo;\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&#34;\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3292,3374],"text":"\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...&rdquo;\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":94,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &quot;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &ldquo;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &#34;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: &rdquo;Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":94,"column":82,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&quot;\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&ldquo;\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&#34;\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3380,3472],"text":"\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...&rdquo;\r\n      "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport type { Card } from '@/lib/types';\r\nimport { importDeckFromText } from '@/lib/import';\r\n\r\ninterface ImportDeckProps {\r\n  onImport: (commander: Card | null, deck: Card[], maybeboard: Card[]) => void;\r\n}\r\n\r\nexport function ImportDeck({ onImport }: ImportDeckProps) {\r\n  const [text, setText] = useState('');\r\n  const [importing, setImporting] = useState(false);\r\n  const [status, setStatus] = useState<string>('');\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  const handleImport = async () => {\r\n    if (!text.trim()) {\r\n      setStatus('Please paste a decklist first.');\r\n      return;\r\n    }\r\n\r\n    setImporting(true);\r\n    setStatus('Importing deck...');\r\n\r\n    try {\r\n      const result = await importDeckFromText(text, (progress) => {\r\n        setStatus(progress);\r\n      });\r\n\r\n      if (result.deck.length === 0 && !result.commander) {\r\n        setStatus('Import failed: No cards found. Please check the decklist format.');\r\n        setTimeout(() => setStatus(''), 5000);\r\n        return;\r\n      }\r\n      \r\n      setStatus(`Imported ${result.deck.length} cards${result.maybeboard.length > 0 ? ` and ${result.maybeboard.length} maybeboard cards` : ''}${result.commander ? ` with commander ${result.commander.name}` : ''}.`);\r\n      onImport(result.commander, result.deck, result.maybeboard);\r\n      setText('');\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } catch (error) {\r\n      console.error('Import error:', error);\r\n      setStatus('Error importing deck. Please check the format.');\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } finally {\r\n      setImporting(false);\r\n    }\r\n  };\r\n\r\n  const handlePaste = () => {\r\n    textareaRef.current?.focus();\r\n    navigator.clipboard.readText().then((clipText) => {\r\n      setText(clipText);\r\n    }).catch(() => {\r\n      // Fallback - user can manually paste\r\n    });\r\n  };\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Import Deck</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Paste a decklist from Moxfield, Archidekt, or any text format. Supports commanders, main deck, and maybeboard sections.\r\n      </div>\r\n      <textarea\r\n        ref={textareaRef}\r\n        value={text}\r\n        onChange={(e) => setText(e.target.value)}\r\n        placeholder=\"Paste decklist here (Moxfield, Archidekt, or text format)...\"\r\n        rows={10}\r\n        style={{ width: '100%', fontFamily: 'monospace', fontSize: '0.9rem' }}\r\n        disabled={importing}\r\n      />\r\n      <div className=\"inline-controls\" style={{ marginTop: '0.5rem' }}>\r\n        <button className=\"btn primary\" onClick={handleImport} disabled={importing || !text.trim()}>\r\n          {importing ? 'Importing...' : 'Import Deck'}\r\n        </button>\r\n        <button className=\"btn\" onClick={handlePaste} disabled={importing}>\r\n          Paste from Clipboard\r\n        </button>\r\n        {status && (\r\n          <span className=\"small muted\" style={{ color: 'var(--primary)' }}>\r\n            {status}\r\n          </span>\r\n        )}\r\n      </div>\r\n      <div className=\"small muted\" style={{ marginTop: '0.5rem' }}>\r\n        Format examples:\r\n        <br />\r\n        • Moxfield: \"Commander\\n1 Name\\n\\n1 Card Name...\"\r\n        <br />\r\n        • Archidekt: \"// Commander\\n1 Name\\n\\n// Deck\\n1 Card Name...\"\r\n        <br />\r\n        • Standard: \"Commander\\n1 Name\\n\\nNonlands\\n1 Card...\\n\\nLands\\n1 Card...\"\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\InstallPrompt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\Maybeboard.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":27,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &quot;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &ldquo;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &#34;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click &rdquo;Add to Deck\" to move them to your deck.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":27,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&quot; to move them to your deck.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&ldquo; to move them to your deck.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&#34; to move them to your deck.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[687,794],"text":"\r\n        Cards considered but not in the main deck. Click \"Add to Deck&rdquo; to move them to your deck.\r\n      "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport type { Card } from '@/lib/types';\r\nimport { cardName, manaCost } from '@/lib/deck';\r\n\r\ninterface MaybeboardProps {\r\n  maybeboard: Card[];\r\n  onAddToDeck: (card: Card) => void;\r\n  onRemove: (cardId: string) => void;\r\n  onHover?: (card: Card | null, e: React.MouseEvent) => void;\r\n  onMouseLeave?: () => void;\r\n}\r\n\r\nexport function Maybeboard({\r\n  maybeboard,\r\n  onAddToDeck,\r\n  onRemove,\r\n  onHover,\r\n  onMouseLeave,\r\n}: MaybeboardProps) {\r\n  if (maybeboard.length === 0) return null;\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Maybeboard ({maybeboard.length})</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Cards considered but not in the main deck. Click \"Add to Deck\" to move them to your deck.\r\n      </div>\r\n      <ul>\r\n        {maybeboard.map((c) => {\r\n          const legal = c?.legalities?.commander === 'legal' ? <span className=\"badge\">EDH</span> : null;\r\n          const tag = c._tag ? <span className=\"badge\">{c._tag}</span> : null;\r\n          return (\r\n            <li\r\n              key={c.id}\r\n              onMouseMove={(e) => onHover?.(c, e)}\r\n              onMouseLeave={onMouseLeave}\r\n            >\r\n              <span className=\"small\">\r\n                {cardName(c)} {manaCost(c) && `(${manaCost(c)})`} - <span className=\"muted\">{c.type_line || ''}</span>{' '}\r\n                {legal} {tag}\r\n              </span>\r\n              <span style={{ flex: '1 1 auto' }}></span>\r\n              <div className=\"inline-controls\">\r\n                <button className=\"btn\" onClick={() => onAddToDeck(c)}>\r\n                  Add to Deck\r\n                </button>\r\n                <button className=\"btn\" onClick={() => onRemove(c.id)}>\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\OwnedCards.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cardName' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":7,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleToggleOwned' is assigned a value but never used.","line":91,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":26},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &quot;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &ldquo;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &#34;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., &rdquo;1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&quot; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&ldquo; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&#34; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt&rdquo; or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &quot;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &ldquo;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &#34;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or &rdquo;Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":143,"column":84,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&quot;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&ldquo;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&#34;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4692,4839],"text":"\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt&rdquo;). \r\n        Lines starting with // or # are ignored.\r\n      "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useRef } from 'react';\r\nimport { getOwnedCards, setOwnedCards, addOwnedCard, removeOwnedCard } from '@/lib/storage';\r\nimport { fetchNamedCard } from '@/lib/scryfall';\r\nimport { cardName } from '@/lib/deck';\r\nimport type { Card } from '@/lib/types';\r\n\r\ninterface OwnedCardsProps {\r\n  onOwnedCardsChange?: () => void;\r\n}\r\n\r\nexport function OwnedCards({ onOwnedCardsChange }: OwnedCardsProps) {\r\n  const [ownedSet, setOwnedSet] = useState<Set<string>>(getOwnedCards());\r\n  const [processing, setProcessing] = useState(false);\r\n  const [status, setStatus] = useState<string>('');\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const refreshOwned = useCallback(() => {\r\n    const owned = getOwnedCards();\r\n    setOwnedSet(owned);\r\n    onOwnedCardsChange?.();\r\n  }, [onOwnedCardsChange]);\r\n\r\n  const handleFileUpload = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setProcessing(true);\r\n    setStatus('Processing file...');\r\n\r\n    try {\r\n      const text = await file.text();\r\n      const lines = text.split('\\n').map(l => l.trim()).filter(l => l);\r\n      const cardNames: string[] = [];\r\n      \r\n      // Parse different formats: \"1 Card Name\", \"Card Name\", \"// Comment\", etc.\r\n      for (const line of lines) {\r\n        if (line.startsWith('//') || line.startsWith('#') || !line) continue;\r\n        // Remove quantity prefix like \"1 \" or \"2x \"\r\n        const match = line.match(/^\\d+\\s*(?:x\\s*)?(.+)$/i);\r\n        const cardName = match ? match[1].trim() : line.trim();\r\n        if (cardName) cardNames.push(cardName);\r\n      }\r\n\r\n      setStatus(`Found ${cardNames.length} card names. Looking up cards...`);\r\n      \r\n      // Fetch cards and add to owned set\r\n      const owned = new Set(ownedSet);\r\n      let added = 0;\r\n      let failed = 0;\r\n\r\n      for (let i = 0; i < cardNames.length; i++) {\r\n        const name = cardNames[i];\r\n        try {\r\n          const card = await fetchNamedCard(name);\r\n          if (card) {\r\n            owned.add(card.id);\r\n            added++;\r\n            if (added % 10 === 0) {\r\n              setStatus(`Added ${added}/${cardNames.length} cards...`);\r\n            }\r\n          } else {\r\n            failed++;\r\n          }\r\n        } catch {\r\n          failed++;\r\n        }\r\n        // Rate limit\r\n        if (i % 10 === 0 && i > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, 100));\r\n        }\r\n      }\r\n\r\n      setOwnedCards(owned);\r\n      refreshOwned();\r\n      setStatus(`Successfully added ${added} cards. ${failed} cards not found.`);\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } catch (error) {\r\n      console.error('Error processing file:', error);\r\n      setStatus('Error processing file. Please check the format.');\r\n      setTimeout(() => setStatus(''), 5000);\r\n    } finally {\r\n      setProcessing(false);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  }, [ownedSet, refreshOwned]);\r\n\r\n  const handleToggleOwned = useCallback((cardId: string) => {\r\n    if (ownedSet.has(cardId)) {\r\n      removeOwnedCard(cardId);\r\n    } else {\r\n      addOwnedCard(cardId);\r\n    }\r\n    refreshOwned();\r\n  }, [ownedSet, refreshOwned]);\r\n\r\n  const handleClearAll = useCallback(() => {\r\n    if (confirm('Clear all owned cards?')) {\r\n      setOwnedCards([]);\r\n      refreshOwned();\r\n    }\r\n  }, [refreshOwned]);\r\n\r\n  const ownedCount = ownedSet.size;\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Owned Cards ({ownedCount})</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Upload a text file (TXT/CSV) with card names to mark cards as owned. Cards will be highlighted in your decklist.\r\n      </div>\r\n      <div className=\"inline-controls\" style={{ marginBottom: '0.5rem' }}>\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\".txt,.csv,.text\"\r\n          onChange={handleFileUpload}\r\n          disabled={processing}\r\n          style={{ display: 'none' }}\r\n        />\r\n        <button\r\n          className=\"btn\"\r\n          onClick={() => fileInputRef.current?.click()}\r\n          disabled={processing}\r\n        >\r\n          {processing ? 'Processing...' : 'Upload Card List'}\r\n        </button>\r\n        {ownedCount > 0 && (\r\n          <button className=\"btn\" onClick={handleClearAll}>\r\n            Clear All\r\n          </button>\r\n        )}\r\n        {status && (\r\n          <span className=\"small muted\" style={{ color: 'var(--primary)' }}>\r\n            {status}\r\n          </span>\r\n        )}\r\n      </div>\r\n      <div className=\"small muted\">\r\n        Format: One card name per line (e.g., \"1 Lightning Bolt\" or \"Lightning Bolt\"). \r\n        Lines starting with // or # are ignored.\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\Playtest.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'commander' is defined but never used.","line":13,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":37},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'statusTimeoutRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'statusTimeoutRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":24,"column":39,"nodeType":"Identifier","endLine":24,"endColumn":46},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\Playtest.tsx:31:5\n  29 |   // Reset state when deck changes\n  30 |   useEffect(() => {\n> 31 |     setHand([]);\n     |     ^^^^^^^ Avoid calling setState() directly within an effect\n  32 |     setLibrary([]);\n  33 |     setGraveyard([]);\n  34 |     setDrawn(0);","line":31,"column":5,"nodeType":null,"endLine":31,"endColumn":12},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":111,"column":68,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3454,3546],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&apos;s consistency.\r\n      "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3454,3546],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&lsquo;s consistency.\r\n      "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3454,3546],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&#39;s consistency.\r\n      "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3454,3546],"text":"\r\n        Simulate shuffles, opening hands, and draws. Test your deck&rsquo;s consistency.\r\n      "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useEffect, useRef } from 'react';\r\nimport type { Card } from '@/lib/types';\r\nimport { cardName, manaCost, manaValue } from '@/lib/deck';\r\n\r\ninterface PlaytestProps {\r\n  commander: Card | null;\r\n  deck: Card[];\r\n  onShuffle: () => void;\r\n}\r\n\r\nexport function Playtest({ commander, deck, onShuffle }: PlaytestProps) {\r\n  const [hand, setHand] = useState<Card[]>([]);\r\n  const [library, setLibrary] = useState<Card[]>([]);\r\n  const [graveyard, setGraveyard] = useState<Card[]>([]);\r\n  const [drawn, setDrawn] = useState(0);\r\n  const statusTimeoutRef = useRef<NodeJS.Timeout | undefined>(undefined);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (statusTimeoutRef.current) {\r\n        clearTimeout(statusTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Reset state when deck changes\r\n  useEffect(() => {\r\n    setHand([]);\r\n    setLibrary([]);\r\n    setGraveyard([]);\r\n    setDrawn(0);\r\n  }, [deck]);\r\n\r\n  const shuffleLibrary = useCallback(() => {\r\n    if (deck.length === 0) return;\r\n    const shuffled = [...deck].sort(() => Math.random() - 0.5);\r\n    setLibrary(shuffled);\r\n    setHand([]);\r\n    setGraveyard([]);\r\n    setDrawn(0);\r\n    onShuffle();\r\n  }, [deck, onShuffle]);\r\n\r\n  const drawCard = useCallback(() => {\r\n    if (library.length === 0) {\r\n      alert('Library is empty!');\r\n      return;\r\n    }\r\n    const card = library[0];\r\n    setLibrary(prev => prev.slice(1));\r\n    setHand(prev => [...prev, card]);\r\n    setDrawn(prev => prev + 1);\r\n  }, [library]);\r\n\r\n  const drawHand = useCallback((count: number = 7) => {\r\n    if (library.length < count) {\r\n      alert(`Not enough cards in library! (${library.length} remaining)`);\r\n      return;\r\n    }\r\n    const drawnCards = library.slice(0, count);\r\n    setLibrary(prev => prev.slice(count));\r\n    setHand(prev => [...prev, ...drawnCards]);\r\n    setDrawn(prev => prev + count);\r\n  }, [library]);\r\n\r\n  const mulligan = useCallback(() => {\r\n    if (hand.length === 0) return;\r\n    setLibrary(prev => [...prev, ...hand]);\r\n    setHand([]);\r\n    setDrawn(0);\r\n    // Shuffle after adding cards back\r\n    setTimeout(() => {\r\n      setLibrary(prev => [...prev].sort(() => Math.random() - 0.5));\r\n    }, 0);\r\n  }, [hand]);\r\n\r\n  const discard = useCallback((cardId: string) => {\r\n    const card = hand.find(c => c.id === cardId);\r\n    if (!card) return;\r\n    setHand(prev => prev.filter(c => c.id !== cardId));\r\n    setGraveyard(prev => [...prev, card]);\r\n  }, [hand]);\r\n\r\n  const reset = useCallback(() => {\r\n    setHand([]);\r\n    setLibrary([]);\r\n    setGraveyard([]);\r\n    setDrawn(0);\r\n  }, []);\r\n\r\n  // Analyze hand\r\n  const handAnalysis = {\r\n    totalManaValue: hand.reduce((sum, c) => sum + manaValue(c), 0),\r\n    averageManaValue: hand.length > 0 ? hand.reduce((sum, c) => sum + manaValue(c), 0) / hand.length : 0,\r\n    lands: hand.filter(c => c.type_line?.toLowerCase().includes('land')).length,\r\n    ramp: hand.filter(c => c._tag === 'Ramp').length,\r\n    draw: hand.filter(c => c._tag === 'Draw').length,\r\n    removal: hand.filter(c => c._tag === 'Removal').length,\r\n  };\r\n\r\n  const isPlayable = handAnalysis.lands >= 2 || handAnalysis.ramp >= 1;\r\n  const isGoodHand = isPlayable && handAnalysis.averageManaValue <= 3 && handAnalysis.lands >= 3;\r\n\r\n  return (\r\n    <section style={{ marginTop: '1rem' }}>\r\n      <h3>Playtest Mode</h3>\r\n      <div className=\"small muted\" style={{ marginBottom: '0.5rem' }}>\r\n        Simulate shuffles, opening hands, and draws. Test your deck's consistency.\r\n      </div>\r\n      \r\n      <div className=\"inline-controls\" style={{ marginBottom: '1rem' }}>\r\n        <button className=\"btn primary\" onClick={shuffleLibrary} disabled={deck.length === 0}>\r\n          Shuffle Library\r\n        </button>\r\n        <button className=\"btn\" onClick={() => drawHand(7)} disabled={library.length < 7}>\r\n          Draw Opening Hand (7)\r\n        </button>\r\n        <button className=\"btn\" onClick={() => drawCard()} disabled={library.length === 0}>\r\n          Draw Card\r\n        </button>\r\n        <button className=\"btn\" onClick={mulligan} disabled={hand.length === 0}>\r\n          Mulligan\r\n        </button>\r\n        <button className=\"btn\" onClick={reset}>\r\n          Reset\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"small\" style={{ marginBottom: '1rem' }}>\r\n        <span>Library: {library.length} cards</span>\r\n        {' • '}\r\n        <span>Hand: {hand.length} cards</span>\r\n        {' • '}\r\n        <span>Graveyard: {graveyard.length} cards</span>\r\n        {' • '}\r\n        <span>Drawn: {drawn} cards</span>\r\n      </div>\r\n\r\n      {hand.length > 0 && (\r\n        <div style={{ marginBottom: '1rem', padding: '1rem', background: 'var(--chip)', borderRadius: '8px' }}>\r\n          <h4 className=\"small\" style={{ marginBottom: '0.5rem' }}>Hand Analysis</h4>\r\n          <div className=\"small\" style={{ marginBottom: '0.5rem' }}>\r\n            <span className={isGoodHand ? 'badge' : ''} style={isGoodHand ? { background: '#d4edda', color: '#155724' } : {}}>\r\n              {isGoodHand ? '✓ Good Hand' : isPlayable ? '~ Playable' : '✗ Poor Hand'}\r\n            </span>\r\n          </div>\r\n          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))', gap: '0.5rem' }}>\r\n            <div className=\"small\">Lands: {handAnalysis.lands}</div>\r\n            <div className=\"small\">Ramp: {handAnalysis.ramp}</div>\r\n            <div className=\"small\">Draw: {handAnalysis.draw}</div>\r\n            <div className=\"small\">Removal: {handAnalysis.removal}</div>\r\n            <div className=\"small\">Avg MV: {handAnalysis.averageManaValue.toFixed(1)}</div>\r\n            <div className=\"small\">Total MV: {handAnalysis.totalManaValue}</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {hand.length > 0 && (\r\n        <div>\r\n          <h4 className=\"small\" style={{ marginBottom: '0.5rem' }}>Hand ({hand.length} cards)</h4>\r\n          <ul>\r\n            {hand.map((c) => (\r\n              <li key={c.id}>\r\n                <span className=\"small\">\r\n                  {cardName(c)} {manaCost(c) && `(${manaCost(c)})`} - <span className=\"muted\">{c.type_line || ''}</span>\r\n                </span>\r\n                <button className=\"btn\" onClick={() => discard(c.id)} style={{ marginLeft: 'auto' }}>\r\n                  Discard\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\PowerLevel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\SavedDecks.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\SavedDecks.tsx:15:5\n  13 |\n  14 |   useEffect(() => {\n> 15 |     setDecks(getSavedDecks());\n     |     ^^^^^^^^ Avoid calling setState() directly within an effect\n  16 |   }, []);\n  17 |\n  18 |   const handleDelete = (name: string) => {","line":15,"column":5,"nodeType":null,"endLine":15,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getSavedDecks, setSavedDecks } from '@/lib/storage';\r\nimport type { SavedDeck } from '@/lib/types';\r\n\r\ninterface SavedDecksProps {\r\n  onLoad: (deck: SavedDeck) => void;\r\n}\r\n\r\nexport function SavedDecks({ onLoad }: SavedDecksProps) {\r\n  const [decks, setDecks] = useState<Record<string, SavedDeck>>({});\r\n\r\n  useEffect(() => {\r\n    setDecks(getSavedDecks());\r\n  }, []);\r\n\r\n  const handleDelete = (name: string) => {\r\n    if (!confirm(`Delete deck \"${name}\"?`)) return;\r\n    const updated = { ...decks };\r\n    delete updated[name];\r\n    setSavedDecks(updated);\r\n    setDecks(updated);\r\n  };\r\n\r\n  const handleLoad = (name: string) => {\r\n    const deck = decks[name];\r\n    if (deck) {\r\n      onLoad(deck);\r\n      alert(`Loaded deck: ${name}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h3>Saved Decks</h3>\r\n      <ul>\r\n        {Object.keys(decks)\r\n          .sort()\r\n          .map((name) => (\r\n            <li key={name}>\r\n              <span>{name}</span>{' '}\r\n              <button className=\"btn\" onClick={() => handleLoad(name)}>\r\n                Load\r\n              </button>{' '}\r\n              <button className=\"btn danger\" onClick={() => handleDelete(name)}>\r\n                Delete\r\n              </button>\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\ServiceWorker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\components\\UpdateChecker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\__tests__\\commanderAI.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\__tests__\\deck.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pipCounts' is defined but never used.","line":2,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'vitest';\r\nimport { cardName, manaCost, manaValue, pipCounts } from '../deck';\r\nimport type { Card } from '../types';\r\n\r\ndescribe('deck utilities', () => {\r\n  it('should get card name', () => {\r\n    const card = { name: 'Lightning Bolt' } as Card;\r\n    expect(cardName(card)).toBe('Lightning Bolt');\r\n    expect(cardName(null)).toBe('Unknown');\r\n  });\r\n\r\n  it('should get mana cost', () => {\r\n    const card = { mana_cost: '{1}{R}' } as Card;\r\n    expect(manaCost(card)).toBe('{1}{R}');\r\n    expect(manaCost(null)).toBe('');\r\n\r\n    const doubleCard = {\r\n      card_faces: [\r\n        { mana_cost: '{2}{U}' }\r\n      ]\r\n    } as Card;\r\n    expect(manaCost(doubleCard)).toBe('{2}{U}');\r\n  });\r\n\r\n  it('should get mana value', () => {\r\n    const card = { cmc: 2 } as Card;\r\n    expect(manaValue(card)).toBe(2);\r\n    expect(manaValue(null)).toBe(0);\r\n  });\r\n});","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\__tests__\\validation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\commanderAI.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\deck.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\export.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\hotkeys.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":65,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type HotkeyAction = \r\n  | 'search-commander'\r\n  | 'search-cards'\r\n  | 'random-deck'\r\n  | 'random-commander'\r\n  | 'export'\r\n  | 'save-deck'\r\n  | 'toggle-dark-mode'\r\n  | 'reset-deck';\r\n\r\nexport interface HotkeyHandler {\r\n  action: HotkeyAction;\r\n  handler: () => void;\r\n  description: string;\r\n}\r\n\r\nconst HOTKEY_MAP: Record<string, HotkeyAction> = {\r\n  '/': 'search-commander',\r\n  'f': 'search-cards',\r\n  'r': 'random-deck',\r\n  'q': 'random-commander',\r\n  'e': 'export',\r\n  's': 'save-deck',\r\n  'd': 'toggle-dark-mode',\r\n  'x': 'reset-deck',\r\n};\r\n\r\nexport function setupHotkeys(handlers: HotkeyHandler[]): () => void {\r\n  const handlerMap = new Map<HotkeyAction, () => void>();\r\n  handlers.forEach(h => handlerMap.set(h.action, h.handler));\r\n\r\n  const handleKeyDown = (e: KeyboardEvent) => {\r\n    // Don't trigger if typing in input/textarea\r\n    const target = e.target as HTMLElement;\r\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\r\n      // Allow '/' for search when not already focused\r\n      if (e.key === '/' && target !== document.activeElement) {\r\n        e.preventDefault();\r\n        const handler = handlerMap.get('search-commander');\r\n        if (handler) handler();\r\n      }\r\n      return;\r\n    }\r\n\r\n    const action = HOTKEY_MAP[e.key.toLowerCase()];\r\n    if (action) {\r\n      const handler = handlerMap.get(action);\r\n      if (handler) {\r\n        e.preventDefault();\r\n        handler();\r\n      }\r\n    }\r\n  };\r\n\r\n  window.addEventListener('keydown', handleKeyDown);\r\n  \r\n  return () => {\r\n    window.removeEventListener('keydown', handleKeyDown);\r\n  };\r\n}\r\n\r\nexport function getHotkeyHelp(handlers: HotkeyHandler[]): string {\r\n  const help: string[] = [];\r\n  handlers.forEach(h => {\r\n    const key = Object.entries(HOTKEY_MAP).find(([_, action]) => action === h.action)?.[0];\r\n    if (key) {\r\n      help.push(`${key.toUpperCase()}: ${h.description}`);\r\n    }\r\n  });\r\n  return help.join(' • ');\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\import.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\performance.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":34,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\n// Metric names\r\nexport const WEB_VITALS = ['CLS', 'FCP', 'FID', 'INP', 'LCP', 'TTFB'];\r\n\r\n// Function to report performance metrics\r\nexport async function reportWebVitals(metric: {\r\n  id: string;\r\n  name: string;\r\n  value: number;\r\n  label: string;\r\n}) {\r\n  if (process.env.NODE_ENV === 'development') {\r\n    console.log('Performance metric:', metric);\r\n    return;\r\n  }\r\n\r\n  // In production, you might want to send this to your analytics service\r\n  try {\r\n    await fetch('/api/metrics', {\r\n      method: 'POST',\r\n      body: JSON.stringify(metric),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to report web vital:', error);\r\n  }\r\n}\r\n\r\n// Middleware to add Server-Timing header\r\nexport function middleware(request: NextRequest) {\r\n  const response = NextResponse.next();\r\n  \r\n  // Add Server-Timing header\r\n  const startTime = process.hrtime();\r\n  response.headers.set('Server-Timing', `total;dur=${process.hrtime(startTime)[1] / 1000000}`);\r\n  \r\n  return response;\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\powerLevel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\scryfall.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\lib\\validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\src\\middleware.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":4,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nexport function middleware(request: NextRequest) {\r\n  const response = NextResponse.next();\r\n\r\n  // Add security headers\r\n  response.headers.set('X-DNS-Prefetch-Control', 'on');\r\n  response.headers.set('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');\r\n  response.headers.set('X-Frame-Options', 'SAMEORIGIN');\r\n  response.headers.set('X-Content-Type-Options', 'nosniff');\r\n  response.headers.set('Referrer-Policy', 'origin-when-cross-origin');\r\n  response.headers.set(\r\n    'Content-Security-Policy',\r\n    \"default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self';\"\r\n  );\r\n\r\n  // Add performance monitoring headers\r\n  const startTime = process.hrtime();\r\n  response.headers.set('Server-Timing', `total;dur=${process.hrtime(startTime)[1] / 1000000}`);\r\n\r\n  return response;\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jason Rozansky\\deckbuilder\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]